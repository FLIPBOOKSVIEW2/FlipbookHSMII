"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[3310],{94101:function(e,t,i){i.d(t,{Z:function(){return a}});var o=i(18023),n=i(76748),r={name:"ResourceReplace",props:{text:{type:String,default:n.ag.t("propsForEffect.changeMaterial")}},data(){return{}},computed:{currentSelectedItem:function(){return this.$store.getters.currentSelectedItem}},methods:{intoReplaceMode(){if(this.currentSelectedItem.isAsyncItem)return this.$message.warning(this.$t("asyncItem_20240318.text4"));this.$store.commit(o.Ewg,{isPreview:!1}),this.$store.commit(o.eKS,{isShow:!0})}},components:{ReplaceIcon:()=>i.e(4210).then(i.bind(i,74210))}},s=(0,i(1001).Z)(r,(function(){var e=this,t=e._self._c;return t("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(t){return e.intoReplaceMode.apply(null,arguments)}}},[t("el-icon",{staticStyle:{"margin-right":"5px"},attrs:{size:14}},[t("ReplaceIcon")],1),e._v(" "+e._s(e.text)+" ")],1)}),[],!1,null,"cc0535a6",null),a=s.exports},3310:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var o=i(18023),n=i(11201),r=i(90894),s=i(83093),a=i(24118),c={name:"PropsForVideo",data(){return{videoType:1}},mixins:[i(12915).S],computed:{isAdjustable:{get:function(){return this.currentSelectedItem.isAdjustable},set:function(e){this.currentSelectedItem.isAdjustable=e}},showSecVideoPanel:function(){return!!this.isFlipPro||this.$store.getters.showSecVideoPanel},currentPageItems:function(){return this.$store.getters.currentPageItems},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},currentSelectedItem:function(){return this.$store.getters.currentSelectedItem},isXZPro:function(){return this.$store.getters.isXZPro},isFlipPro:function(){return this.$store.getters.isFlipPro},isBGI:{get:function(){return this.currentSelectedItem.isBGI},set:function(e){this.currentSelectedItem.isBGI=e}},videoInfo:function(){return this.currentSelectedItem.videoInfo},volume:{get:function(){return 100*this.videoInfo.volume},set:function(e){this.videoInfo.volume=e/100}},isYZPro:function(){return this.$store.getters.isYZPro},pathAnime:function(){return this.$store.state.timeline.pathAnime},pathItemSelectedIndex:function(){return this.pathAnime.pathItemSelectedIndex},showFilter:function(){return-1===this.pathItemSelectedIndex&&!!this.isXZPro}},methods:{changeVideoType:function(e,t){let i=this.currentSelectedItemIndex,n=this.currentSelectedItem;this.$store.commit(o.mNn,{index:i});const c=a.Z.copy(n.style,!0),l=parseFloat(c.width),u=parseFloat(c.height),m=l/u,h=n.videoWidth,d=n.videoHeight,p=h/d;if(p>m){const e=l/p,t=parseFloat(c.top)-(e-u)/2;c.height=e+"px",c.top=t+"px"}else{const e=p*u,t=parseFloat(c.left)-(e-l)/2;c.width=e+"px",c.left=t+"px"}3===e?(this.clearVideoMask(n),(0,s.j)({item:{type:"pluginVideo",playerType:3},isIgnoreSaveBeforePage:!0,canUndo:!1})):(0,s.j)({item:{type:"pluginVideo"},isIgnoreSaveBeforePage:!0,canUndo:!1}),this.$store.commit(o.dmy,{index:i}),this.isFlipPro||this.$store.commit(o.$8l,{menu:"video"});let f=this.currentPageItems.length-1,g=i;f!==g&&this.$store.commit(o.Mk8,{from:f,to:g,notLayer:!0}),(0,r.f)(n,{style:c,videoHeight:d,videoWidth:h,isBGI:!1}),setTimeout((()=>{this.$store.commit(o.D9V,{isShow:!1}),this.$store.commit(o.SJz,{isFailed:!1})}),1e3),this.videoType=1,this.$nextTick((()=>{this.$store.commit(o.N23,{canUndo:!0})}))},toBGI:function(e){if(e){this.currentSelectedItem.CID&&(this.currentSelectedItem.CID=0);let e=this.currentSelectedItemIndex;if(0!==e&&this.currentPageItems[0].isBGI&&(this.$store.commit(o.mNn,{index:0}),e-=1),0!==e){let t=e,i=0;this.$store.commit(o.Mk8,{from:t,to:i,selectBG:!0})}let t=this.$store.state.workSpace.canvas.page,i=t.originalWidth,n=t.originalHeight;this.$store.commit(o.veJ,{item:this.currentPageItems[0],width:i,height:n,top:0,left:0,canUndo:!0})}else{let e=this.$store.getters.newItemStyle,t=e.suitableLeft,i=e.suitableTop;this.$store.commit(o.veJ,{item:this.currentPageItems[0],width:e.suitableWidth,height:e.suitableHeight,top:i,left:t,canUndo:!0})}},volumeChange:function(){this.$store.commit(o.N23,{canUndo:!0})},saveBeforePage:function(e){this.$store.commit(o.CjF)},showVideoClip:function(){this.saveBeforePage(),this.$store.commit(o.BPn,{isShow:!0})},clearVideoMask:function(e){e.animationFiles.maskImageFile.url&&(this.$store.commit(o.CjF),e.animationFiles.maskImageFile.url="",e.animationFiles.maskImageFile.fileName="",e.animationFiles.maskImageFile.isUploadMask=!1,e.animationFiles.maskImageFile.isNewFile=!1,e.isShowMaskImage=!1,this.$store.commit(o.N23,{canUndo:!0}))}},components:{PropGroup:n.default,PropsSlider:()=>Promise.resolve().then(i.bind(i,19428)),FilterVue:()=>i.e(3369).then(i.bind(i,43369))}},l=(0,i(1001).Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("PropGroup",[e.isFlipPro?e._e():t("ResourceReplace"),t("div",{staticClass:"btn btn-white",on:{click:e.showVideoClip}},[e._v(" "+e._s(e.$t("VideoClip_vue.text3"))+" ")]),e.showFilter?t("FilterVue",{attrs:{"show-black-filter":!1,"show-recover":!1}}):e._e()],1),e.showSecVideoPanel&&!e.isXZPro?t("PropGroup",{attrs:{title:e.$t("rightPanel.audio_type")}},[t("el-radio-group",{on:{input:e.changeVideoType},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.videoType,callback:function(t){e.videoType=t},expression:"videoType"}},[t("el-row",{staticClass:"pluginVideo-normal"},[t("el-radio",{attrs:{"data-v":"v2",label:2}},[t("span",[e._v(e._s(e.$t("PropsForPluginVideo_vue.text2")))])])],1),t("el-row",{staticClass:"pluginVideo-normal textarea"},[t("el-radio",{attrs:{"data-v":"v2",label:1}},[t("span",[e._v(e._s(e.$t("PropsForPluginVideo_vue.text1")))])])],1),e.isYZPro?t("el-row",[t("el-radio",{attrs:{"data-v":"v2",label:3,title:e.$t("pluginVideo2023_04_25.text1")}},[e._v(e._s(e.$t("pluginVideo2023_04_25.text1")))])],1):e._e()],1)],1):e._e(),t("PropGroup",{attrs:{title:"rightPanel.video_videoSetting"}},[t("el-checkbox",{attrs:{"data-v":"v2"},on:{change:e.toBGI},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.isBGI,callback:function(t){e.isBGI=t},expression:"isBGI"}},[e._v(e._s(e.$t("_PropsForVideo_vue.text1")))])],1),t("PropGroup",{attrs:{title:"rightPanel.video_videoVolume"}},[t("PropsSlider",{attrs:{title:e.$t("rightPanel.audio_audioSetting"),sliderNumber:e.volume,min:0,max:100,step:1},on:{"update:sliderNumber":function(t){e.volume=t},"update:slider-number":function(t){e.volume=t}}})],1)],1)}),[],!1,null,"94519e42",null),u=l.exports},12915:function(e,t,i){i.d(t,{S:function(){return c}});var o=i(18023),n=i(94101),r={name:"ResourceTopGroup",data(){return{}},computed:{pathAnime:function(){return this.$store.state.timeline.pathAnime},pathItemSelectedIndex:function(){return this.pathAnime.pathItemSelectedIndex},item:function(){return-1!==this.pathItemSelectedIndex?this.$store.getters.currentSelectedPathItem:this.$store.getters.currentSelectedItem},isXZPro:function(){return this.$store.getters.isXZPro},isMulti:function(){return this.$store.getters.isMulti}},methods:{intoReplaceMode(){this.$store.commit(o.Ewg,{isPreview:!1}),this.$store.commit(o.eKS,{isShow:!0})},searchBeLike:function(){this.$store.commit(o.$8l,{menu:"material"}),this.isShowSearchPanel=!0,setTimeout((()=>{eventBus.$emit(busType.SEARCH_SIMILARITY,this.item.name)}),500)}},components:{PropGroup:i(11201).default}},s=(0,i(1001).Z)(r,(function(){var e=this,t=e._self._c;return t("PropGroup",{attrs:{itemId:e.item.id}},[e.isMulti?e._e():[t("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(t){return e.intoReplaceMode.apply(null,arguments)}}},[e._v(" "+e._s(e.$t("propsForEffect.changeMaterial"))+" ")]),e.isXZPro?t("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(t){return e.searchBeLike.apply(null,arguments)}}},[e._v(" 搜索相似 ")]):e._e(),e.isXZPro?t("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(t){return e.searchBeLike.apply(null,arguments)}}},[e._v(" 收藏 ")]):e._e()],e._t("default")],2)}),[],!1,null,"5e160046",null),a=s.exports;const c={components:{ResourceReplace:n.Z,ResourceTopGroup:a},replaceRes:function(){this.$store.commit(o.Ewg,{isPreview:!1}),this.$store.commit(o.eKS,{isShow:!0})},computed:{currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},isEditingPath:function(){return this.$store.state.timeline.pathAnime.isEditingPath},showReplaceBtn:function(){return!(-1!==this.currentSelectedGroupItemIndex&&!this.isEditingPath)},isXZPro:function(){return this.$store.getters.isXZPro}}}}}]);