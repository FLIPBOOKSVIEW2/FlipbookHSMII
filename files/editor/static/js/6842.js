"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[6842],{56842:function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});s(57658);var i=s(18023),a={name:"AudioCrossPage",components:{PropsSwitch:s(69361).default},props:{item:{type:Object}},data(){return{tipsMsg:null}},mounted(){this.resetPlayFromPage(),this.resetPlayToPage()},computed:{isPlayAcrossPage:{get:function(){return this.item.isPlayAcrossPage},set:function(e){this.item.isPlayAcrossPage=e}},playFromPage:{get:function(){return this.item.playFromPage},set:function(e){this.item.playFromPage=e}},playToPage:{get:function(){return this.item.playToPage},set:function(e){this.item.playToPage=e}},isH5Pro:function(){return this.$store.getters.isH5Pro},isDoubleEdit:function(){return this.$store.state.doublePage.isDoubleEdit},pagesLength:function(){if(this.isH5Pro&&this.isDoubleEdit){let e=this.$store.state.pagePanel.pages.length,t=this.$store.state.pagePanel.pages[e-1],s=1;return s=1===e?1:t.isSinglePage?1+2*(e-2)+1:1+2*(e-1),s}return this.$store.state.pagePanel.pages.length},currentIndex:function(){return this.$store.state.pagePanel.currentIndex},isSinglePage:function(){let e=!0;if(this.currentIndex>0){const t=this.getItemRealIndex(this.currentIndex);e=!!this.currentPages[t].isSinglePage}return e},itemPositionType:function(){let e=this.$store.state.workSpace.canvas.page.originalWidth,t="",s=parseFloat(this.item.style.left),i=parseFloat(this.item.style.width);return s+i<=e/2?t="left":s>=e/2?t="right":s<e/2&&s+i>e/2&&(t="cross"),t},descTips:function(){return`${this.$t("audioCrossPage_20250220.text4")}\n${this.$t("audioCrossPage_20250220.text5")}\n${this.$t("audioCrossPage_20250220.text6")}`},currentPages:function(){if(!this.isDoubleEdit)return this.$store.state.pagePanel.pages;const e=[];return this.$store.state.pagePanel.pages.forEach((t=>{t.pagesList?e.push(...t.pagesList):e.push(t)})),e}},watch:{itemPositionType:function(e){this.isDoubleEdit&&e&&(this.resetPlayFromPage(),this.resetPlayToPage())}},methods:{saveBeforePage:function(){this.$store.commit(i.CjF)},saveUndo:function(){this.$store.commit(i.N23,{canUndo:!0})},playFromPageInput:function(e){},playToPageInput:function(){},resetPlayFromPage:function(){this.setPlayFromPageValue(!1)},resetPlayToPage:function(){this.isH5Pro&&this.isDoubleEdit?this.getDoubleToPage("reset"):(this.playToPage<this.currentIndex+1&&(this.playToPage=this.currentIndex+1),this.playToPage>this.pagesLength&&(this.playToPage=this.pagesLength))},playToPageBlur:function(e){this.playToPage<1&&(this.playToPage=1);const t=Number.parseInt(e.target.value);t>this.pagesLength&&(this.playToPage=this.getItemRealIndex(this.currentIndex)+1,this.showInputTips("audioCrossPage_20250220.text2","info")),t<this.playFromPage&&(this.playToPage=this.getItemRealIndex(this.currentIndex)+1,this.showInputTips("audioCrossPage_20250220.text3","info"))},playFromPageBlur:function(e){this.setPlayFromPageValue()},getDoubleFromPage:function(e,t){this.setPlayFromPageValue()},getDoubleToPage:function(e,t){switch(e){case"reset":if(this.currentIndex>0){let e=2*(this.currentIndex+1)-2;this.isSinglePage||(e=["right","cross"].includes(this.itemPositionType)?2*(this.currentIndex+1)-1:2*(this.currentIndex+1)-2),this.playToPage<e&&(this.playToPage=e)}else this.playToPage<this.currentIndex+1&&(this.playToPage=this.currentIndex+1);break;case"blur":if(this.currentIndex>0){let e=2*(this.currentIndex+1)-2;this.isSinglePage||(e=["right","cross"].includes(this.itemPositionType)?2*(this.currentIndex+1)-1:2*(this.currentIndex+1)-2),t.target.value<e&&(this.playToPage=e)}else t.target.value<this.currentIndex+1&&(this.playToPage=this.currentIndex+1)}},showInputTips:function(e="",t="info"){if(!e)return;const s=this.$t(e);this.tipsMsg?.close(),this.tipsMsg=null,this.tipsMsg=this.$message({message:s,type:t,showClose:!0,duration:3e3})},setPlayFromPageValue:function(e=!0){if(0===this.currentIndex)return this.playFromPage=1;const t=this.getItemRealIndex(this.currentIndex),s=Number.parseInt(this.playFromPage);if(s<=0||s>this.pagesLength)return this.playFromPage=t+1,void(e&&this.showInputTips("audioCrossPage_20250220.text1","info"));s!==t+1&&s!==t&&(this.playFromPage=t+1,e&&this.showInputTips("audioCrossPage_20250220.text1","info"))},targetPageIsDouble:function(e){const t=this.$store.state.pagePanel.pages[e-1];let s=!0;return e>0&&(s=!t.isSinglePage),s},getItemRealIndex:function(e){return this.isDoubleEdit?0===e?0:e===this.pagesLength-1?this.pagesLength-1:this.$store.getters.currentPage.isSinglePage||["left","cross"].includes(this.itemPositionType)?2*e-1:2*e:e}}},n=(0,s(1001).Z)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"AudioCrossPage"},[t("div",{staticClass:"audio-across-page"},[t("PropsSwitch",{attrs:{title:e.$t("propsForPluginMusic2022_10_13.text3"),value:e.isPlayAcrossPage,descTips:e.descTips,descTipsClass:"audio-across-page-tips",isBold:""},on:{"update:value":function(t){e.isPlayAcrossPage=t},change:e.saveUndo,switchDown:e.saveBeforePage}}),e.isPlayAcrossPage?t("div",{staticClass:"content"},[t("span",[e._v(e._s(e.$t("propsForPluginMusic2022_10_13.text5")))]),t("el-input",{directives:[{name:"smart-select",rawName:"v-smart-select"}],staticClass:"props_el-input-h34",on:{blur:e.playFromPageBlur,change:e.saveUndo},nativeOn:{keyup:function(t){return e.playFromPageInput.apply(null,arguments)},mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.playFromPage,callback:function(t){e.playFromPage=t},expression:"playFromPage"}}),t("span",[e._v(e._s(e.$t("propsForPluginMusic2022_10_13.text6")))]),t("el-input",{directives:[{name:"smart-select",rawName:"v-smart-select"}],staticClass:"props_el-input-h34",attrs:{type:"number"},on:{blur:e.playToPageBlur,change:e.saveUndo},nativeOn:{keyup:function(t){return e.playToPageInput.apply(null,arguments)},mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.playToPage,callback:function(t){e.playToPage=t},expression:"playToPage"}}),t("span",[e._v(e._s(e.$t("propsForPluginMusic2022_10_13.text7")))])],1):e._e()],1)])}),[],!1,null,"56bd1d06",null),o=n.exports}}]);