"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[8224],{48224:function(t,e,i){i.r(e),i.d(e,{default:function(){return r}});var s=i(22582),n={name:"RectangleSkin",components:{MuteButtonSkin0:()=>i.e(5497).then(i.bind(i,65497)),NextButtonSkin0:()=>i.e(9810).then(i.bind(i,49810)),NotMuteButtonSkin0:()=>i.e(1072).then(i.bind(i,51072)),PauseButtonSkin0:()=>i.e(4889).then(i.bind(i,64889)),PlayButtonSkin0:()=>i.e(7332).then(i.bind(i,52386)),PrevButtonSkin0:()=>i.e(6179).then(i.bind(i,19407)),ReplayButtonSkin0:()=>i.e(4549).then(i.bind(i,44549)),AudioQrcode:()=>i.e(94).then(i.bind(i,20094))},data(){return{isShowMiddleBar:!1,isShowSmallBar:!1,isShowVolumeProgress:!1,observer:null}},props:{item:{type:Object,required:!0},curMusicTotalTime:{type:Number,required:!0,desc:"当前音频的总时长"},isDraging:{type:Boolean,required:!0,desc:"播放进度条是否正在被拖拽"},curMusicCurTime:{type:Number,required:!0,desc:"当前音频播放到第几秒"},progress:{type:Number,required:!0,default:0,desc:"音频播放进度"},currentMusicSrc:{type:String,required:!1,desc:"当前正在播放的音频链接",default:""}},mounted:async function(){await this.$nextTick(),this.watchContainerSizeChange()},beforeDestroy:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},computed:{musicSkin:function(){return this.item.musicSkin},progressRunwayColor:function(){return this.item.skin0ColorObj.progressRunwayColor},gradientColor:function(){return(0,s.b)()},volumeBackgroundStyle:function(){return{"background-image":`linear-gradient(to right, ${this.gradientColor} ${this.item.volume}%, #f0f0f0 0%, #f0f0f0 100%`}},musicList:function(){return this.item.musicList},progressRunwayBackgroundStyle:function(){return{"background-image":`linear-gradient(to right, ${this.progressRunwayColor} ${this.progress}%, #f0f0f0 0%, #f0f0f0 100%`}},audioDuration:function(){if(0===this.musicList.length)return"00:00";const t=this.formatTime(this.curMusicTotalTime);return t||"00:00"},skinId:function(){return this.item.skinId},createTime:function(){return this.item.createTime},update:function(){return this.item.update},getAudioCurrentTime:function(){if(0===this.item.musicList.length)return"00:00";const t=this.progress/100*this.curMusicTotalTime;return 100===this.progress?this.formatTime(this.curMusicCurTime):this.formatTime(t)},audioIsPlaying:{get:function(){return this.item.audioIsPlaying},set:function(t){this.item.audioIsPlaying=t}},isMute:{get:function(){return this.item.isMute},set:function(t){this.item.isMute=t}},volume:{get:function(){return this.item.volume},set:function(t){this.item.volume=t}}},methods:{replay:function(){this.$emit("replay")},switchAudio:function(t){this.$emit("switchAudio",t)},play:function(){this.$emit("play")},pause:function(){this.$emit("pause")},muteOrRecover:function(){this.$emit("muteOrRecover")},changeVolume:function(t){this.$emit("changeVolume",t)},progressMouseDown:function(){this.$emit("progressMouseDown")},progressMouseMove:function(t){this.$emit("progressMouseMove",t)},progressMouseUp:function(){this.$emit("progressMouseUp")},progressInput:function(t){this.$emit("progressInput",t)},formatTime:function(t){let e="00:00";if(t>-1){let i=Math.floor(t/60),s=t%60;e=i<10?"0"+i+":":i+":",s<10&&(e+="0"),e+=s.toFixed(2)}return e&&(e=e.substring(0,e.length-3)),e},watchContainerSizeChange:function(){if(1===this.skinId)return;if(void 0===this.createTime||0===this.createTime)return;if(void 0===this.update||void 0===this.update.progressBar)return;const t=this.update.progressBar[0];if(this.createTime<t)return;const e=document.querySelector(`#item${this.item.id}`);e&&(this.observer=new ResizeObserver((t=>{const e=t[0],{width:i}=e.contentRect;i<=300&&i>=200?(this.isShowMiddleBar=!0,this.isShowSmallBar=!1):i<200?(this.isShowMiddleBar=!1,this.isShowSmallBar=!0):(this.isShowMiddleBar=!1,this.isShowSmallBar=!1)})),this.observer.observe(e))}}},r=(0,i(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"RectangleSkin audioControler skinId2",class:{single:1===t.musicSkin,multiple:2===t.musicSkin,"middle-bar":t.isShowMiddleBar,"small-bar":t.isShowSmallBar}},[3!==t.musicSkin?e("div",{staticClass:"audioControler-inner"},[e("div",{staticClass:"control-list"},[e("div",{staticClass:"replay-button",attrs:{title:t.$t("pluginMusicStyle2022_07_06.text2")},on:{click:t.replay}},[e("ReplayButtonSkin0",{attrs:{item:t.item}})],1),2===t.musicSkin?e("div",{staticClass:"prev-button",attrs:{title:t.$t("pluginMusicStyle_20230828.text1")},on:{click:function(e){return t.switchAudio(-1)}}},[e("PrevButtonSkin0",{attrs:{item:t.item}})],1):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.audioIsPlaying,expression:"!audioIsPlaying"}],staticClass:"play-button",attrs:{title:t.$t("pluginMusicStyle2022_07_06.text4")},on:{click:t.play}},[e("PlayButtonSkin0",{attrs:{item:t.item}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.audioIsPlaying,expression:"audioIsPlaying"}],staticClass:"pause-button",attrs:{title:t.$t("pluginMusicStyle2022_07_06.text5")},on:{click:t.pause}},[e("PauseButtonSkin0",{attrs:{item:t.item}})],1),2===t.musicSkin?e("div",{staticClass:"next-button",attrs:{title:t.$t("pluginMusicStyle_20230828.text2")},on:{click:function(e){return t.switchAudio(1)}}},[e("NextButtonSkin0",{attrs:{item:t.item}})],1):t._e(),e("div",{staticClass:"volume-setting",on:{mouseenter:function(e){t.isShowVolumeProgress=!0},mouseleave:function(e){t.isShowVolumeProgress=!1}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isMute,expression:"!isMute"}],staticClass:"mute-button",attrs:{title:t.$t("pluginMusicStyle2022_07_06.text3")},on:{click:t.muteOrRecover}},[e("MuteButtonSkin0",{attrs:{item:t.item}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isMute,expression:"isMute"}],staticClass:"unmute-button",attrs:{title:t.$t("pluginMusicStyle2022_07_06.text3")},on:{click:t.muteOrRecover}},[e("NotMuteButtonSkin0",{attrs:{item:t.item}})],1),e("transition",{attrs:{name:"volumeSlider"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowVolumeProgress,expression:"isShowVolumeProgress"}],staticClass:"slider-outer"},[e("div",{staticClass:"slider"},[e("span",[t._v(t._s(t.volume))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.volume,expression:"volume"}],style:t.volumeBackgroundStyle,attrs:{type:"range"},domProps:{value:t.volume},on:{change:t.changeVolume,__r:function(e){t.volume=e.target.value}}})])])])],1)]),e("div",{staticClass:"progress-bar"},[e("span",[t._v(t._s(t.getAudioCurrentTime))]),e("input",{style:t.progressRunwayBackgroundStyle,attrs:{type:"range"},domProps:{value:t.progress},on:{input:t.progressInput,mousedown:t.progressMouseDown,mousemove:t.progressMouseMove,mouseup:t.progressMouseUp}}),e("span",[t._v(t._s(t.audioDuration))])])]):t._e(),3===t.musicSkin?e("AudioQrcode",{attrs:{currentMusicSrc:t.currentMusicSrc,item:t.item}}):t._e()],1)}),[],!1,null,"f5383cf6",null).exports},22582:function(t,e,i){i.d(e,{b:function(){return s}});i(11721);function s(){return"#0099ff"}}}]);