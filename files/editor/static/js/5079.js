"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[5079],{55079:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var i=o(1585),n=o(74463),p=o(24118),s=o(18023),a=(o(76748),{name:"PopupVideo",components:{DeleteIcon:()=>Promise.resolve().then(o.bind(o,31680)),InfoTipsIcon:()=>o.e(3352).then(o.bind(o,83352))},mixins:[i.Z],data(){return{}},mounted(){},computed:{uploadData:function(){return new n.Yo({})},actionListIndex:function(){return this.$store.getters.actionListIndex},acceptVideoType:function(){return this.$store.getters.acceptVideoType},acceptVideoTypeStr:function(){return this.acceptVideoType.map((e=>`video/${e}`)).join(",")},iframeNotice:function(){let e="";return e=this.isYZPro?'<iframe src="https://books.mingbianji.com/download/yunzhanintro.mp4" frameborder=0 "allowfullscreen"></iframe>':"<iframe src='https://www.youtube.com/embed/sFxLq23m0RA' title='YouTube video player' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe>",e},linkNotice:function(){let e="";return e=this.isYZPro?"https://books.mingbianji.com/download/yunzhanintro.mp4":"https://static.flipbuilder.com/client/editor/assets/flipbook_solution.mp4",e},showSecVideoPanel:function(){return this.$store.getters.showSecVideoPanel},videoTypeOptions(){return[{value:0,label:"popupVideo.video_frame",isShow:!0},{value:1,label:"popupVideo.video_link",isShow:!0},{value:3,label:"YouTube",isShow:this.isFlipPro||this.isH5Pro},{value:4,label:"Vimeo",isShow:this.isFlipPro||this.isH5Pro},{value:2,label:"popupVideo.localVideo",isShow:this.isFlipPro},{value:2,label:"popupVideo.video_resource",isShow:this.showSecVideoPanel}]}},methods:{isHasPopupVideo:function(e,t=!1){return this.isHasAction&&!!Object.keys(this.actionList[e].popupVideo).length},storePopupVideoType(e,t){2!==e.popupVideo.videoType&&this.$store.commit(s.Xrs,!1),this.$store.commit(s.FSs,e.popupVideo.type),this.saveUpadte(),this.$nextTick((()=>{this.$refs[`inputRef${this.currentActionListItem.popupVideo.videoInfo.videoType}`]?.focus()})),this.$store.commit(s.N23,{canUndo:!0})},localVideoerror:function(e){},localVideosuccess:async function(e,t){if(-2===e.status)this.$message({type:"error",message:this.$t("videoEncodeFail.videoCodecError")});else{this.$store.commit(s.CjF);let o=e.filePath.replace("http:","https:");const i=this.currentSelectedItem.actionList[this.actionListIndex].popupVideo.videoInfo;i.name=t.name,i.localLink=o,i.videoName=p.Z.getPathFilename(o),i.isNewFile=!0,this.$store.commit(s.N23,{canUndo:!0})}},localVideobeforeUpload:function(e){return!!this.checkSuffix(e)||(this.$refs.uploadbutton.abort(e),!1)},checkSuffix:function(e){let t=p.Z.getPathFileSuffix(e.name);return!!this.acceptVideoType.includes(t)||(this.warningMsg&&this.warningMsg.close(),this.warningMsg=this.$message({showClose:!0,message:this.$i18n.t("Message_js.text7"),type:"warning",duration:3e3}),!1)},clearPopupLocalVideo(e){this.saveBeforePage(),e.popupVideo.videoInfo.name="",e.popupVideo.videoInfo.videoName="",e.popupVideo.videoInfo.localLink="",this.saveUndo()},toVideoPanel:function(){this.isYZPro&&this.$message({type:"info",message:"请点击左侧素材库添加视频",showClose:"true"}),this.$store.commit(s.za4,this.currentSelectedItem.actionList[this.actionListIndex].popupVideo),this.$store.commit(s.Xrs,!0),this.$store.commit(s.$8l,{menu:"video"}),this.$store.commit(s.xZf,{firstType:"video",secType:"upload"})}}}),l=(0,o(1001).Z)(a,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"PopupVideo group"},[t("div",{staticClass:"action-group item-group popupVideo"},[t("div",{staticClass:"video_type"},[t("p",{staticClass:"title"},[e._v(" "+e._s(e.$t("rightPanel.action_videoType"))+" "),t("el-tooltip",{attrs:{placement:"top","open-delay":800},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"size-tip"},[e._v(" 1."+e._s(e.$t("popupVideo.video_frame"))+": "+e._s(e.$t("popupVideo.example")+e.iframeNotice)+" ")]),t("div",{staticClass:"size-tip"},[e._v(" 2."+e._s(e.$t("popupVideo.video_link"))+": "+e._s(e.$t("popupVideo.linkTips"))+e._s(e.$t("popupVideo.example")+e.linkNotice)+" ")]),e.isYZPro?e._e():t("div",{staticClass:"size-tip"},[e._v(" 3.YouTube,Vimeo: "+e._s(e.$t("popupVideo.automatically"))+" ")])]},proxy:!0}])},[e.isH5Pro||e.isYZPro?t("el-icon",{staticStyle:{"font-size":"12px","margin-left":"3px"}},[t("InfoTipsIcon",{tag:"component"})],1):e._e()],1)],1),t("el-select",{attrs:{"data-v":"v2",placeholder:e.$t("popupVideo.Select"),"popper-class":"props-select-input-popper"},on:{change:function(t){return e.storePopupVideoType(e.currentActionListItem)}},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.videoType,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"videoType",t)},expression:"currentActionListItem.popupVideo.videoInfo.videoType"}},[e._l(e.videoTypeOptions,(function(o){return[o.isShow?t("el-option",{key:o.value,attrs:{value:o.value,label:e.$t(o.label)}}):e._e()]}))],2),t("div",{staticClass:"popupVideo-line"},[0===e.currentActionListItem.popupVideo.videoInfo.videoType?[t("el-input",{ref:"inputRef0",staticClass:"props_el-input-textarea",attrs:{placeholder:e.$t("popupVideo.videoEmbed"),type:"textarea",rows:"8",autocomplete:"off",spellcheck:"false",validateevent:"true"},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.generalCode,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"generalCode",t)},expression:"currentActionListItem.popupVideo.videoInfo.generalCode"}})]:e._e(),1===e.currentActionListItem.popupVideo.videoInfo.videoType?[t("el-input",{ref:"inputRef1",staticClass:"props_el-input-h34",attrs:{placeholder:e.$t("popupVideo.video_link")},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.link,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"link",t)},expression:"currentActionListItem.popupVideo.videoInfo.link"}})]:e._e(),3===e.currentActionListItem.popupVideo.videoInfo.videoType?[t("el-input",{ref:"inputRef3",staticClass:"props_el-input-h34",attrs:{placeholder:e.isFlipPro?"YouTube Video ID":"YouTube URL"},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.youTubeId,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"youTubeId",t)},expression:"currentActionListItem.popupVideo.videoInfo.youTubeId"}})]:e._e(),4===e.currentActionListItem.popupVideo.videoInfo.videoType?[t("el-input",{ref:"inputRef4",staticClass:"props_el-input-h34",attrs:{placeholder:e.isFlipPro?"Vimeo Video ID":"https://vimeo.com/XXXX"},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.vimeoId,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"vimeoId",t)},expression:"currentActionListItem.popupVideo.videoInfo.vimeoId"}})]:e._e(),2===e.currentActionListItem.popupVideo.videoInfo.videoType&&e.showSecVideoPanel?[t("el-row",{staticClass:"btn btn-white yzUpload-button",nativeOn:{click:function(t){return e.toVideoPanel.apply(null,arguments)}}},[t("div",{staticClass:"popupVideo-toVidepPanel-button"},[e._v(" "+e._s(e.$t("popupVideo.addVideoFromlibrary"))+" ")])]),e.currentActionListItem.popupVideo.videoInfo.videoName?t("el-row",{staticClass:"video-thumb"},[t("el-row",{staticClass:"video-list"},[t("p",{attrs:{title:e.currentActionListItem.popupVideo.videoInfo.name}},[e._v(" "+e._s(e.currentActionListItem.popupVideo.videoInfo.name)+" ")]),t("el-tooltip",{attrs:{content:e.$t("Properites_vue.text9"),placement:"top","open-delay":800}},[t("div",{staticClass:"delete-button",on:{click:function(t){return e.clearPopupLocalVideo(e.currentActionListItem)}}},[t("el-icon",[t("DeleteIcon",{tag:"component"})],1)],1)])],1)],1):e._e()]:e._e(),2===e.currentActionListItem.popupVideo.videoInfo.videoType&&e.isFlipPro?[t("el-row",[t("el-upload",{ref:"uploadbutton",staticClass:"popupVideo-toVidepPanel-button",attrs:{data:e.uploadData,action:e.uploadInterface,"show-file-list":!1,"on-error":e.localVideoerror,"on-success":e.localVideosuccess,"before-upload":e.localVideobeforeUpload,multiple:!1,accept:e.acceptVideoTypeStr,id:"flipVideoUpload"},nativeOn:{click:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()}}},[t("div",{staticClass:"editor_v2_white_btn"},[e._v(" "+e._s(e.$t("popupVideo.clickToImport"))+" ")])])],1),e.currentActionListItem.popupVideo.videoInfo.localLink?t("el-row",{staticClass:"video-thumb"},[t("el-row",{staticClass:"video-list"},[t("p",{attrs:{title:e.currentActionListItem.popupVideo.videoInfo.name}},[e._v(" "+e._s(e.currentActionListItem.popupVideo.videoInfo.name)+" ")]),t("el-tooltip",{attrs:{content:e.$t("Properites_vue.text9"),placement:"top","open-delay":800}},[t("div",{staticClass:"delete-button",on:{click:function(t){return e.clearPopupLocalVideo(e.currentActionListItem)}}},[t("el-icon",[t("DeleteIcon",{tag:"component"})],1)],1)])],1)],1):e._e()]:e._e()],2)],1),t("div",{staticClass:"border-top-line"}),t("div",{staticClass:"video_size"},[t("p",{staticClass:"title"},[e._v(" "+e._s(e.$t("rightPanel.action_videoSize"))+" "),t("span",[e._v(" (px)")])]),t("el-row",{staticClass:"size_box",attrs:{type:"flex",align:"middle"}},[t("el-input",{directives:[{name:"smart-select",rawName:"v-smart-select"}],staticClass:"props_el-input-h34",attrs:{type:"number"},on:{input:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.width,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"width",t)},expression:"currentActionListItem.popupVideo.videoInfo.width"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v(e._s(e.$t("popupVideo.videoWidth")))])]),t("el-input",{directives:[{name:"smart-select",rawName:"v-smart-select"}],staticClass:"props_el-input-h34",attrs:{type:"number"},on:{input:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.height,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"height",t)},expression:"currentActionListItem.popupVideo.videoInfo.height"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v(e._s(e.$t("popupVideo.videoHeight")))])])],1)],1),t("div",{staticClass:"border-top-line"}),t("div",{staticClass:"video_title"},[t("p",{staticClass:"title"},[e._v(" "+e._s(e.$t("popupVideo.titleBar"))+" ")]),t("el-row",[t("el-input",{staticClass:"props_el-input-h34",attrs:{placeholder:e.$t("popupVideo.titleInputPlaceHolder")},on:{input:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.title,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"title",t)},expression:"currentActionListItem.popupVideo.videoInfo.title"}})],1)],1),t("div",{staticClass:"border-top-line"}),t("div",{staticClass:"video_setting"}),0!==e.currentActionListItem.popupVideo.videoInfo.videoType?t("el-row",{staticClass:"play-set-checkbox"},[t("el-row",{staticClass:"popupVideo-checkbox"},[t("el-checkbox",{attrs:{"data-v":"v2"},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.mutePlay,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"mutePlay",t)},expression:"currentActionListItem.popupVideo.videoInfo.mutePlay"}},[t("el-tooltip",{attrs:{placement:"top","open-delay":800,content:e.$t("popupVideo_20250228.text1")}},[t("span",[e._v(e._s(e.$t("popupVideo_20250228.text1")))])])],1)],1),t("el-row",{staticClass:"popupVideo-checkbox"},[t("el-checkbox",{attrs:{"data-v":"v2"},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.isPauseBgSoundWhenPlay,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"isPauseBgSoundWhenPlay",t)},expression:"currentActionListItem.popupVideo.videoInfo.isPauseBgSoundWhenPlay"}},[t("el-tooltip",{attrs:{placement:"top","open-delay":800,content:e.$t("popupVideo_20250228.text2")}},[t("span",[e._v(e._s(e.$t("popupVideo_20250228.text2")))])])],1)],1),t("el-row",{staticClass:"popupVideo-checkbox"},[t("el-checkbox",{attrs:{"data-v":"v2"},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.isPauseOtherVideoWhenPlay,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"isPauseOtherVideoWhenPlay",t)},expression:"currentActionListItem.popupVideo.videoInfo.isPauseOtherVideoWhenPlay"}},[t("el-tooltip",{attrs:{placement:"top","open-delay":800,content:e.$t("popupVideo_20250228.text3")}},[t("span",[e._v(e._s(e.$t("popupVideo_20250228.text3")))])])],1)],1),t("el-row",{staticClass:"popupVideo-checkbox"},[t("el-checkbox",{attrs:{"data-v":"v2"},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.isAutoPlay,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"isAutoPlay",t)},expression:"currentActionListItem.popupVideo.videoInfo.isAutoPlay"}},[t("el-tooltip",{attrs:{placement:"top","open-delay":800,content:e.$t("popupVideo.autoPlay")}},[t("span",[e._v(e._s(e.$t("popupVideo.autoPlay")))])]),e.isYZPro?e._e():t("el-tooltip",{attrs:{placement:"top","open-delay":800},scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{staticClass:"size-tip"},[e._v(" "+e._s(e.$t("popupVideo.YouTubeManually"))+" ")])]},proxy:!0}],null,!1,775716088)},[t("el-icon",{staticStyle:{"font-size":"12px","margin-left":"3px"}},[t("InfoTipsIcon",{tag:"component"})],1)],1)],1)],1),t("el-row",{staticClass:"popupVideo-checkbox"},[t("el-checkbox",{attrs:{"data-v":"v2"},on:{change:e.saveUpadte},nativeOn:{mousedown:function(t){return e.saveBeforePage.apply(null,arguments)}},model:{value:e.currentActionListItem.popupVideo.videoInfo.isLoop,callback:function(t){e.$set(e.currentActionListItem.popupVideo.videoInfo,"isLoop",t)},expression:"currentActionListItem.popupVideo.videoInfo.isLoop"}},[t("el-tooltip",{attrs:{placement:"top","open-delay":800,content:e.$t("popupVideo.loop")}},[t("span",[e._v(e._s(e.$t("popupVideo.loop")))])])],1)],1)],1):e._e()],1)])}),[],!1,null,"490da030",null),c=l.exports}}]);