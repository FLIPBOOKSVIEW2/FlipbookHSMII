"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[6289],{16289:function(i,t,s){s.r(t),s.d(t,{default:function(){return h}});s(57658);var e=s(18023),a=s(26648),r=s(97873);class n{constructor(i,t,s,e){(0,r.Z)(this,"url",""),(0,r.Z)(this,"itemIndex",-1),(0,r.Z)(this,"pageIndex",-1),(0,r.Z)(this,"type",""),this.url=s.url,this.svgUrl=s.svgUrl,this.itemIndex=i,this.pageIndex=t,this.isPixabay=s.isPixabay,this.pixabayOriginUrl=s.pixabayOriginUrl,this.type=s.type||e,this.isPainted=s.isPainted,this.isQRCode=s.isQRCode,this.isUpload=s.isUpload,"svg"===this.type&&(this.isUpload?this.resource="本地上传":this.isQRCode?this.resource="二维码":this.isPainted?this.resource="画笔工具":this.resource="系统"),"image"!==this.type&&"frames"!==this.type||(this.isPixabay&&this.pixabayOriginUrl&&-1!==this.pixabayOriginUrl.indexOf("pixabay")||this.url&&-1!==this.url.indexOf("pixabay")?this.resource="Pixabay":this.isPixabay&&this.pixabayOriginUrl&&-1!==this.pixabayOriginUrl.indexOf("pexels")||this.url&&-1!==this.url.indexOf("pexels")?this.resource="Pexels":this.isUpload?this.resource="本地上传":this.resource="未知来源"),s.originalImage?.url&&"image"===this.type&&(this.url=s.originalImage.url),"swiper"===this.type&&(this.resource="轮播图-本地上传")}}var l={name:"ImageAudit",props:{},data(){return{}},computed:{pages(){return this.$store.state.pagePanel.pages},imageList(){const i=[];return Array.isArray(this.pages)&&this.pages.forEach(((t,s)=>{t.items.forEach(((t,e)=>{this.readImageItem(t,i,e,s)}))})),i}},methods:{readImageItem(i,t,s,e){if("group"===i.type&&i.items.forEach(((i,a)=>{this.readImageItem(i,t,s,e)})),"image"!==i.type||i.isSprite||i.isPhoneImg||!i.isUpload&&!i.isPixabay||t.push(new n(s,e,i)),"svg"===i.type&&(i.svgUrl||i.url)&&(i.isUpload||i.isPainted||i.isQRCode)&&t.push(new n(s,e,i)),"swiper"===i.type){i.swiperOpts.sliderFill.forEach((i=>{t.push(new n(s,e,i,"swiper"))})),void 0!==i.swiperOpts.parallaxBackgroundImage&&t.push(new n(s,e,i.swiperOpts.parallaxBackgroundImage,"swiper"))}if("frames"===i.type){i.imageList.forEach((a=>{(a.fileName||a.url||a.pixabayOriginUrl)&&t.push(new n(s,e,a,i.type))}))}},hideImageAudit(){this.$store.commit("TOGGLE_IMAGE_AUDIT",!1)},checkImage(i){window.open("","_blank").document.write(`\n        <html>\n          <head>\n          </head>\n          <body>\n            <img src="${i.url||i.svgUrl}" height="100%" width="100%" style="object-fit: contain">\n          </body>\n        </html>\n      `)},shotItem:function(i){let t=i.pageIndex,s=i.itemIndex;this.$store.commit(e.dmC,{index:t}),this.$nextTick((()=>{this.$store.commit(e.dmy,{index:s}),this.hideImageAudit()}))}},components:{ImageSkeletonVue:a.Z}},h=(0,s(1001).Z)(l,(function(){var i=this,t=i._self._c;return t("div",{staticClass:"image-audit-content",on:{wheel:function(i){i.stopPropagation()}}},[t("div",{staticClass:"closeBtn icon",on:{click:i.hideImageAudit}}),t("div",{staticClass:"image-audit-list"},i._l(i.imageList,(function(s,e){return t("div",{key:s.id+"_"+e,staticClass:"image-audit-list-item"},[t("div",{staticClass:"image-audit-list-item-img"},[t("div",{staticClass:"img-box"},[t("ImageSkeletonVue",{staticClass:"theme_image",attrs:{src:s.url||s.svgUrl,fit:"contain",lazy:!1}})],1)]),t("div",{staticClass:"img-btns"},[s.isQRCode||s.isQRCodeImg||s.isPainted?i._e():t("div",{staticClass:"editor_v2_white_btn",on:{click:function(t){return i.checkImage(s)}}},[i._v(" 查看图片 ")]),t("div",{staticClass:"editor_v2_white_btn",on:{click:function(t){return i.shotItem(s)}}},[i._v(" 定位图片 ")])]),t("div",{staticClass:"img-original"},[i._v(" 图片来源： "),t("div",{staticClass:"img-original-url"},[i._v(" "+i._s(s.resource)+" ")])])])})),0)])}),[],!1,null,"4c48b8ed",null).exports}}]);