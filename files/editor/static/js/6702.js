"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[6702],{25979:function(t,e,i){i.d(e,{Z:function(){return n}});var s=i(18023),r=(i(89951),i(41555),{name:"ImageToRriginRatio",components:{RestoreRatio:()=>Promise.resolve().then(i.bind(i,41555))},data(){return{}},props:{disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!0,desc:"是否显示按钮文案"}},computed:{isXZPro:function(){return this.$store.getters.isXZPro},isMulti:function(){return this.$store.getters.isMulti},multiItemsList:function(){return this.$store.getters.multiList},multiAllTypeList:function(){return this.$store.getters.multiAllTypeList},multiSettingCount(){return this.$store.getters.multiSettingCount},currentPageItems:function(){return this.$store.getters.currentPageItems},currentSelectedItem:function(){return this.$store.getters.currentSelectedItem},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},isQRCodeImg(){return!this.isMulti&&this.currentSelectedItem.isQRCodeImg}},methods:{changeRealImg(){this.disabled||(this.$store.commit(s.CjF),this.isMulti?(this.multiSettingCount.forEach((t=>{const e=this.currentPageItems[t];this.imageSizeItemToReal(e)})),this.$store.commit(s.gxB)):this.imageSizeItemToReal(this.currentSelectedItem),this.$store.commit(s.N23,{canUndo:!0}))},imageSizeItemToReal(t){if("image"===t.type||"svg"===t.type){const{isGifImage:e,isApng:i,isSprite:r,isBGI:n}=t,o=!(this.isXZPro&&e||i||r||n);let c;if(o&&"image"===t.type){const{originalWidth:e,originalHeight:i}=t;c=i*parseFloat(t.style.width)/e,(c!==parseFloat(t.style.height)||t.cropInfor.isCropped)&&(this.$store.commit(s.veJ,{item:t,height:c}),this.$store.commit(s.mfC,{item:t}),this.$store.commit(s.z4T,{item:t,value:"stretch",toReal:!0}))}else if(o&&"svg"===t.type){const{originalPathWidth:e,originalPathHeight:i,style:r}=t,n=parseFloat(e/i);c=parseFloat(r.width)/n,this.$store.commit(s.veJ,{item:t,height:c}),this.$store.commit(s.Lw7,{item:t})}}}}}),n=(0,i(1001).Z)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor_v2_white_btn ratio",class:{disabled:t.disabled},on:{click:t.changeRealImg}},[e("el-icon",[e("RestoreRatio")],1),t._v(" "+t._s(t.showText?t.$t("PropsForImage_vue.text1-1"):"")+" ")],1)}),[],!1,null,"d07d2dee",null).exports},87874:function(t,e,i){i.d(e,{Z:function(){return n}});var s=i(18023),r=(i(89951),{name:"ImageToOriginSize",components:{RestoreSize:()=>i.e(9552).then(i.bind(i,99552))},data(){return{}},props:{disabled:{type:Boolean,default:!1},showText:{type:Boolean,default:!0,desc:"是否显示按钮文案"}},computed:{isXZPro:function(){return this.$store.getters.isXZPro},isMulti:function(){return this.$store.getters.isMulti},multiItemsList:function(){return this.$store.getters.multiList},multiSettingCount(){return this.$store.getters.multiSettingCount},currentPageItems:function(){return this.$store.getters.currentPageItems},currentSelectedItem:function(){return this.$store.getters.currentSelectedItem}},methods:{changeImgOriginalSize(){this.disabled||(this.$store.commit(s.CjF),this.isMulti?(this.multiSettingCount.forEach((t=>{const e=this.currentPageItems[t];this.imageSizeItemToReal(e)})),this.$store.commit(s.gxB)):this.imageSizeItemToReal(this.currentSelectedItem),this.$store.commit(s.N23,{canUndo:!0}))},imageSizeItemToReal(t){if("image"===t.type){const{isGifImage:e,isApng:i,isSprite:r,isBGI:n}=t;if(!(this.isXZPro&&e||i||r||n)){const{originalPathWidth:e,originalPathHeight:i}=t;parseFloat(t.style.width);this.$store.commit(s.veJ,{item:t,width:e,height:i}),this.$store.commit(s.mfC,{item:t}),this.$store.commit(s.z4T,{item:t,value:"stretch",toReal:!0})}}else"svg"===t.type&&(this.$store.commit(s.Lw7,{item:t}),this.$store.commit(s.toY,{item:t,width:t.originalPathWidth,height:t.originalPathHeight}))}}}),n=(0,i(1001).Z)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor_v2_white_btn size",class:{disabled:t.disabled},on:{click:t.changeImgOriginalSize}},[e("el-icon",[e("RestoreSize")],1),t._v(" "+t._s(t.showText?t.$t("PropsForImage_vue.text10"):"")+" ")],1)}),[],!1,null,"4d06a927",null).exports},2759:function(t,e,i){i.d(e,{Z:function(){return o}});var s=i(18023),r=i(66546),n={name:"",props:{isShowFavorite:{type:Boolean,default:!0}},data(){return{msg:null}},computed:{pathAnime:function(){return this.$store.state.timeline.pathAnime},pathItemSelectedIndex:function(){return this.pathAnime.pathItemSelectedIndex},currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},currentSelectedItem:function(){return-1!==this.currentSelectedGroupItemIndex?this.$store.getters.currentPageItems[this.currentSelectedItemIndex]:this.item},item:function(){return-1!==this.pathItemSelectedIndex?this.$store.getters.currentSelectedPathItem:this.$store.getters.currentSelectedItem},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},currentPageItems:{get:function(){return this.$store.getters.currentPageItems},set:function(t){this.$store.getters.currentPageItems=t}}},mounted(){this.getFavorite()},methods:{searchBeLike:function(){this.$store.commit(s.$8l,{menu:"material"}),this.$store.commit(s.xZf,{firstType:"material",secType:"resource"}),setTimeout((()=>{r.Q.$emit(r.Y.SEARCH_SIMILARITY,this.item.name)}),500)},getFavorite:function(){if(-1!==this.currentSelectedItemIndex&&this.currentPageItems[this.currentSelectedItemIndex].resourceId){let t={id:this.currentPageItems[this.currentSelectedItemIndex].resourceId};this.$http.post(`${this.$store.getters.host}/interface/resource/getResourceFavoriteStatus.php`,t).then((t=>{t.data.status+""=="1"&&this.$set(this.currentPageItems[this.currentSelectedItemIndex],"isFavorite",t.data.data.isFavorite+"")})).catch((t=>{}))}},collection:function(){const t=this.getParams();this.$http.post(`${this.$store.getters.host}/interface/resource/favoriteResource.php`,t).then((t=>{let e=t.data;1===parseInt(e.status)?(this.msg&&this.msg.close(),this.currentSelectedItem.resourceId=e.resourceId,this.currentSelectedItem.isFavorite="0"===this.currentSelectedItem.isFavorite?"1":"0",this.msg=this.$message({dangerouslyUseHTMLString:!0,showClose:!0,message:"1"===this.item.isFavorite?"素材收藏成功，可到<span style='cursor:pointer;text-decoration: underline;'>【素材库-收藏素材】</span>中查看！":"取消收藏成功！",type:"success",duration:5e3}),"1"===this.item.isFavorite&&(this.msg.$el.querySelector("span").onclick=()=>{this.$store.commit(s.$8l,{menu:"material"}),this.$store.commit(s.xZf,{firstType:"material",secType:"like"})})):2===parseInt(e.status)?this.$message.error("该素材已存在我的收藏中！"):this.$message.error(e.msg)}))},getParams(){let t;switch(this.item.type){case"image":t=this.item.url;break;case"effect":case"frames":t=this.item.jsonUrl;break;case"svg":t=this.item.svgUrl}const e={png:[7,8],apng:[7,8],jpg:[1,20],jpeg:[1,20],gif:[1,20],svg:[4,101],json:[13,117]};let i,s,r=this.item.fileName.split("."),n=r.length>0?r[r.length-1].toLowerCase():"";return e[n]&&([i,s]=e[n]),Object.assign({},{url:t,width:parseFloat(this.item.style.width),height:parseFloat(this.item.style.height),action:"0"===this.item.isFavorite?"1":"0",firstId:this.item.firstId?this.item.firstId:i,secondId:this.item.secondId?this.item.secondId:s,isCommercial:this.item.isCommercial,fileType:this.item.type},this.item.range?{rangeCode:this.item.range}:{})}},components:{ResembleIcon:()=>i.e(888).then(i.bind(i,70888)),FavoriteIcon:()=>i.e(7432).then(i.bind(i,47432)),FavoriteNotIcon:()=>i.e(4830).then(i.bind(i,44830))}},o=(0,i(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"favorite_box",attrs:{type:"flex",align:"middle"}},[e("div",{staticClass:"editor_v2_white_btn",attrs:{title:"Ctrl+F：搜索相似，Ctrl+B：精准搜索"},on:{click:t.searchBeLike}},[e("el-icon",{attrs:{size:16}},[e("ResembleIcon",{tag:"component"})],1),t._v(" 搜索相似 ")],1),t.isShowFavorite?[e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.isFavorite+""=="0"&&!t.item.isSprite,expression:"item.isFavorite + '' === '0' && !item.isSprite"}],staticClass:"editor_v2_white_btn",on:{click:t.collection}},[e("el-icon",{attrs:{size:16}},[e("FavoriteIcon",{tag:"component"})],1),t._v(" 收藏 ")],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.isFavorite+""=="1",expression:"item.isFavorite + '' === '1'"}],staticClass:"editor_v2_white_btn",on:{click:t.collection}},[e("el-icon",{attrs:{size:16}},[e("FavoriteNotIcon",{tag:"component"})],1),t._v(" 取消收藏 ")],1)]:t._e()],2)}),[],!1,null,"30602f7d",null).exports},94101:function(t,e,i){i.d(e,{Z:function(){return c}});var s=i(18023),r=i(76748),n={name:"ResourceReplace",props:{text:{type:String,default:r.ag.t("propsForEffect.changeMaterial")}},data(){return{}},computed:{currentSelectedItem:function(){return this.$store.getters.currentSelectedItem}},methods:{intoReplaceMode(){if(this.currentSelectedItem.isAsyncItem)return this.$message.warning(this.$t("asyncItem_20240318.text4"));this.$store.commit(s.Ewg,{isPreview:!1}),this.$store.commit(s.eKS,{isShow:!0})}},components:{ReplaceIcon:()=>i.e(4210).then(i.bind(i,74210))}},o=(0,i(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.intoReplaceMode.apply(null,arguments)}}},[e("el-icon",{staticStyle:{"margin-right":"5px"},attrs:{size:14}},[e("ReplaceIcon")],1),t._v(" "+t._s(t.text)+" ")],1)}),[],!1,null,"cc0535a6",null),c=o.exports},41555:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var s=(0,i(1001).Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"}},[t("path",{attrs:{d:"M1 3V2C1 1.44772 1.44772 1 2 1H3",stroke:"#333333","stroke-width":"2","stroke-linecap":"round"}}),t("path",{attrs:{d:"M15 3V2C15 1.44772 14.5523 1 14 1H13",stroke:"#333333","stroke-width":"2","stroke-linecap":"round"}}),t("path",{attrs:{d:"M15 13V14C15 14.5523 14.5523 15 14 15H13",stroke:"#333333","stroke-width":"2","stroke-linecap":"round"}}),t("path",{attrs:{d:"M1 11C1 10.4477 1.44772 10 2 10H9C9.55228 10 10 10.4477 10 11V14C10 14.5523 9.55228 15 9 15H2C1.44772 15 1 14.5523 1 14V11Z",stroke:"#333333","stroke-width":"2"}}),t("rect",{attrs:{x:"6",width:"4",height:"2",rx:"1",fill:"#333333"}}),t("rect",{attrs:{x:"14",y:"6",width:"2",height:"4",rx:"1",fill:"#333333"}}),t("path",{attrs:{d:"M0 7C0 6.44772 0.447715 6 1 6C1.55228 6 2 6.44772 2 7C2 7.55228 1.55228 8 1 8C0.447715 8 0 7.55228 0 7Z",fill:"#333333"}})])}),[],!1,null,null,null).exports},77170:function(t,e,i){i.d(e,{u:function(){return s}});const s={computed:{currentPageItems:{get:function(){return this.$store.getters.currentPageItems},set:function(t){this.$store.getters.currentPageItems=t}},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},item:function(){return-1!==this.pathItemSelectedIndex?this.$store.getters.currentSelectedPathItem:this.$store.getters.currentSelectedItem},currentSelectedItem:function(){return-1!==this.currentSelectedGroupItemIndex?this.$store.getters.currentPageItems[this.currentSelectedItemIndex]:this.item},pathAnime:function(){return this.$store.state.timeline.pathAnime},pathItemSelectedIndex:function(){return this.pathAnime.pathItemSelectedIndex},currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},isXZPro:function(){return this.$store.getters.isXZPro},isShowFavorite(){return!!this.isXZPro&&(-1!==this.currentSelectedItemIndex&&(!this.item.isVisualChina&&(this.item.hasOwnProperty("resourceId")?!this.item.userMateral:(this.$set(this.currentPageItems[this.currentSelectedItemIndex],"isFavorite","0"),!0))))}}}}}]);