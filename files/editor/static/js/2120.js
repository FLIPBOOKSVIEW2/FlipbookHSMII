"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[2120,7713],{85789:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var i=n(18023),o=n(56872),s=n(9875),m=n(14963),l={name:"commentOverview",props:["commentTempOpts"],data(){return{translateYDistance:0,resizeObserver:null,startPoint:{x:0,y:0},transitionPoint:{x:0,y:0},endPoint:{x:0,y:0}}},mounted(){this.transFormContent(20),this.resizeObserver=new ResizeObserver((t=>{this.transFormContent()})),setTimeout((()=>{this.resizeObserver.observe(this.$refs.contentBox)}),500)},beforeDestroy(){this.resizeObserver.disconnect(),this.resizeObserver=null},watch:{"commentTempOpts.windowWP.winP":function(){this.commentTempOpts.lineOpts.isAddLine&&this.getLine(),this.transFormContent()},"commentTempOpts.lineOpts.isAddLine":{handler:function(t){t&&this.getLine()},immediate:!0}},computed:{contentBoxStyle:function(){const t={width:this.commentTempOpts.windowWP.maxW+"px",transform:`translateY(${this.translateYDistance}px)`},e="calc(100% + 15px)";switch(this.commentTempOpts.windowWP.winP){case"Top Right":t.bottom=e,t.left=e,t.textAlign="left";break;case"Bottom Right":t.top=e,t.left=e,t.textAlign="left";break;case"Top Left":t.bottom=e,t.right=e,t.textAlign="right";break;case"Bottom Left":t.top=e,t.right=e,t.textAlign="right";break;case"Top":t.bottom=e,t.left="50%",t.transform="translateX(-50%)",t.textAlign="center";break;case"Left":t.top="50%",t.right=e,t.transform="translateY(-50%)",t.textAlign="right";break;case"Bottom":t.top=e,t.left="50%",t.transform="translateX(-50%)",t.textAlign="center";break;case"Right":t.top="50%",t.left=e,t.transform="translateY(-50%)",t.textAlign="left"}return t},contentStyle:function(){const t={maxWidth:this.commentTempOpts.windowWP.maxW+"px",background:this.commentTempOpts.contentProps.bgColor,textAlign:this.commentTempOpts.contentProps.textAlign,fontSize:this.commentTempOpts.contentProps.fontSize+"px",color:this.commentTempOpts.contentProps.fontColor,fontFamily:this.commentTempOpts.contentProps.fontFamily,lineHeight:this.commentTempOpts.contentProps.lineHeight,letterSpacing:this.commentTempOpts.contentProps.letterSpacing+"px"};return~this.commentTempOpts.contentProps.elements.indexOf("bold")&&(t.fontWeight="bold"),~this.commentTempOpts.contentProps.elements.indexOf("italic")&&(t.fontStyle="italic"),~this.commentTempOpts.contentProps.elements.indexOf("underline")&&(t.textDecoration="underline"),t},points:function(){return`${this.startPoint.x},${this.startPoint.y} ${this.transitionPoint.x},${this.transitionPoint.y} ${this.endPoint.x},${this.endPoint.y}`},svgLine:function(){let t;switch(this.commentTempOpts.lineOpts.lineType){case"solid":t="none";break;case"dotted":t="1,1";break;default:t="3,4"}return t}},methods:{transFormContent:function(t=0){const e=this.$refs.defaultImg.getBoundingClientRect(),n=this.$refs.contentBox.offsetHeight+15-e.top-t;["Top Right","Top Left"].includes(this.commentTempOpts.windowWP.winP)?this.translateYDistance=n>0?n:0:["Bottom Right","Bottom Left"].includes(this.commentTempOpts.windowWP.winP)&&(this.translateYDistance=n>0?-n:0)},getLine:function(){const t={"Top Right":{startPoint:{x:200,y:76},endPoint:{x:249,y:41.5},transitionPoint:{x:229,y:41.5}},"Bottom Right":{startPoint:{x:200,y:124},endPoint:{x:249,y:158.5},transitionPoint:{x:229,y:158.5}},"Top Left":{startPoint:{x:200,y:76},endPoint:{x:151,y:41.5},transitionPoint:{x:171,y:41.5}},"Bottom Left":{startPoint:{x:200,y:124},endPoint:{x:151,y:158.5},transitionPoint:{x:171,y:158.5}},Top:{startPoint:{x:200,y:76},endPoint:{x:200,y:61},transitionPoint:{x:200,y:61}},Left:{startPoint:{x:166,y:100},endPoint:{x:151,y:100},transitionPoint:{x:151,y:100}},Bottom:{startPoint:{x:200,y:124},endPoint:{x:200,y:139},transitionPoint:{x:200,y:139}},Right:{startPoint:{x:234,y:100},endPoint:{x:249,y:100},transitionPoint:{x:249,y:100}}},{startPoint:e,endPoint:n,transitionPoint:i}=t[this.commentTempOpts.windowWP.winP];this.startPoint=e,this.endPoint=n,this.transitionPoint=i}}},r=n(1001),c=(0,r.Z)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"commentOverview"},[e("div",{ref:"defaultImg",staticClass:"defaultImg"},[e("svg",{attrs:{width:"68",height:"48",viewBox:"0 0 68 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M1.52246 42.5808V5.41921C1.52246 3.24268 3.3401 1.47803 5.58197 1.47803H62.4181C64.66 1.47803 66.4776 3.24268 66.4776 5.41921V42.5808C66.4776 44.7573 64.66 46.522 62.4181 46.522H5.58197C3.3401 46.522 1.52246 44.7573 1.52246 42.5808Z",fill:"#F2F3F5"}}),e("path",{attrs:{d:"M66.4764 42.5815V40.0123L50.1078 24.1208C48.2963 22.3621 45.3585 22.3621 43.5461 24.1208L20.4717 46.5227H62.4169C64.6588 46.5227 66.4764 44.758 66.4764 42.5815Z",fill:"#C9CDD4"}}),e("path",{attrs:{d:"M5.58197 46.5215H54.2877L26.0138 19.1167C24.2023 17.3572 21.2645 17.3572 19.4521 19.1167L1.52246 36.4155V42.5803C1.52246 44.7569 3.3401 46.5215 5.58197 46.5215Z",fill:"#D4D7DE"}}),e("path",{attrs:{d:"M43.9307 10.8951C43.9307 12.0897 44.4195 13.2353 45.2895 14.08C46.1595 14.9247 47.3396 15.3992 48.57 15.3992C49.8004 15.3992 50.9805 14.9247 51.8505 14.08C52.7205 13.2353 53.2093 12.0897 53.2093 10.8951C53.2093 9.70053 52.7205 8.55489 51.8505 7.71021C50.9805 6.86553 49.8004 6.39099 48.57 6.39099C47.3396 6.39099 46.1595 6.86553 45.2895 7.71021C44.4195 8.55489 43.9307 9.70053 43.9307 10.8951Z",fill:"#D4D7DE"}}),e("path",{attrs:{d:"M62.4181 48H5.58192C2.50371 48 0 45.5685 0 42.5808V5.41921C0 2.43073 2.50446 0 5.58192 0H62.4181C65.4963 0 68 2.43146 68 5.41921V42.5808C68 45.5693 65.4955 48 62.4181 48ZM5.58192 2.95607C4.18321 2.95607 3.04482 4.06128 3.04482 5.41921V42.5808C3.04482 43.9387 4.18321 45.0439 5.58192 45.0439H62.4181C63.8168 45.0439 64.9552 43.9387 64.9552 42.5808V5.41921C64.9552 4.06128 63.8168 2.95607 62.4181 2.95607H5.58192Z",fill:"#F2F3F5"}})]),e("div",{ref:"contentBox",staticClass:"contentBox",style:t.contentBoxStyle},[e("span",{ref:"content",staticClass:"content",style:t.contentStyle,domProps:{innerHTML:t._s(t.commentTempOpts.contentProps.content?t.commentTempOpts.contentProps.content:t.$t("comment.commentText"))}})])]),t.commentTempOpts.lineOpts.isAddLine?e("svg",{ref:"lineSvg",staticClass:"line-svg",attrs:{xmlns:"http://www.w3.org/2000/svg"}},[e("polyline",{attrs:{fill:"none",stroke:t.commentTempOpts.lineOpts.lineColor,points:t.points,"stroke-dasharray":t.svgLine}})]):t._e()])}),[],!1,null,"235939c0",null).exports,a=n(25986),p=n(1585),d=n(24118),h=n(3601),u={name:"commentEditor",mixins:[p.Z],data(){return{isShowCloseTip:!1,status:!0,positionOptions:[{label:this.$t("comment.top"),value:"Top"},{label:this.$t("comment.left"),value:"Left"},{label:this.$t("comment.bottom"),value:"Bottom"},{label:this.$t("comment.right"),value:"Right"},{label:this.$t("comment.topRight"),value:"Top Right"},{label:this.$t("comment.topLeft"),value:"Top Left"},{label:this.$t("comment.bottomLeft"),value:"Bottom Left"},{label:this.$t("comment.bottomRight"),value:"Bottom Right"}],lineTypeOptions:[{label:this.$t("comment.solid"),value:"solid"},{label:this.$t("comment.dashed"),value:"dashed"},{label:this.$t("comment.dotted"),value:"dotted"}],isEditored:!1}},computed:{isShowCommentEditor:{get:function(){return this.$store.state.rightPanel.isShowCommentEditor},set:function(t){this.$store.state.rightPanel.isShowCommentEditor=t}},commentTempOpts:{get:function(){return this.$store.state.rightPanel.commentTempOpts},set:function(t){this.$store.state.rightPanel.commentTempOpts=t}},curActionListIndex:{get:function(){return this.$store.state.rightPanel.curActionListIndex},set:function(t){this.$store.state.rightPanel.curActionListIndex=t}}},methods:{setLineColor:function(t){this.commentTempOpts.lineOpts.lineColor=t.value,this.isEditored=!0},clickClose:function(){this.isEditored?this.isShowCloseTip=!0:this.closePanel()},closePanel:function(){this.status=!1,setTimeout((()=>{this.isShowCommentEditor=!1,this.commentTempOpts={}}),190)},clickConfirm:function(){this.commentTempOpts.edited=!0,this.commentTempOpts.commentWidth=this.$refs.commentOverview.$refs.content.offsetWidth,this.commentTempOpts.commentHeight=this.$refs.commentOverview.$refs.content.offsetHeight,this.actionList[this.curActionListIndex].comment=d.Z.copy(this.commentTempOpts,!0),this.commentTempOpts={},this.$store.commit(i.nFE,{unSavedStatus:!0,isUpdatePage:!0}),this.isShowCommentEditor=!1,this.saveUndo()},blurInput:function(){/^[1-9]\d*$/.test(String(this.commentTempOpts.windowWP.maxW))||(this.commentTempOpts.windowWP.maxW=375)}},mounted(){(0,h.AZ)(),(0,h.mA)()},beforeDestroy(){(0,h.fk)(),(0,h.wS)()},components:{TextEditor:o.Z,AddBtn:m.Z,AddImage:s.Z,CommentOverview:c,Lightbox:a.default,PropsInput:()=>n.e(9706).then(n.bind(n,49706)),PropsSelect:()=>n.e(1871).then(n.bind(n,61871)),PropsSwitch:()=>Promise.resolve().then(n.bind(n,69361)),PropsColor:()=>n.e(4124).then(n.bind(n,14124)),CloseBtnIcon:()=>Promise.resolve().then(n.bind(n,9585))}},f=(0,r.Z)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"t-popupMsgEditor"},[e("div",{staticClass:"t-bg",class:this.status?"show-bg":"hide-bg"}),e("div",{staticClass:"out-block",class:this.status?"show-window":"close-window"},[e("CommentOverview",{ref:"commentOverview",attrs:{commentTempOpts:t.commentTempOpts}})],1),e("div",{staticClass:"right-editor-block",class:this.status?"show-right-block":"hide-right-block"},[e("div",{staticClass:"top-title"},[t._v(t._s(t.$t("comment.editComment")))]),e("div",{staticClass:"close-btn",on:{click:t.clickClose}},[e("el-icon",[e("CloseBtnIcon",{tag:"component"})],1)],1),e("div",{staticClass:"content-list"},[e("div",{staticClass:"content scrollbar-container"},[e("div",{staticClass:"inside"},[e("TextEditor",{attrs:{title:t.$t("comment.commentTitle"),placeholder:t.$t("comment.commentPlaceholder"),textProps:t.commentTempOpts.contentProps},model:{value:t.isEditored,callback:function(e){t.isEditored=e},expression:"isEditored"}}),e("div",{staticClass:"window-frame"},[e("div",{staticClass:"input-col"},[e("PropsInput",{attrs:{title:t.$t("comment.windowMaxWidth"),settingValue:t.commentTempOpts.windowWP.maxW,prefix:"px",justify:"flex-start",change:t.isEditored=!0},on:{"update:settingValue":function(e){return t.$set(t.commentTempOpts.windowWP,"maxW",e)},"update:setting-value":function(e){return t.$set(t.commentTempOpts.windowWP,"maxW",e)},blur:t.blurInput}})],1),e("div",{staticClass:"input-col"},[e("PropsSelect",{attrs:{title:t.$t("comment.windowPosition"),value:t.commentTempOpts.windowWP.winP,justify:"flex-start",options:t.positionOptions},on:{"update:value":function(e){return t.$set(t.commentTempOpts.windowWP,"winP",e)},change:function(e){t.isEditored=!0}}})],1)]),e("div",{staticClass:"border-top-line"}),e("div",{staticClass:"t-addBtn"},[e("div",{staticClass:"sec-title"},[e("PropsSwitch",{attrs:{title:t.$t("comment.leaderLine"),value:t.commentTempOpts.lineOpts.isAddLine,isBold:!0},on:{"update:value":function(e){return t.$set(t.commentTempOpts.lineOpts,"isAddLine",e)},change:function(e){t.isEditored=!0}}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.commentTempOpts.lineOpts.isAddLine,expression:"commentTempOpts.lineOpts.isAddLine"}],staticClass:"line-frame"},[e("div",{staticClass:"row-col"},[e("PropsSelect",{attrs:{title:t.$t("comment.lineType"),value:t.commentTempOpts.lineOpts.lineType,options:t.lineTypeOptions},on:{change:function(e){t.isEditored=!0},"update:value":function(e){return t.$set(t.commentTempOpts.lineOpts,"lineType",e)}}})],1),e("div",{staticClass:"row-col"},[e("PropsColor",{attrs:{title:t.$t("comment.lineColor"),color:t.commentTempOpts.lineOpts.lineColor,changeCallback:t.setLineColor}})],1)])]),e("div",{staticClass:"border-top-line"})],1)])]),e("div",{staticClass:"bottom-two-btn"},[e("el-row",{staticClass:"btn btn-white close",attrs:{type:"flex",align:"middle",justify:"center"},nativeOn:{click:function(e){return t.clickClose.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("comment.closeBtn"))+" ")]),e("el-row",{staticClass:"btn btn-green confirm",attrs:{type:"flex",align:"middle",justify:"center"},nativeOn:{click:function(e){return t.clickConfirm.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("comment.confirmBtn"))+" ")])],1)]),t.isShowCloseTip?e("Lightbox",{attrs:{isShow:t.isShowCloseTip,modalType:"Confirm",isAutoWidth:!0,showConfirm:!0,isConfirm:!0,confirmCallBack:t.clickConfirm,closeCallBack:t.closePanel,title:t.$t("lightBox10_12.tips")},on:{"update:isShow":function(e){t.isShowCloseTip=e},"update:is-show":function(e){t.isShowCloseTip=e}}},[e("div",{staticClass:"alert-content"},[t._v(" "+t._s(t.$t("comment.closePanelTip"))+" ")])]):t._e()],1)}),[],!1,null,"b6396e8a",null),w=f.exports}}]);