"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[8979],{37052:function(i,o,n){n.d(o,{qP:function(){return f},fK:function(){return h},_R:function(){return b},Z1:function(){return g},lz:function(){return w},WM:function(){return y},iJ:function(){return $},d5:function(){return T}});n(57658);var e=n(68939),c=n(76748),t=n(83093),r=n(24118),a=n(95944),s=n(11721),l=n(13638),d=n(18023),p=n(89951);let m=[];m=[];var u=n(64414);n(36208);function f(i,o){(0,a.$P)({permissionType:"button"})||(0,a.DB)({permissionType:"button"}),i.buttonText=c.ag.t(`buttonMult.text${i.index?i.index+1:o+1}`),i.isAutoPlay=!0,(0,t.j)({item:i})}function h(i,o){(0,a.$P)({permissionType:"fontIcon"})||(0,a.DB)({permissionType:"fontIcon"});const n={type:"fontIcon",fontIcon:i.icon};(0,t.j)({item:n})}function g(i){const o=(0,a.E0)({resourceRange:i.range});i.buttonText=c.ag.t(i.buttonText),o||(0,a.DB)({permissionType:"phone",resourceRange:i.range}),(0,t.j)({item:i})}function w(i){if(i.type&&!s.Z.getters.isFlipPro){const o=(0,a.$P)({permissionType:i.type}),n=(0,a.E0)({resourceRange:i.range});if(!o||!n){let e=0;if(!o){const i=(0,l.gu)({type:"effect"});e<i&&(e=i)}if(!n){const o=(0,l.gu)({type:"resource",resRange:i.range});e<o&&(e=o)}const c=(0,a.KU)({permissionType:"hotspot",minLevelId:e});(0,a.DB)({permissionType:i.type,msgText:c})}}i.style={width:"100px",height:"100px"},i.name=c.ag.t("hotSpot.hotSpot"),i.isHotSpotEffect=!0,i.isAutoPlay=!0,(0,t.j)({item:i})}function y(i){(0,a.fI)({swiperType:i.swiperType,uType:s.Z.state.userData.uType})||(0,a.DB)({permissionType:"swiper",swiperType:i.swiperType}),i.type="swiper",delete i.thumbImg,(0,t.j)({item:i})}function b(i,o){if(s.Z.state.workSpace.isDraggingToAdd)return;if(i.isLoadError)return void(0,a.PV)({msgType:"warning",msgText:c.ag.t("tipsMsg.LoadingFailedTips")});let n="component"===o;if(i.type){const o=(0,a.$P)({permissionType:i.type}),e=(0,a.E0)({resourceRange:i.range});o&&e||(0,a.DB)({permissionType:i.type,resourceRange:i.range}),(0,t.j)({item:i,isComponent:n})}}function $(i){(0,t.j)({item:i})}let k=null;async function T(i,o){if(s.Z.state.pagePanel.isVisitorMode)return void s.Z.commit(d.Gvu,!0);(0,a.Hj)({sprite:{id:i.characterId}})||(0,a.DB)({permissionType:"sprite",spriteId:i.characterId});let n={image:[],fileName:[],grids:[],jsonUrl:[],duration:0,styleFix:""},e=i.characterId;try{await Promise.all([x({type:"small",dataIndex:0,secondCateGif:i,characterData:n}),x({type:"normal",dataIndex:1,secondCateGif:i,characterData:n}),x({type:"large",dataIndex:2,secondCateGif:i,characterData:n})]),m[e-1]&&m[e-1][0].express.forEach((o=>{i.id===o.expressionId&&(n.styleFix=o.style)}));const o=function(i,o){const n=s.Z.state.timeline.characterPanel.dragBoxTitle;let e=i.characterId;o=r.Z.copy(o,!0);let t=r.Z.deepAssign({},{isNewFile:!0,name:c.ag.t(i.name),characterId:e,expressionId:i.id,hasLoadedNormal:!1,isLoop:!0,isHorizonFlip:!1,animations:{delay:s.Z.getters.timelinePanelIsHiden?1:s.Z.getters.currentSliderTime+1,duration:o.duration},styleFix:o.styleFix},o),a=""+(`${s.Z.getters.resourceHost}/resourceFiles/editor/characters/`+e+"/"+i.id+".gif");if(s.Z.state.timeline.characterPanel.isClickAddToGif||s.Z.state.timeline.characterPanel.isChangeGif){return r.Z.deepAssign({},{itemName:n},t)}{let i=o.grids[1].frames[0].sourceSize,r=i.w/i.h;s.Z.commit(d.CiL,.7),s.Z.commit("ADD_ITEM",{isPreviewSprite:!0,item:new p.vE({isSprite:!0,url:a,updateGifItemIndex:0,name:c.ag.t(n),imageWidth:512,style:I(r,e),gifs:[t],config:{time:0,duration:0,grids:[],url:[],imageUrl:"",characterId:0,expressionId:0}})}),s.Z.state.timeline.characterPanel.isChangeGif=!0,s.Z.state.timeline.characterPanel.isClickAddToGif=!1}}(i,n);s.Z.commit(d.vR0,{isShow:!1});let t=`${e}-${s.Z.state.timeline.characterPanel.dragBoxTitle}-${i.id}-${i.name}`;return window._hmt.push(["_trackEvent","characterAction","clcik",t]),o}catch(i){k&&k.close(),k=(0,u.Message)({duration:5e3,showClose:!0,message:c.ag.t("CharacterPanel_vue.text26"),type:"warning"})}}async function x({type:i,dataIndex:o,secondCateGif:n,characterData:c}){const t=s.Z.getters.spriteCharacterRootPath;let a=n.characterId,l=`${t}${i}/${a}/${a}.json`;a>=120&&(l=`${t}${i}/${a}/${i}/${a}/${a}.json`);let d=await e.Z.get(l).then((i=>{if(a>=120){const o=i.data;for(let i=0;i<o.length;i++)if(parseInt(n.id)===parseInt(o[i].actionId))return o[i]}return i.data[n.id]})),p=`${t}${i}/${a}/sprites/${n.id}/${d.png}`;a>=120&&(p=`${t}${i}/${a}/${i}/${a}/sprites/${n.id}/${d.png}`),s.Z.state.isSupportWebp&&(p+="?x-oss-process=image/format,webp/quality,lossless");let m=`${t}${i}/${a}/sprites/${n.id}/${d.json}`;a>=120&&(m=`${t}${i}/${a}/${i}/${a}/sprites/${n.id}/${d.json}`),await e.Z.get(m).then((i=>{c.image[o]=p,c.fileName[o]=r.Z.getPathFilename(p),c.grids[o]=i.data,c.jsonUrl[o]=m})),c.duration=+d.time}function I(i,o){let n={},e=s.Z.state.workSpace.canvas.page,c=e.width,t=e.height,r=s.Z.getters.newItemStyle.suitableWidth/e.originalWidth,a=i;if(c>t){if(n.height=r,n.width=n.height*(t*a)/c,o<73){n.height=.5911063569682151,n.width=n.height*(t*a)/c;const i=.5911063569682151/r;n.height=r,n.width=n.width/i}}else if(n.width=r,n.height=n.width*(c/a)/t,o<73){n.width=.2622862377850162,n.height=n.width*(c/a)/t;const i=.2622862377850162/r;n.width=r,n.height=n.height/i}return n}},52616:function(i,o,n){n.d(o,{H:function(){return e}});const e=[{name:"font_icon.Life",id:"items",icons:[{icon:"printer"},{icon:"calendar"},{icon:"credit-card"},{icon:"box"},{icon:"money"},{icon:"refrigerator"},{icon:"cpu"},{icon:"football"},{icon:"brush"},{icon:"suitcase"},{icon:"suitcase-line"},{icon:"umbrella"},{icon:"alarm-clock"},{icon:"medal"},{icon:"gold-medal"},{icon:"present"},{icon:"mouse"},{icon:"watch"},{icon:"quartz-watch"},{icon:"magnet"},{icon:"help"},{icon:"soccer"},{icon:"toilet-paper"},{icon:"reading-lamp"},{icon:"paperclip"},{icon:"magic-stick"},{icon:"basketball"},{icon:"baseball"},{icon:"coin"},{icon:"goods"},{icon:"sell"},{icon:"sold-out"},{icon:"key"},{icon:"shopping-cart"},{icon:"shopping-cart-full"},{icon:"shopping-trolley"},{icon:"phone"},{icon:"scissor"},{icon:"handbag"},{icon:"shopping-bag"},{icon:"trophy"},{icon:"trophy-base"},{icon:"stopwatch"},{icon:"timer"},{icon:"collection-tag"},{icon:"takeaway-box"},{icon:"price-tag"},{icon:"wallet"},{icon:"opportunity"},{icon:"phone-filled"},{icon:"wallet-filled"},{icon:"goods-filled"},{icon:"flag"},{icon:"brush-filled"},{icon:"briefcase"},{icon:"stamp"},{icon:"chrome-filled"},{icon:"shop"},{icon:"switch-filled"},{icon:"wind-power"}]},{name:"font_icon.Media",id:"media",icons:[{icon:"microphone"},{icon:"mute"},{icon:"mic"},{icon:"video-pause"},{icon:"video-camera"},{icon:"video-play"},{icon:"headset"},{icon:"monitor"},{icon:"film"},{icon:"camera"},{icon:"picture"},{icon:"picture-rounded"},{icon:"iphone"},{icon:"cellphone"},{icon:"video-camera-filled"},{icon:"picture-filled"},{icon:"platform"},{icon:"camera-filled"},{icon:"bell-filled"}]},{name:"font_icon.Arrow",id:"arrow",icons:[{icon:"arrow-left"},{icon:"arrow-up"},{icon:"arrow-right"},{icon:"arrow-down"},{icon:"arrow-left-bold"},{icon:"arrow-up-bold"},{icon:"arrow-right-bold"},{icon:"arrow-down-bold"},{icon:"d-arrow-right"},{icon:"d-arrow-left"},{icon:"download"},{icon:"upload"},{icon:"top"},{icon:"bottom"},{icon:"back"},{icon:"right"},{icon:"top-right"},{icon:"top-left"},{icon:"bottom-left"},{icon:"bottom-right"},{icon:"sort"},{icon:"sort-up"},{icon:"sort-down"},{icon:"rank"},{icon:"caret-left"},{icon:"caret-top"},{icon:"caret-right"},{icon:"caret-bottom"},{icon:"d-caret"},{icon:"expand"},{icon:"fold"}]},{name:"font_icon.Food",id:"food",icons:[{icon:"watermelon"},{icon:"pear"},{icon:"no-smoking"},{icon:"smoking"},{icon:"mug"},{icon:"goblet-square-full"},{icon:"goblet-full"},{icon:"knife-fork"},{icon:"sugar"},{icon:"bowl"},{icon:"milk-tea"},{icon:"lollipop"},{icon:"coffee"},{icon:"chicken"},{icon:"dish"},{icon:"ice-tea"},{icon:"cold-drink"},{icon:"coffee-cup"},{icon:"dish-dot"},{icon:"ice-drink"},{icon:"ice-cream"},{icon:"dessert"},{icon:"ice-cream-square"},{icon:"fork-spoon"},{icon:"ice-cream-round"},{icon:"food"},{icon:"hot-water"},{icon:"grape"},{icon:"fries"},{icon:"apple"},{icon:"burger"},{icon:"goblet"},{icon:"goblet-square"},{icon:"orange"},{icon:"cherry"}]},{name:"font_icon.Traffic",id:"traffic",icons:[{icon:"location"},{icon:"location-information"},{icon:"delete-location"},{icon:"coordinate"},{icon:"bicycle"},{icon:"office-building"},{icon:"school"},{icon:"guide"},{icon:"add-location"},{icon:"map-location"},{icon:"place"},{icon:"location-filled"},{icon:"van"}]},{name:"font_icon.Weather",id:"weather",icons:[{icon:"sunrise"},{icon:"sunny"},{icon:"ship"},{icon:"mostly-cloudy"},{icon:"partly-cloudy"},{icon:"sunset"},{icon:"drizzling"},{icon:"pouring"},{icon:"cloudy"},{icon:"moon"},{icon:"moon-night"},{icon:"lightning"}]},{name:"font_icon.Document",id:"document",icons:[{icon:"document-add"},{icon:"document"},{icon:"notebook"},{icon:"tickets"},{icon:"memo"},{icon:"collection"},{icon:"postcard"},{icon:"scale-to-original"},{icon:"set-up"},{icon:"document-delete"},{icon:"document-checked"},{icon:"data-board"},{icon:"data-analysis"},{icon:"copy-document"},{icon:"folder-checked"},{icon:"files"},{icon:"folder"},{icon:"folder-delete"},{icon:"folder-remove"},{icon:"folder-opened"},{icon:"document-copy"},{icon:"document-remove"},{icon:"folder-add"},{icon:"first-aid-kit"},{icon:"reading"},{icon:"data-line"},{icon:"management"},{icon:"checked"},{icon:"ticket"},{icon:"failed"},{icon:"trend-charts"},{icon:"list"}]},{name:"font_icon.System",id:"system",icons:[{icon:"plus"},{icon:"minus"},{icon:"circle-plus"},{icon:"search"},{icon:"female"},{icon:"male"},{icon:"aim"},{icon:"house"},{icon:"full-screen"},{icon:"loading"},{icon:"link"},{icon:"service"},{icon:"pointer"},{icon:"star"},{icon:"notification"},{icon:"connection"},{icon:"chat-dot-round"},{icon:"setting"},{icon:"clock"},{icon:"position"},{icon:"discount"},{icon:"odometer"},{icon:"chat-square"},{icon:"chat-round"},{icon:"chat-line-round"},{icon:"chat-line-square"},{icon:"chat-dot-square"},{icon:"view"},{icon:"hide"},{icon:"unlock"},{icon:"lock"},{icon:"refresh-right"},{icon:"refresh-left"},{icon:"refresh"},{icon:"bell"},{icon:"mute-notification"},{icon:"user"},{icon:"check"},{icon:"circle-check"},{icon:"warning"},{icon:"circle-close"},{icon:"close"},{icon:"pie-chart"},{icon:"more"},{icon:"compass"},{icon:"filter"},{icon:"switch"},{icon:"select"},{icon:"semi-select"},{icon:"close-bold"},{icon:"edit-pen"},{icon:"edit"},{icon:"message"},{icon:"message-box"},{icon:"turn-off"},{icon:"finished"},{icon:"delete"},{icon:"crop"},{icon:"switch-button"},{icon:"operation"},{icon:"open"},{icon:"remove"},{icon:"zoom-out"},{icon:"zoom-in"},{icon:"info-filled"},{icon:"circle-check-filled"},{icon:"success-filled"},{icon:"warning-filled"},{icon:"circle-close-filled"},{icon:"question-filled"},{icon:"warn-triangle-filled"},{icon:"user-filled"},{icon:"more-filled"},{icon:"tools"},{icon:"home-filled"},{icon:"menu"},{icon:"upload-filled"},{icon:"avatar"},{icon:"help-filled"},{icon:"share"},{icon:"star-filled"},{icon:"comment"},{icon:"histogram"},{icon:"grid"},{icon:"promotion"},{icon:"delete-filled"},{icon:"remove-filled"},{icon:"circle-plus-filled"}]}]}}]);