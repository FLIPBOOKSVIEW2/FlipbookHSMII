"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[3448],{23448:function(t,e,s){s.r(e),s.d(e,{default:function(){return O}});s(57658),s(30541),s(21703);const i=[{type:"allFont",label:"fontSecPanel_js.text1"},{type:"cn",label:"fontSecPanel_js.text1"},{type:"en",label:"fontSecPanel_js.text4"},{type:"mine",label:"fontSecPanel_js.text5"},{type:"team",label:"fontSecPanel_js.text6"}];var n=s(97873),o=s(83469),a=s(73055);class l{constructor(t){(0,n.Z)(this,"label",""),(0,n.Z)(this,"href",""),(0,n.Z)(this,"postfix",""),(0,n.Z)(this,"value",""),(0,n.Z)(this,"thumb",""),(0,n.Z)(this,"isUploadFont",!1),(0,n.Z)(this,"key",""),(0,n.Z)(this,"type","cn"),(0,n.Z)(this,"url",""),(0,n.Z)(this,"isShow",!0),this.label=t.label?t.label:t.name?t.name:"",this.href=t.href??"",this.postfix=t.postfix?t.postfix:t.href?r(t.href):r(t.url),this.value=t.value?t.value:function(t){const e=a.basename(t),s=e.indexOf(".");return e.slice(0,s)}(t.url),this.thumb=t.thumb??"",this.isUploadFont=t.isUploadFont??!1,this.type=t.type??"cn",this.key=t.key?t.key:(0,o.Z)(this.type),this.url=t.url?t.url:"",this.isShow=t.isShow??!0}}function r(t){const e=a.basename(t),s=-1===e.lastIndexOf("?")?e.length:e.lastIndexOf("?"),i=e.indexOf(".");return e.slice(i+1,s)}class h{constructor(t){(0,n.Z)(this,"family",""),(0,n.Z)(this,"italic",!1),(0,n.Z)(this,"monospace",!1),(0,n.Z)(this,"path",""),(0,n.Z)(this,"postscriptName",""),(0,n.Z)(this,"style",""),(0,n.Z)(this,"weight",400),(0,n.Z)(this,"width",5),this.family=t.family??"",this.postscriptName=t.postscriptName??"",this.path=t.path??"",this.style=t.style??"",this.weight=t.weight??400,this.width=t.width??5,this.italic=t.italic??!1,this.monospace=t.monospace??!1}}class c extends h{constructor(t){super(t),(0,n.Z)(this,"type","system"),(0,n.Z)(this,"isShow",!0),this.value=this.family,this.isUploadFont=!0,this.url=this.path,this.label=this.value}}var u=s(63037),m=s(25817),p=s(24327),d=s(11721);class f extends m.X{fetchTeam(){const{req:t,cancel:e}=this.get({remotePath:`${d.Z.getters.host}/interface/team/get-my-teams.php`});return t.then((t=>{const{status:e,teamArr:s}=t.data;if(1===Number(e))return s.map((t=>new p.S(t)))})).catch((t=>{if("canceled"!==t.message)throw Error(t.message)}))}}var y={name:"UserResourceEmpty",props:{textList:{type:Array,default:function(){return[]}},showEmptyImage:{type:Boolean,default:!0,desc:"是否显示空状态图片"},isTooltip:{type:Boolean,default:!1,desc:"tooltip模式，文字左对齐"},dangerouslyUseHTMLString:{type:Boolean,default:!1,desc:"是否用v-html 渲染 textList"},isNoFound:{type:Boolean,default:!1,desc:"是否为空搜索结果"}},render(){const t=arguments[0],e=this.$slots.default,i=e?e.length>1?t("div",e.map((t=>t))):e:"",n=this.textList,o=n.length>0,a=this.showEmptyImage,l=this.isTooltip,r=this.isNoFound;return t("el-row",{attrs:{type:"flex",align:"middle"},class:{empty_panel:"1"}},[r?t("img",{attrs:{src:s(58788),alt:""}}):a?t("el-row",{class:"empty_image"}):"",t("el-row",{class:"empty_content"},[r?t("el-row",{class:"empty_found"},[this.$t("SecondMenuForSearch_vue.NoResultsFound")]):o?t("el-row",{class:{empty_text_list:"1",isTooltip:l},attrs:{type:"flex",align:"middle"}},[n.map((e=>t("span",{domProps:{innerHTML:e}})))]):"",i?t("el-row",{class:"empty_slot"},[i]):""])])}},F=y,g=s(1001),T=(0,g.Z)(F,undefined,undefined,!1,null,"585689a2",null).exports,v=s(15458),L=s(24118),N=s(94414),w=(s(83342),s(68451));class b extends v.q{get fileName(){return L.Z.getPathFilename(this.url)}get resourceInfo(){return[this.resourceSuffix.toUpperCase(),this.newTimeFormat,this.id]}get value(){return function(t){const e=-1===t.lastIndexOf(".")?t.length:t.lastIndexOf(".");return t.slice(0,e)}(this.name)}constructor(t,e=!0){super(),(0,n.Z)(this,"resourceType","font"),(0,n.Z)(this,"id",672520),(0,n.Z)(this,"name",""),(0,n.Z)(this,"url",""),(0,n.Z)(this,"width",0),(0,n.Z)(this,"height",0),(0,n.Z)(this,"space",0),(0,n.Z)(this,"time",""),(0,n.Z)(this,"newTime",0),(0,n.Z)(this,"type",4),(0,n.Z)(this,"isUploadFont",!0),(0,n.Z)(this,"isUploading",!1),(0,n.Z)(this,"hasLoaded",!1),Object.assign(this,t),this.url&&(this.url=this.url.replace("http:",location.protocol?location.protocol:"https:")),this.url_shot&&(this.url_shot=this.url_shot.replace("http:",location.protocol?location.protocol:"https:")),!this.hasLoaded&&e&&this.loadFont()}async startUpload(t={}){const e=new FormData;e.append("file",this.file),Object.keys(t).forEach((s=>{e.append(s,t[s])}));const{req:s,cancel:i}=(new m.X).post({postData:e,remotePath:`${d.Z.getters.host}/${N.C.addUserResource}`,progressCallBack:function(t){this.percentage=Number((1e3*t/10).toFixed(1))}.bind(this)});return this.cancel=i,s.then((t=>{const e=Number(t.data.status)||t.data.code.toUpperCase();if(1===e||"OK"===e)return t.data.data||t.data;throw Error("upload_error")})).finally((()=>{this.cancel=null}))}loadFont(){(0,w.Mv)(this.value,this.url).then((()=>{this.hasLoaded=!0})).catch((t=>{}))}}var x={name:"secondMenuLoading",data(){return{}},props:[],watch:{},mounted:function(){},computed:{},methods:{},components:{}},C=(0,g.Z)(x,(function(){return(0,this._self._c)("div",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],staticClass:"secondMenuLoading"})}),[],!1,null,"327ef47e",null).exports,_=s(18023),I=s(97604),S=s(65683),Z=s(49986),U=s.n(Z),$=s(94603),P={name:"FamilyList",props:{list:{type:Array,default:function(){return[]}},title:{type:String,default:""},langType:{type:String,default:"cn"},curTextFamily:{type:String,default:""},useTextBGI:{type:Boolean,default:!0,desc:"是否使用背景图显示字体选项（编辑器提供的免费字体有）"},showCommercially:{type:Boolean,default:!1,desc:"是否显示可商用图标"}},components:{SelectIcon:()=>s.e(4528).then(s.bind(s,4528)),CopyrightIcon:()=>s.e(5370).then(s.bind(s,65370))},data(){return{showList:!0}},methods:{toggleList:function(){this.showList=!this.showList},getFontTranslateBGI:function(t){return`url("${this.$store.getters.editorResourcePath}fontimage/${t.value}.png")`},chooseText:function(t){this.$emit("choose-text",t)}}},k=(0,g.Z)(P,(function(){var t=this,e=t._self._c;return e("el-row",t._l(t.list,(function(s){return e("div",{directives:[{name:"show",rawName:"v-show",value:s.isShow,expression:"font.isShow"}],key:s.key,staticClass:"fontItem",style:[s.href?{backgroundImage:t.getFontTranslateBGI(s)}:{}],on:{click:function(e){return t.chooseText(s)}}},[t._v(" "+t._s(s.href?"":s.label)+" "),t.showCommercially?e("el-row",{staticClass:"commercia_icon"},[t._v(" 商 ")]):t._e(),e("el-tooltip",{attrs:{placement:"top"},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticStyle:{width:"300px"}},[t._v(t._s(t.$t("DropdownForFontFamily_vue.CopyrightTips")))])]},proxy:!0}],null,!0)},[e("el-row",{staticClass:"commercia_icon copyright_icon"},[e("el-icon",[e("CopyrightIcon",{tag:"component"})],1)],1)],1),s.value===t.curTextFamily?e("el-icon",{staticClass:"fontSelected"},[e("SelectIcon",{tag:"component"})],1):t._e()],1)})),0)}),[],!1,null,"26bc537c",null).exports,D=s(47041);var M={name:"DropdownForFontFamily",props:{type:{type:String,default:"fontName"},value:{type:String,default:"",desc:"默认选中字体"},maxH:{type:Number,default:370,desc:"字体列表最大高度"},placement:{type:String,default:"bottom",desc:"下拉列表位置"}},data(){return{openList:!1,activeName:["doc","cn","zhcn","en","other"],tabType:"cn",curTextType:"cn",fontENName:[],fontCNName:[],fontZHCNName:[],fontOtherName:[],documentFontName:[],fontUploadName:[],currentFont:{label:""},showLoading:!1,errorMsg:null,isLoading:!0,navItem:[],searchFontName:"",isFetchingUserFont:!1,fetchUserFontCancel:null,isFetchingTeamFont:!1,teamCollapseItemList:[],fetchTeamCancel:null,isAllNoMatch:!1,tabLock:!1,isSearchMode:!1}},computed:{emptyNotice(){return[this.$t("SecondMenuForSearch_vue.NoResultsFound")]},freeFontShowCommercially:function(){return!1},showTopTab:function(){return this.isXZPro||this.isH5Pro||this.isYZPro},hideCollapse(){return"mine"===this.tabType&&!this.fontUploadName.length&&!this.isFetchingUserFont},collapseItemList:function(){const t={name:"doc",tKey:"v2021_11_5.docFont",label:"画布字体",list:this.documentFontName},e={name:"cn",tKey:"DropdownForFontFamily_vue.text2",label:"中文",list:this.fontCNName},s={name:"zhcn",tKey:"DropdownForFontFamily_vue.text3",label:"繁体",list:this.fontZHCNName},i={name:"en",tKey:"DropdownForFontFamily_vue.text4",label:"英文",list:this.fontENName},n={name:"other",tKey:"DropdownForFontFamily_vue.Other",label:"其他",list:this.fontOtherName};return this.showTopTab?"cn"===this.tabType?[t,e,s]:"en"===this.tabType?[t,i,n]:"mine"===this.tabType?[{name:"mine",label:"我的",tKey:"DropdownForFontFamily_vue.text7",list:this.fontUploadName}]:"allFont"===this.tabType?this.isH5Pro?[t,i,n,e,s]:[t,e,i,s,n]:[t]:this.isYZPro?[t,e,i,s,n]:this.isFlipPro?[t,{name:"system",label:"系统",tKey:"SecondMenuForBackup_vue.text4",list:this.osFontListName}]:[t,i,n,e,s]},isMulti:function(){return this.$store.getters.isMulti},multiSettingCount:function(){return this.$store.getters.multiSettingCount},multiList:function(){return this.$store.getters.multiList},currentSelectedItem:function(){return this.isMulti?this.multiList[0]:this.$store.getters.currentSelectedItem},isSystemFont:function(){return this.currentSelectedItem.isSystemFont},currentItemId:function(){return this.currentSelectedItem.id},upLoadTextList:function(){return this.$store.state.rightPanel.upLoadTextList},documentFont:function(){return this.currentSelectedItem&&"table"===this.currentSelectedItem.type?this.$store.state.rightPanel.tableDocumentFont:this.$store.state.rightPanel.documentFont},osFontList:function(){return this.$store.state.rightPanel.osFontList},osFontListName:function(){return this.osFontList.slice(0).map((t=>new c(t)))},curUTypeIsTopLevel:function(){return this.$store.getters.curUTypeIsTopLevel},isXZPro:function(){return this.$store.getters.isXZPro},isYZPro:function(){return this.$store.getters.isYZPro},isH5Pro:function(){return this.$store.getters.isH5Pro},isFlipPro:function(){return this.$store.getters.isFlipPro},serviceLimit:function(){return this.$store.state.upgradePanel.serviceLimit},curUType:function(){return this.$store.state.userData.uType},isShowUploadMyFont:function(){return!this.isYZPro&&!this.isH5Pro||(void 0===this.serviceLimit?.BAN_CUSTOM_FONT||!this.serviceLimit.BAN_CUSTOM_FONT[this.curUType])},isVisitorMode(){return this.$store.state.pagePanel.isVisitorMode}},watch:{documentFont:{handler:function(){this.getDocumentFont()},deep:!0,immediate:!0},"upLoadTextList.length":{handler:function(){this.upLoadTextList.length>0&&this.getUploadFont()},deep:!0},currentItemId:function(){this.getCurrentFont(),this.getFontListScrollTop(),this.currentSelectedItem.isTeamResource&&this.getTeamList()},value:function(){this.getCurrentFont()}},filters:{},methods:{getFontListScrollTop(){if(this.openList){let t=!1;const e=74,s=this.collapseItemList.reduce(((e,s)=>{if(t)return e+0;if(s.name!==this.curTextType)return this.activeName.includes(s.name)?e+s.list.length+1:e+1;{t=!0;const i=s.list.findIndex((t=>t.value===this.value));return this.activeName.includes(s.name)||this.activeName.push(s.name),e+i+2}}),0);this.$nextTick((()=>{this.$refs.list.scrollTop=t?34*s-e:0}))}const t=this.$refs.DropdownForFontFamily.getBoundingClientRect();this.$nextTick((()=>{if(this.$refs.dropDownList){const e="top"===this.placement||t.bottom+this.maxH>window.innerHeight,s=t.top-this.maxH>=0;e&&s?(this.$refs.dropDownList.style.top="unset",this.$refs.dropDownList.style.bottom="var(--props-btn-height)"):(this.$refs.dropDownList.style.top="var(--props-btn-height)",this.$refs.dropDownList.style.bottom="unset")}}))},hasMatch(t,e){if(e){const s=new RegExp(e,"i");return t.find((t=>t.label.match(s)))}return t.find((t=>t.isShow))},toggleList:function(){this.openList=!this.openList,this.openList?document.addEventListener("click",this.hideList,!0):document.removeEventListener("click",this.hideList,!0),this.getFontListScrollTop()},hideList:function(t){let e=t.target.parentElement;const s=this.$refs.DropdownForFontFamily;for(;e;){if(e===s)return;e=e.parentElement}this.openList=!1,document.removeEventListener("click",this.hideList,!0)},chooseText:function(t){const e="team"===t.type;this.$emit("getTypeValue",{type:"fontName",value:t.isUploadFont?t:t.value,isUpload:t.isUploadFont,isTeamResource:e,isSystemFont:"system"===t.type})},findCurTextItemFontLabel:function(t,e,s){const i=e.find((t=>t.value===s));return!!i&&("en"!==t&&"cn"!==t&&"other"!==t||!this.isH5Pro&&!this.isYZPro?this.tabType=t:this.tabType="allFont",void 0===i.label&&(i.label=i.value),this.currentFont=i,!0)},getCurrentFont:function(){const t=this.value,e=this.isSystemFont;if("Arial"!==t||e||"group"!==this.currentSelectedItem.type){if(this.currentSelectedItem&&(["text","group","table","pagination","button"].includes(this.currentSelectedItem.type)||this.isMulti))if(this.currentSelectedItem.isTeamResource)this.currentFont={label:this.currentSelectedItem.innerTextStyle.fontFamily},this.tabType="team";else if(this.isFlipPro)this.findCurTextItemFontLabel("system",this.osFontListName,t),this.curTextType="system";else{if(this.findCurTextItemFontLabel("en",this.fontENName,t))return void(this.curTextType="en");if(this.findCurTextItemFontLabel("cn",this.fontCNName,t))return void(this.curTextType="cn");if(this.findCurTextItemFontLabel("cn",this.fontZHCNName,t))return void(this.curTextType="zhcn");if(this.findCurTextItemFontLabel("en",this.fontOtherName,t))return void(this.curTextType="other");if(this.findCurTextItemFontLabel("mine",this.fontUploadName,t))return void(this.curTextType="mine");0===this.teamCollapseItemList.map((e=>this.findCurTextItemFontLabel("team",e.list,t))).filter((t=>t)).length?(this.findCurTextItemFontLabel("mine",this.documentFont,t),this.curTextType="mine"):this.curTextType="team"}}else this.$set(this.currentFont,"label",this.$i18n.t("DropdownForFontFamily_vue.text10"))},fontTabChange:function(t){this.tabLock=!0,this.tabType!==t&&(this.tabType=t,"mine"===t?this.getUploadFont():"team"===t&&this.getTeamList(),this.searchFontName&&this.toFindFont())},matchFontList:function(t,e,s=!1,i){e.forEach((e=>{if(e.isShow=s,!s){const s=new RegExp(t,"i");e.label.match(s)&&(e.isShow=!0,this.activeName.includes(i)||this.activeName.push(i))}}))},searchInputHandle(t){this.searchFontName=t,this.tabLock=!1,this.toFindFont()},toFindFont:function(){const t=(0,I.Z)(this.searchFontName);this.matchFontList(t,this.fontCNName,!t,"cn"),this.matchFontList(t,this.fontZHCNName,!t,"zh-cn"),this.matchFontList(t,this.fontENName,!t,"en"),this.matchFontList(t,this.fontOtherName,!t,"other"),this.matchFontList(t,this.fontUploadName,!t,"mine"),this.matchFontList(t,this.documentFontName,!t,"doc"),this.teamCollapseItemList.forEach((e=>{this.matchFontList(t,e.list,!t,e.name)})),this.matchFontList(t,this.osFontListName,!t,"system"),this.checkAllListMatch()},checkAllListMatch(){this.isAllNoMatch=!1;let t,e=[{name:"doc",list:this.documentFontName},{name:"cn",list:this.fontCNName},{name:"zh-cn",list:this.fontZHCNName},{name:"en",list:this.fontENName},{name:"other",list:this.fontOtherName},{name:"mine",list:this.fontUploadName},{name:"system",list:this.osFontListName}];const s=e.findIndex((t=>t.name===this.tabType));if(-1!==s){const t=e.splice(s,1)[0];e.unshift(t)}if(this.tabLock){const t=this.tabType;"allFont"===t?e.splice(e.findIndex((t=>"mine"===t.name)),1):e=[e.find((e=>e.name===t))]}if(e.length){for(let s of e)if(this.hasMatch(s.list,this.searchFontName)||this.hasMatch(s.list)){t=s;const e=s.name;if(e===this.tabType)return;const i=this.navItem.find((t=>t.type===e));i&&!this.tabLock&&this.searchFontName?this.tabType=e:!this.tabLock&&this.searchFontName&&(this.tabType="allFont");break}t||(this.isAllNoMatch=!0)}},getUploadFont:function(){if(!this.isVisitorMode){if(0===this.upLoadTextList.length&&(this.isXZPro||this.isH5Pro||this.isYZPro)){this.isFetchingUserFont=!0,this.fetchUserFontCancel&&this.fetchUserFontCancel();const t=this.isXZPro?{userId:this.$store.state.userData.uId,pageSize:50,pageIndex:0,types:"[4]"}:{size:50,current:0,types:"4"},{req:e,cancel:s}=function(t){const{req:e,cancel:s}=(0,D.f)({url:`${d.Z.getters.host}/${N.C.getUserResource}`,postData:t});return{req:e,cancel:s}}(t);this.fetchUserFontCancel=s,e.then((t=>{const e=1===Number(t.data.status)||"ok"===t.data.code.toLowerCase(),s=t.data.resource||t.data.data.list;if(!e)throw Error(this.$i18n.t("DropdownForFontFamily_vue.text11"));this.getUploadFontList(s.map((t=>new b(t,!1))),!0),this.getDocumentFont()})).catch((t=>{this.errorMsg=this.$message({showClose:!0,message:t.message,type:"warning",duration:5e3})})).finally((()=>{this.fetchUserFontCancel=null,this.isFetchingUserFont=!1}))}else{const t=this.upLoadTextList.filter((t=>"success"===t.uploadStatus));this.getUploadFontList(t,!1)}this.activeName.push("mine")}},sliceText:function(t){let e=t.lastIndexOf(".");return~e?t.slice(0,e):t},getUploadFontList:function(t,e){this.fontUploadName=t.map((t=>{const e=new l(t);return e.url=t.url.replace("http:","https:"),e.type="mine",e})),this.searchFontName&&this.toFindFont(),e&&this.$store.commit(_.mkT,{list:t})},getTeamFontList:async function(t,e){return await this.$http.post(`${this.$store.getters.host}/userResource/getTeamAllResource.php`,{teamId:t,type:4}).then((t=>t.data.resources.map((t=>(t.url=t.url.replace("http:","https:"),t.value=this.sliceText(t.name),t.label=t.value,t.isUploadFont=!0,t.type="team",new l(t))))))},getTeamList:async function(t){if(this.isFetchingTeamFont||0!==this.teamCollapseItemList.length||!this.isXZPro)return;this.isFetchingTeamFont=!0;const e=(await(new f).fetchTeam((t=>t)).catch((t=>(this.$message.error(t.message),[])))).map(((t,e)=>this.getTeamFontList(t.teamId,e).then((e=>{const s={name:t.teamId,id:t.teamId,label:t.teamName,list:e};this.teamCollapseItemList.push(s)}))));Promise.all(e).then((()=>{this.isFetchingTeamFont=!1,this.teamCollapseItemList.forEach((t=>{t.list.length>0&&this.activeName.push(t.name)})),"mounted"===t&&this.getCurrentFont(),this.searchFontName&&this.toFindFont()}))},findDocFont:function(t,e){const s=e.find((e=>e.value===t));s&&this.documentFontName.push(s)},getDocumentFont:function(){this.documentFontName=[],this.documentFont.forEach((t=>{this.isFlipPro?this.findDocFont(t.value,this.osFontListName):(0,S.Z)(t.url)?(this.findDocFont(t.value,this.fontCNName),this.findDocFont(t.value,this.fontENName),this.findDocFont(t.value,this.fontZHCNName),this.findDocFont(t.value,this.fontOtherName)):(this.findDocFont(t.value,this.fontUploadName),this.teamCollapseItemList.forEach((e=>{this.findDocFont(t.value,e.list)})))}))},toUploadText:function(){this.$store.commit(_.BKI,{isUpload:!0})},initNav:function(){this.navItem=function({team:t=!0,upload:e=!0,onlySystem:s=!1,allFont:n=!1}){const o=[];return t||o.push("team"),e||o.push("mine"),s&&o.push("cn","en"),n?o.push("cn","en"):o.push("allFont"),i.filter((t=>!o.includes(t.type)))}({team:this.$store.getters.teamPermission,upload:this.isXZPro||this.isH5Pro||this.isYZPro,onlySystem:this.isFlipPro,allFont:this.isH5Pro||this.isYZPro}),0===this.navItem.length&&(this.tabType="system",this.activeName.push("system")),~this.navItem.findIndex((t=>"allFont"===t.type))&&(~this.navItem.findIndex((t=>"mine"===t.type))&&"mine"===this.curTextType?this.tabType="mine":this.tabType="allFont"),this.handleIsShowMyFont()},handleIsShowMyFont:function(){if(this.isShowUploadMyFont)return;const t=this.navItem.findIndex((t=>"mine"===t.type));-1!==t&&(this.navItem.splice(t,1),this.fontTabChange("allFont"))}},mounted:function(){const{cnData:t,enData:e,zhCNData:s,otherData:i}=(0,$.sV)();this.fontCNName=t.map((t=>(t.type="cn",new l(t)))),this.fontENName=e.map((t=>(t.type="en",new l(t)))),this.fontZHCNName=s.map((t=>(t.type="zhcn",new l(t)))),this.fontOtherName=i.map((t=>(t.type="other",new l(t)))),this.getUploadFont(),this.getDocumentFont(),this.currentSelectedItem.isTeamResource?this.getTeamList("mounted"):this.getCurrentFont(),this.initNav()},beforeDestroy(){document.removeEventListener("click",this.hideList,!0)},components:{EditorSecondMenuSearchInput:u.Z,secondMenuLoading:C,UserResourceEmpty:T,FamilyList:k,SearchIcon:()=>s.e(6699).then(s.bind(s,16699))},directives:{ClickOutside:U()}},E=M,H=(0,g.Z)(E,(function(){var t=this,e=t._self._c;return e("div",{ref:"DropdownForFontFamily",staticClass:"DropdownForFontFamily"},[e("el-row",{staticClass:"dropDownArea",attrs:{type:"flex",align:"middle"}},[e("el-row",{staticClass:"current_family",attrs:{type:"flex",align:"middle",justify:"space-between"},nativeOn:{click:function(e){return t.toggleList.apply(null,arguments)}}},[e("span",{staticClass:"label"},[t._v(t._s(t.currentFont.label||t.$t("fontSecPanel_js.selectFont")))]),e("span",{staticClass:"el-icon-arrow-down toggle_icon",class:{toggleClass:t.openList}})]),e("transition",{attrs:{name:"el-zoom-in-top"}},[t.openList?e("ul",{ref:"dropDownList",staticClass:"dropDownList",style:{height:t.maxH+"px"}},[e("el-row",{staticClass:"fontSearch"},[e("EditorSecondMenuSearchInput",{attrs:{keyword:t.searchFontName,placeholder:t.$t("fontSecPanel_js.inputFontFamily"),showHistroy:!1,isSearchMode:t.isSearchMode},on:{"input-search":t.searchInputHandle,"update-search":t.searchInputHandle,"update:isSearchMode":function(e){t.isSearchMode=e},"update:is-search-mode":function(e){t.isSearchMode=e}}})],1),0!==t.navItem.length&&t.showTopTab&&!t.isVisitorMode?e("el-row",{staticClass:"fontNameSelect",attrs:{type:"flex",align:"middle",justify:"space-around"}},t._l(t.navItem,(function(s,i){return e("span",{key:i,class:{selectedTab:t.tabType===s.type},on:{click:function(e){return t.fontTabChange(s.type)}}},[t._v(" "+t._s(t.$t(s.label))+" ")])})),0):t._e(),e("div",{directives:[{name:"bar",rawName:"v-bar"}],staticClass:"itemList"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isFetchingUserFont,expression:"isFetchingUserFont"}],ref:"list",attrs:{"element-loading-background":"rgba(255, 255, 255, 1)"}},["mine"!==t.tabType||0!==t.fontUploadName.length||t.isFetchingUserFont?e("el-collapse",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t._l(t.collapseItemList,(function(s){return e("el-collapse-item",{key:s.name,staticClass:"family_collapse_item",class:{"family_collapse_item--disabled":!t.hasMatch(s.list)},attrs:{name:s.name,disabled:!t.hasMatch(s.list)}},[e("template",{slot:"title"},[s.list.length?e("el-row",{staticClass:"font_class",attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("span",[t._v(t._s(s.tKey?t.$t(s.tKey):s.label))])]):t._e()],1),e("FamilyList",{attrs:{list:s.list,langType:s.name,curTextFamily:t.value,showCommercially:t.freeFontShowCommercially&&["cn","zhcn","en","other"].includes(s.name),useTextBGI:["doc","cn","zhcn","en","other"].includes(s.name)},on:{"choose-text":t.chooseText}})],2)})),"team"===t.tabType?t._l(t.teamCollapseItemList,(function(s){return e("el-collapse-item",{key:s.id,staticClass:"family_collapse_item",attrs:{name:s.name,disabled:0===s.list.length}},[e("template",{slot:"title"},[e("el-row",{staticClass:"font_class",attrs:{type:"flex",justify:"space-between",align:"middle"}},[e("span",[t._v(t._s(s.tKey?t.$t(s.tKey):s.label))])])],1),e("FamilyList",{attrs:{list:s.list,langType:"team",curTextFamily:t.value,useTextBGI:!1},on:{"choose-text":t.chooseText}})],2)})):t._e()],2):e("el-row",{staticClass:"noUploadFont",attrs:{type:"flex",justify:"space-between"}},[e("el-row",{staticClass:"text_cont",attrs:{type:"flex",align:"middle"}},[e("img",{attrs:{src:s(812)}}),e("p",[t._v(t._s(t.$t("DropdownForFontFamily_vue.text8")))])]),e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.toUploadText.apply(null,arguments)}}},[t._v(t._s(t.$t("DropdownForFontFamily_vue.uploadFont")))])],1),t.isAllNoMatch?e("div",{staticClass:"emptyContent"},[e("UserResourceEmpty",{attrs:{slot:"content","show-empty-image":!0,"is-tooltip":!1,"text-list":t.emptyNotice},slot:"content"})],1):t._e()],1)])],1):t._e()])],1)],1)}),[],!1,null,"077692ae",null),O=H.exports},47041:function(t,e,s){s.d(e,{f:function(){return n}});var i=s(68939);const n=({method:t="post",url:e,postData:s={},axiosRequestConfig:n={}})=>{let o=i.Z[t],a=()=>{};return{req:"post"===t?o(e,s,{...n,cancelToken:new i.Z.CancelToken((t=>{a=t}))}):o(e,{...n,cancelToken:new i.Z.CancelToken((t=>{a=t}))}),cancel:a}}},812:function(t,e,s){t.exports=s.p+"static/img/no_upload_text.png"}}]);