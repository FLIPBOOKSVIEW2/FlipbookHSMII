"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[7063],{79809:function(t,e,i){i.r(e),i.d(e,{default:function(){return q}});var s=i(46749),o=i(49988),r=i(87632),n=i(11201),a=i(18023);const l={data(){return{}},mounted(){},computed:{isFlipPro:function(){return this.$store.getters.isFlipPro},isYZPro:function(){return this.$store.getters.isYZPro},isH5Pro:function(){return this.$store.getters.isH5Pro},isXZPro:function(){return this.$store.getters.isXZPro},currentSelectedItem:function(){return this.$store.getters.currentSelectedItem},currentPageItems:function(){return this.$store.getters.currentPageItems},pathAnime:function(){return this.$store.state.timeline.pathAnime},pathItemSelectedIndex:function(){return this.pathAnime.pathItemSelectedIndex},showFilter:function(){return-1===this.pathItemSelectedIndex&&!this.isFlipPro}},methods:{toggleFilterPanel:function(){this.saveBeforePage()},saveBeforePage:function(){this.$store.commit(a.CjF)},addCanUndo:function(){this.$store.commit(a.N23,{canUndo:!0})}}};var c=i(66546),h=(i(21703),i(57658),i(25986)),u=i(41225),d=i(59808),m=i(30459),g=i(1001),p=(0,g.Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 0.421875C3.13358 0.421875 0 3.55546 0 7.42188C0 11.2883 3.13358 14.4219 7 14.4219C10.8664 14.4219 14 11.2883 14 7.42188C14 3.55546 10.8664 0.421875 7 0.421875Z",fill:"url(#paint0_linear_13938_14364)"}}),t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.56514 10.1558C4.52425 10.3769 4.60819 10.6025 4.78035 10.7365C4.95468 10.8727 5.18495 10.8928 5.37864 10.7923L6.6699 10.1222C6.83561 10.0329 7.03145 10.0329 7.19717 10.1222L8.46906 10.8481C8.65845 10.9576 8.89087 10.9442 9.06734 10.8146C9.24382 10.6873 9.33636 10.4662 9.30408 10.2429L9.08887 8.75533C9.06089 8.56325 9.12545 8.36894 9.26319 8.23716L10.3199 7.19857C10.477 7.04669 10.5394 6.8144 10.4748 6.59999C10.4124 6.38557 10.2381 6.22475 10.025 6.18902L8.59173 5.94333C8.4088 5.91653 8.24955 5.79592 8.16777 5.6217L7.55011 4.25925C7.45757 4.05824 7.26388 3.92646 7.04652 3.92199C6.83131 3.91753 6.63116 4.04037 6.53217 4.23915L5.86717 5.57927C5.78108 5.75125 5.61968 5.86739 5.43675 5.89196L3.99699 6.08181C3.78178 6.11084 3.601 6.26272 3.52998 6.47491C3.46112 6.68709 3.51277 6.92161 3.66557 7.08019L4.68566 8.15228C4.81694 8.29076 4.8729 8.48508 4.83846 8.67493L4.56514 10.1558Z",fill:"white"}}),t("defs",[t("linearGradient",{attrs:{id:"paint0_linear_13938_14364",x1:"1.76674",y1:"-0.423242",x2:"6.74567",y2:"17.7737",gradientUnits:"userSpaceOnUse"}},[t("stop",{attrs:{offset:"0.119128","stop-color":"#5DABF9"}}),t("stop",{attrs:{offset:"0.873964","stop-color":"#599BFB"}})],1)],1)])}),[],!1,null,null,null).exports,f=i(66438),v=i(66741),C=i(7934),I=i(29986),w=i(16264),S=i(36461),_=i(69368),P={name:"Tool",props:{canUndo:{type:Boolean,default:!1,desc:"能否撤销"},canRedo:{type:Boolean,default:!1,desc:"能否重做"},canReset:{type:Boolean,default:!1,desc:"能否重做"},disabled:{type:Boolean,default:!1,desc:"是否禁用"},zoomLevel:{type:Number,default:1,desc:"缩放百分比"},tool:{type:String,default:"brush",desc:"工具画笔类型"},brushSize:{type:Number,default:40,desc:"画笔尺寸"}},data(){return{brushArr:[{type:"brush",icon:"EraseIcon",name:"PropsForImage_vue.Restore"},{type:"erase",icon:"RestoreIcon",name:"PropsForImage_vue.Erase"}]}},computed:{size:{get(){return this.brushSize},set(t){this.$emit("update:brushSize",t)}}},methods:{undo(){this.$emit("undo")},redo(){this.$emit("redo")},reset(){!this.disabled&&this.canReset&&this.$emit("reset")},async ToolChange(t){await this.$nextTick(),this.$refs[`PopoverRef_${t}`][0].updatePopper(),this.$emit("toolChange",t)},format(t){return t+"px"}},components:{UndoIcon:C.default,RedoIcon:I.default,EraseIcon:w.default,ResetIcon:S.default,RestoreIcon:_.default}},$=(0,g.Z)(P,(function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"tool",attrs:{type:"flex",align:"middle"}},[e("el-row",{staticClass:"history_tool",attrs:{type:"flex",align:"middle"}},[e("div",{staticClass:"tool_item",class:{disabled:!t.canUndo},on:{click:t.undo}},[e("el-icon",[e("UndoIcon",{tag:"component"})],1)],1),e("div",{staticClass:"tool_item",class:{disabled:!t.canRedo},on:{click:t.redo}},[e("el-icon",[e("RedoIcon",{tag:"component"})],1)],1)]),e("div",{staticClass:"line"}),e("el-row",{staticClass:"brush_tool",attrs:{type:"flex",align:"middle"}},t._l(t.brushArr,(function(i){return e("el-popover",{key:i.type,ref:`PopoverRef_${i.type}`,refInFor:!0,attrs:{placement:"bottom","visible-arrow":!1,disabled:t.disabled||t.tool!==i.type,trigger:"hover"}},[e("template",{slot:"reference"},[e("div",{staticClass:"tool_item",class:{active:t.tool===i.type,disabled:t.disabled},on:{click:function(e){return t.ToolChange(i.type)}}},[e("el-icon",{attrs:{size:15}},[e(i.icon,{tag:"component"})],1),t._v(" "+t._s(t.$t(i.name))+" ")],1)]),e("div",{staticClass:"slider-box flex items-center justify-center"},[e("div",{staticClass:"circle"}),e("el-slider",{attrs:{"data-v":"v2",size:"small","format-tooltip":t.format,min:1,max:100},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}}),e("div",{staticClass:"circle",staticStyle:{width:"16px",height:"16px"}})],1)],2)})),1),e("div",{staticClass:"line"}),e("div",{staticClass:"tool_item",class:{disabled:t.disabled||!t.canReset},on:{click:t.reset}},[e("el-icon",{attrs:{size:15}},[e("ResetIcon",{tag:"component"})],1),t._v(" "+t._s(t.$t("PropsForImage_vue.Reset"))+" ")],1)],1)}),[],!1,null,"6a449b48",null).exports;class x{constructor(t=100){this.maxLength=t,this.undoStack=[],this.redoStack=[],this.currentState=null}push(t){if(null!==this.currentState)for(this.undoStack.push(this.currentState);this.undoStack.length>this.maxLength;)this.undoStack.shift();this.currentState=t,this.redoStack=[]}undo(){return this.canUndo?(this.redoStack.push(this.currentState),this.currentState=this.undoStack.pop(),this.currentState):null}redo(){return this.canRedo?(this.undoStack.push(this.currentState),this.currentState=this.redoStack.pop(),this.currentState):null}get canUndo(){return this.undoStack.length>0}get canRedo(){return this.redoStack.length>0}clear(){this.undoStack=[],this.redoStack=[],this.currentState=null}}async function y(t){return new Promise(((e,i)=>{const s=new Image;s.crossOrigin="Anonymous",s.onload=()=>{e(s)},s.onerror=t=>{i(new Error("Failed to load image"))},s.src=t}))}async function b(t,e){return new Promise(((i,s)=>{const o=document.createElement("canvas");o.width=t.width,o.height=t.height;const r=o.getContext("2d");if(r){r.drawImage(t,0,0);const s=r.getImageData(0,0,t.width,t.height),n=s.data,a=e.match(/\d+/g),l=function(t){const e=/(?:[,\s]*)(\d*\.\d+|\d+)(?:\s*\))/,i=t.match(e);return i&&i[1]?parseFloat(i[1]):1}(e);if(!a)return;for(let t=0;t<n.length;t+=4)n[t+3]>0&&(n[t]=parseInt(a[0]),n[t+1]=parseInt(a[1]),n[t+2]=parseInt(a[2]),n[t+3]=Math.round(255*l));r.putImageData(s,0,0),i(o)}else s(new Error("Unable to get 2d context"))}))}var k=i(41145),L={name:"CutoutPanel",props:{originImage:{type:String,default:"",desc:"原图"},maskImage:{type:String,default:"",desc:"抠图"},isLoading:{type:Boolean,default:!1},isFail:{type:Boolean,default:!1},setCutout:{type:Function,default:()=>{}}},data(){return{HistoryTool:new x,zoomLevel:1,tool:"hand",originImg:"",isMoving:!1,isPainting:!1,isMouseenter:!1,startX:0,startY:0,lastX:0,lastY:0,canvasW:600,canvasH:600,canvasLeft:0,canvasTop:0,canvasRatio:1,circlePointLeft:0,circlePointTop:0,brushSize:40,modifiedMask:null,maskColor:"rgba(114, 60, 249, 1)"}},computed:{isH5Pro:function(){return this.$store.getters.isH5Pro},uType:function(){return this.$store.state.userData.uType},allow_number(){return this.$store.state.userAiNumber.allow_number},use_number(){return this.$store.state.userAiNumber.use_number},userAiNumber(){return this.$store.state.userAiNumber},overplusNumber(){const t=this.allow_number-this.use_number;return t<0?0:t},givePoints(){return this.$store.state.upgradePanel.serviceLimit.EVERY_CYCLE_GIVE_POINTS[this.uType]},tallyTips(){const t=(0,v.AR)(this.uType);return this.isYZPro?`<p>1. ${this.$i18n.t("aiText.getFreePointPerMonthYz",{plan:t,points:this.givePoints})}</p>\n      <p>2. ${this.$i18n.t("aiText.EachUsageWillCostYZ",{points:this.cutoutPointCost})}</p>`:`<p>1. ${this.$i18n.t("aiText.getFreePointPerMonth",{plan:t,points:this.givePoints})}</p>\n      <p>2. ${this.$i18n.t("aiText.EachUsageWillCost",{points:this.cutoutPointCost})}</p>\n      3. <a href="https://help.fliphtml5.com/docs/get-started-with-ai-assistant/#9-toc-title" target="_blank">${this.$i18n.t("aiText.learnMoreAboutAIFeature")}</a>`},cutoutPointCost(){return f.M9.cutout},upgradePriceUrl:function(){return this.$store.getters.upgradePriceUrl},canUndo(){return this.HistoryTool.canUndo},canRedo(){return this.HistoryTool.canRedo},canReset(){return this.canUndo||this.canRedo},ctrlKeyDown(){return this.$store.state.workSpace.ctrlKeyDown},containerStyle(){return{width:this.canvasW*this.zoomLevel+"px",height:this.canvasH*this.zoomLevel+"px",left:this.canvasLeft+"px",top:this.canvasTop+"px"}},realBrushSize(){return this.brushSize/(this.canvasW*this.zoomLevel/(this.originImg?.width||1))},isYZPro:function(){return this.$store.getters.isYZPro},curUTypeIsTopLevel(){return this.$store.getters.curUTypeIsTopLevel}},watch:{maskImage:"init",originImage:"init"},async mounted(){await this.$nextTick();const t=this.$refs.cutoutContainer.offsetHeight;if(.9*window.innerHeight<t){const e=this.$refs.movableRef.offsetHeight;this.$refs.movableRef.style.height=e*window.innerHeight*.9/t+"px"}this.HistoryTool=new x(20),this.init(),this.addDocumentListener()},beforeDestroy(){this.removeDocumentListener()},methods:{async init(){if(!this.isFail)try{const t=await y(this.originImage);this.originImg=t,this.canvasRatio=t.width/t.height;const e=this.$refs.backgroundCanvasRef;if(!e)return;this.handleResize(),function(t,e){const i=t.getContext("2d");i?(t.width=e.width,t.height=e.height,i.drawImage(e,0,0,t.width,t.height)):new Error("Canvas context is not available")}(e,t),await this.drawCanvas(t)}catch(t){}},addDocumentListener(){document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.stopMoving),document.addEventListener("resize",this.handleResize)},removeDocumentListener(){document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.stopMoving),document.removeEventListener("resize",this.handleResize)},handleResize(){const t=this.$refs.canvasWrapRef;if(!t)return;const e=function(t,e,i){if(t/e>i)return{maxWidth:e*i,maxHeight:e};return{maxWidth:t,maxHeight:t/i}}(t.offsetWidth,t.offsetHeight,this.canvasRatio);this.canvasW=e.maxWidth,this.canvasH=e.maxHeight},closePanel(){this.$emit("close")},toUpgrade(){window.open(this.upgradePriceUrl,"_target")},toPurchase(){this.isYZPro?window.open(`${this.$store.getters.host}/manage/yb/buy`,"_blank"):window.open(`${this.$store.getters.host}/dashboard/ai-point`,"_blank")},handleMouseEnter(){this.$refs.tooltipRef&&this.$refs.tooltipRef.hide()},handleMouseLeave(){this.$refs.tooltipRef&&this.$refs.tooltipRef.show()},undo(){const t=this.HistoryTool.undo(),e=this.$refs.workCanvasRef.getContext("2d"),i=this.$refs.viewCanvasRef.getContext("2d");e&&i&&t&&(e.putImageData(t,0,0),this.resetViewCanvas())},redo(){const t=this.HistoryTool.redo(),e=this.$refs.workCanvasRef.getContext("2d"),i=this.$refs.viewCanvasRef.getContext("2d");e&&i&&t&&(e.putImageData(t,0,0),this.resetViewCanvas())},async reset(){if(this.isLoading)return;const t=this.$refs.workCanvasRef,e=t.getContext("2d");if(this.modifiedMask&&e&&t){const{width:i,height:s}=t;e.clearRect(0,0,i,s),e.globalCompositeOperation="destination-over",e.drawImage(this.modifiedMask,0,0,i,s);const o=await y(this.maskImage);this.resetViewCanvas(o)}this.HistoryTool.clear();const i=e.getImageData(0,0,t.width||0,t.height||0);this.HistoryTool.push(i)},toolChange(t){this.isLoading||(this.tool=t)},saveState(){const t=this.$refs.workCanvasRef,e=this.$refs.viewCanvasRef,i=t?.getContext("2d"),s=e?.getContext("2d");if(!i||!s)return;const o=i.getImageData(0,0,t.width||0,t.height||0);this.HistoryTool.push(o)},startMoving(t){"hand"===this.tool&&(this.isMoving=!0,this.startX=t.clientX,this.startY=t.clientY)},startPainting(t){if("hand"===this.tool)return;this.isPainting=!0;if(this.$refs.workCanvasRef){const{x:e,y:i}=this.getCoord(t);this.lastX=e,this.lastY=i}},stopPainting(){this.isPainting&&this.saveState(),this.isPainting=!1,"brush"===this.tool&&this.resetViewCanvas()},async drawCanvas(t){const e=this.$refs.workCanvasRef,i=this.$refs.viewCanvasRef;if(!e||!i)return;const s=await y(this.maskImage);this.modifiedMask=await b(s,this.maskColor);const o=e,r=i;r.width=o.width=t.width,r.height=o.height=t.height;const n=o.getContext("2d"),a=r.getContext("2d");n&&a&&(a.lineCap=n.lineCap="round",a.lineWidth=n.lineWidth=this.realBrushSize,n.drawImage(this.modifiedMask,0,0,o.width,o.height),a.drawImage(t,0,0,o.width,o.height),a.globalCompositeOperation="destination-in",a.drawImage(s,0,0,o.width,o.height),this.saveState())},draw(t){const e=this.$refs.workCanvasRef,i=this.$refs.viewCanvasRef,{x:s,y:o}=this.getCoord(t);if(!this.isPainting||!e||!i)return;const r=e.getContext("2d"),n=i.getContext("2d");r&&n&&(n.lineWidth=r.lineWidth=this.realBrushSize,r.beginPath(),r.moveTo(this.lastX,this.lastY),r.lineTo(s,o),"brush"===this.tool?(r.globalCompositeOperation="destination-over",r.strokeStyle=this.maskColor):"erase"===this.tool&&(r.strokeStyle="rgba(0, 0, 0, 1)",r.globalCompositeOperation="destination-out",n.beginPath(),n.moveTo(this.lastX,this.lastY),n.lineTo(s,o),n.strokeStyle=r.strokeStyle=this.maskColor,n.globalCompositeOperation="destination-out",n.stroke()),r.stroke(),this.lastX=s,this.lastY=o)},resetViewCanvas(t){const e=this.$refs.workCanvasRef,i=this.$refs.viewCanvasRef,s=i?.getContext("2d");if(!s||!e)return;const{width:o,height:r}=e;s.clearRect(0,0,o,r),s.globalCompositeOperation="source-over",s.drawImage(this.originImg,0,0,o,r),s.globalCompositeOperation="destination-in",s.drawImage(t||e,0,0,o,r)},onMouseenter(t){this.getCoord(t),this.isMouseenter=!0},getCoord(t){const e=this.$refs.workCanvasRef;if(e){const i=e.getBoundingClientRect(),s=e.width/(this.canvasW*this.zoomLevel);return this.circlePointLeft=t.clientX-i.left,this.circlePointTop=t.clientY-i.top,{x:this.circlePointLeft*s,y:this.circlePointTop*s}}return{x:0,y:0}},zoomLevelChange(t){const e=this.canvasLeft-.5*(this.canvasW-this.canvasW*this.zoomLevel),i=this.canvasTop-.5*(this.canvasH-this.canvasH*this.zoomLevel);this.zoomLevel=Number(parseFloat((this.zoomLevel+t).toFixed(1))),this.zoomLevel<.1?this.zoomLevel=.1:this.zoomLevel>10&&(this.zoomLevel=10),this.canvasLeft=.5*(this.canvasW-this.canvasW*this.zoomLevel)+e,this.canvasTop=.5*(this.canvasH-this.canvasH*this.zoomLevel)+i},move(t){"hand"===this.tool&&this.isMoving&&(this.canvasLeft+=t.clientX-this.startX,this.canvasTop+=t.clientY-this.startY,this.startX=t.clientX,this.startY=t.clientY)},stopMoving(t){this.isMoving=!1,this.stopPainting()},handleWheel(t){t.preventDefault(),this.zoomLevelChange(t.deltaY>0?-.1:.1)},confirmFn(){const t=this.$refs.viewCanvasRef;t&&this.$emit("change",t.toDataURL()),this.closePanel()}},components:{Point:k.Z,Lightbox:h.default,Tool:$,HandToolIcon:u.default,ZoomInIcon:d.default,ZoomOutIcon:m.default,YzTallyIcon:p,CloseIcon:()=>i.e(608).then(i.bind(i,30608)),QueryIcon:()=>Promise.resolve().then(i.bind(i,36826)),TallyIcon:()=>Promise.resolve().then(i.bind(i,99016))}},T=(0,g.Z)(L,(function(){var t=this,e=t._self._c;return e("div",[e("Lightbox",{attrs:{isHiddenHeaderTitle:!0,isShow:!0,customWidth:1e3,forbidClickBg:!0}},[e("div",{ref:"cutoutContainer",staticClass:"cutout-container"},[e("el-row",{staticClass:"box-header",attrs:{type:"flex",align:"middle",justify:"space-between"}},[e("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("PropsForImage_vue.BgRemover"))+" ")]),e("div",{staticClass:"flex items-center gap-x-3"},[e("el-row",{staticClass:"tally_box gap-x-1.5",attrs:{type:"flex",align:"middle"}},[t.isYZPro?e("el-icon",{attrs:{size:12}},[e("YzTallyIcon",{tag:"component"})],1):e("el-icon",{attrs:{size:12}},[e("TallyIcon",{tag:"component"})],1),e("div",{staticClass:"tally"},[t._v(" "+t._s(t.isYZPro?t.overplusNumber.toFixed(2):t.overplusNumber)+" ")]),e("Point",[e("div",{staticStyle:{"font-size":"0",cursor:"default"},on:{mousedown:function(t){t.stopPropagation()},mouseenter:function(e){return e.stopPropagation(),t.handleMouseEnter.apply(null,arguments)},mouseleave:t.handleMouseLeave}},[e("el-icon",{attrs:{size:12}},[e("QueryIcon",{tag:"component"})],1)],1)])],1),e("div",{staticClass:"line"}),e("div",{staticClass:"closeBtn",on:{click:t.closePanel}},[e("el-icon",[e("CloseIcon",{tag:"component"})],1)],1)],1)]),e("div",{staticClass:"content"},[e("div",{staticClass:"tool-box"},[e("Tool",{attrs:{brushSize:t.brushSize,tool:t.tool,canUndo:t.canUndo,canRedo:t.canRedo,canReset:t.canReset,zoomLevel:t.zoomLevel,disabled:t.isLoading},on:{"update:brushSize":function(e){t.brushSize=e},"update:brush-size":function(e){t.brushSize=e},undo:t.undo,redo:t.redo,reset:t.reset,toolChange:t.toolChange}})],1),e("div",{ref:"movableRef",staticClass:"stage",class:{isMove:"hand"===t.tool,isMoving:t.isMoving},on:{mousedown:t.startMoving}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.originImage||!t.originImg,expression:"!originImage || !originImg"}],staticClass:"left-stage"},[e("div",{staticClass:"stage-name"},[t._v(" "+t._s(t.$t("PropsForImage_vue.Original"))+" ")]),e("div",{ref:"canvasWrapRef",staticClass:"canvas-wrap"},[e("div",{staticClass:"canvas-container",style:t.containerStyle,attrs:{draggable:"false"},on:{wheel:t.handleWheel}},[e("canvas",{ref:"backgroundCanvasRef"}),e("canvas",{ref:"workCanvasRef",attrs:{id:"mask-canvas"},on:{mousedown:t.startPainting,mouseup:t.stopPainting,mousemove:t.draw,mouseenter:t.onMouseenter,mouseleave:()=>t.isMouseenter=!1}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isMouseenter&&"hand"!==t.tool,expression:"isMouseenter && tool !== 'hand'"}],staticClass:"circle-point",class:{isEraser:"erase"===t.tool},style:{width:t.brushSize+"px",height:t.brushSize+"px",left:t.circlePointLeft+"px",top:t.circlePointTop+"px"}})])])]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"right-stage opacity-bg"},[e("div",{staticClass:"stage-name"},[t._v(" "+t._s(t.$t("PropsForImage_vue.Preview"))+" ")]),e("div",{staticClass:"canvas-wrap"},[t.isFail?e("div",{staticClass:"w-full flex flex-col items-center gap-y-2.5"},[t._v(" "+t._s(t.$t("PropsForImage_vue.BGRemoverFailed"))+" "),e("div",{staticClass:"editor_v2_main_btn",on:{click:t.setCutout}},[t._v(" "+t._s(t.$t("PropsForImage_vue.TryAgain"))+" ")])]):e("div",{staticClass:"canvas-container",style:t.containerStyle,on:{wheel:t.handleWheel}},[e("canvas",{ref:"viewCanvasRef",attrs:{id:"work-canvas"}})])])]),e("div",{staticClass:"canvas-tool flex items-center justify-center gap-x-3"},[e("div",{staticClass:"flex items-center cursor-pointer too_btn",on:{click:function(e){t.tool="hand"}}},[e("el-icon",{attrs:{size:16}},[e("HandToolIcon",{tag:"component"})],1)],1),e("el-row",{staticClass:"gap-x-2",attrs:{type:"flex",align:"middle"}},[e("div",{staticClass:"flex items-center cursor-pointer too_btn",on:{click:function(e){return t.zoomLevelChange(-.1)}}},[e("el-icon",{attrs:{size:16}},[e("ZoomOutIcon",{tag:"component"})],1)],1),e("span",[t._v(t._s((100*t.zoomLevel).toFixed(0))+"%")]),e("div",{staticClass:"flex items-center cursor-pointer too_btn",on:{click:function(e){return t.zoomLevelChange(.1)}}},[e("el-icon",{attrs:{size:16}},[e("ZoomInIcon",{tag:"component"})],1)],1)])],1)])]),e("div",{staticClass:"footer flex justify-end gap-x-2.5"},[e("div",{staticClass:"editor_v2_white_btn btn-option",on:{click:t.closePanel}},[t._v(" "+t._s(t.$t("MenuForPathTool_vue.text3"))+" ")]),e("div",{staticClass:"editor_v2_main_btn btn-option",on:{click:t.confirmFn}},[t._v(" "+t._s(t.$t("ChangePageSizePanel_vue.text9"))+" ")])])],1)])],1)}),[],!1,null,"3b20bc9e",null),R=T.exports,M=i(83342),z=i(27561),F=i(94414),B=i(25817),G=i(8021),Z=i(66517),H=i(92301),A={name:"ImageAiBgRemove",data(){return{isShowCutoutPanel:!1,originImage:"",maskImage:"",accept:["jpg","png","jpeg","webp"],aiAipsUtils:new z.W,proTimer:"",isLoading:!1,CompressorFactory:null,originalHeight:0,originalWidth:0,isFail:!1,curUrl:""}},computed:{host(){return this.$store.getters.host},bookData(){return this.$store.state.bookData},isH5Pro(){return this.$store.getters.isH5Pro},use_number:{get(){return this.$store.state.userAiNumber.use_number},set(t){this.$store.state.userAiNumber.use_number=t}},imgMaxSize(){return this.isH5Pro?2e3:3072},imgMinSize(){return this.isH5Pro?32:0},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},disabled(){return!this.accept.includes((0,M._A)(this.item.fileName))},item(){return this.$store.getters.currentSelectedItem},currentPage(){return this.$store.getters.currentPage}},mounted(){this.CompressorFactory=new Z.LY({maxWidthOrHeight:this.imgMaxSize})},beforeDestroy(){this.curUrl&&this.currentPage.items.forEach((t=>{"image"===t.type&&t.isLoadingCutout&&(t.isLoadingCutout=!1,t.url=this.curUrl),"group"===t.type&&t.items.forEach((t=>{"image"===t.type&&t.isLoadingCutout&&(t.isLoadingCutout=!1,t.url=this.curUrl)}))}))},methods:{async setCutout(){if(this.$store.state.userAiNumber.allow_number-this.use_number<=0)return void(this.$store.state.isShowAiPointLimit=!0);const t=this.item.fileName;if(this.disabled)return;const e=this.isH5Pro?2e3:3072,i=this.isH5Pro?32:0,s=this.item.originalWidth,o=this.item.originalHeight;let r="",n=this.$t("_menuPanel_js.text3");const a=Math.max(s,o)>e;a&&(r=this.$t("PropsForImage_vue.curMaxSize",{size:`${this.imgMaxSize}*${this.imgMaxSize}px`}),n=this.$t("PropsForImage_vue.CompressRemoveBG")),Math.min(s,o)<i&&(r=this.$t("PropsForImage_vue.curMinSize",{size:`${this.imgMinSize}*${this.imgMinSize}px`}));let l=!1,c=!1;if(r&&await this.$cusConfirm({title:this.$t("MenuForPathTool_vue.text7"),message:r,confirmButtonText:n,cancelButtonText:this.$t("capturePanel.manualCancel"),showCancelButton:a,type:"warning"}).then((t=>{l=a,c=!a})).catch((t=>{c=!0})),!c)try{let e=this.item.url;if(this.isLoading=!0,this.isShowCutoutPanel=!0,this.isFail=!1,l){let i=await this.urlToFile(e,t);await this.CompressorFactory.addTasks([i]),await this.CompressorFactory.queueCompressor(),i=this.CompressorFactory.taskList[0].file,this.originalHeight=i.height,this.originalWidth=i.width;const{url:s}=await this.uploadFileToTemporary(i.file);e=s,this.CompressorFactory.clearTask()}e.startsWith("http:")||e.startsWith("https:")||(e="https://"+e.replace(/^\/+/,"")),this.createCutImage(e),this.originImage=e}catch(t){this.isLoading=!1,this.isFail=!0}},async createCutImage(t){const e=Object.assign({},{scene_key:"90004",object_id:this.bookData.bookId,param_config:{url:t}});this.use_number+=f.M9.cutout,this.aiAipsUtils.fetchAskAIQuestion(e,`${this.host}/${F.C.aiTextCreate}`).then((({data:t})=>{t&&(this.maskImage=t.seg_file_src,this.isLoading=!1)})).catch((t=>{"canceled"!==t.message?this.hasError():(this.isLoading=!1,this.isFail=!1)}))},hasError(){this.use_number-=f.M9.cutout,this.isLoading=!1,this.isFail=!0},async urlToFile(t,e){const i=await fetch(t),s=await i.blob();return new File([s],e,{type:this.getFileType(e)})},getFileType(t){const e=t.lastIndexOf(".")+1,i=t.lastIndexOf("?");switch(t.slice(e,-1===i?t.length:i).toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"gif":return"image/gif";default:return"image/png"}},async uploadFileToTemporary(t){const e=new FormData;e.append("file",t);const{req:i,cancel:s}=(new B.X).post({postData:e,remotePath:`${this.host}/${F.C.uploadTemporaryResource}`});return i.then((t=>{const e=Number(t.data.status)||t.data.code.toUpperCase();if(1===e||"OK"===e)return{url:t.data.fileSrc||t.data.filePath,fileName:t.data.fileName};throw Error("upload_error")})).finally((()=>{}))},async onChange(t){if(this.isLoading)return;this.$store.commit(a.CjF),this.item.isLoadingCutout=!0,this.item.originalImage.fileName||this.item.originalImage.url||!this.$store.state.tempData.isYZEditTemplate||this.$store.state.topHeader.isCreateFromTemplate||(this.item.originalImage.url=this.item.url,this.item.originalImage.fileName=this.item.fileName,this.item.originalImage.isNewFile=!0),this.curUrl=this.item.url,this.item.url="";const e=this.item.id;let i=await this.urlToFile(t,this.item.fileName);const{url:s,fileName:o}=await this.uploadFileToTemporary(i);if(!this.item||e!==this.item.id)return;const r=new H.Z({originalWidth:0!==this.originalWidth?this.originalWidth:this.item.originalWidth,originalHeight:0!==this.originalHeight?this.originalHeight:this.item.originalHeight,url:s,isUpload:!0,fileName:o,originalImage:this.item.originalImage,isCreatedByYZTemplate:this.item.isCreatedByYZTemplate,isPixabay:this.item.isPixabay,pixabayOriginUrl:this.item.pixabayOriginUrl,isDownload:this.item.isDownload,isAiBgRemove:!0}),n=(0,G.P)(r,this.item);if(-1!==this.currentSelectedGroupItemIndex){this.$store.getters.currentPageItems[this.currentSelectedItemIndex].items.splice(this.currentSelectedGroupItemIndex,1,n)}else this.$store.commit(a.loC,{items:[n],spliceIndex:this.currentSelectedItemIndex});this.curUrl="",n.isLoadingCutout=!1,this.$store.commit(a.N23,{canUndo:!0}),this.$store.commit(a.jQC,{fileName:o})},async closePanel(){this.aiAipsUtils.cancelHandle.create&&await this.aiAipsUtils.cancelHandle.create(),this.maskImage="",this.originImage="",this.isShowCutoutPanel=!1}},components:{CutoutPanel:R,BgRemoveIcon:()=>i.e(7772).then(i.bind(i,47772))}},U=(0,g.Z)(A,(function(){var t=this,e=t._self._c;return e("div",[e("el-tooltip",{attrs:{placement:"top",disabled:!t.disabled}},[e("div",{staticStyle:{width:"300px"},attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("shadowIosTip_20240830.text3"))+" ")]),e("div",{staticClass:"editor_v2_white_btn size gap-x-1.5",class:{disabled:t.disabled},on:{click:t.setCutout}},[e("el-icon",{attrs:{size:16}},[e("BgRemoveIcon",{tag:"component"})],1),t._v(" "+t._s(t.$t("PropsForImage_vue.BgRemover"))+" ")],1)]),t.isShowCutoutPanel?e("CutoutPanel",{attrs:{originImage:t.originImage,maskImage:t.maskImage,isLoading:t.isLoading,isFail:t.isFail,setCutout:t.setCutout},on:{change:t.onChange,close:t.closePanel}}):t._e()],1)}),[],!1,null,"20fc0144",null).exports,E=i(76558),W=i(25979),N=i(87874),Y={name:"ImageToTile",computed:{isMulti:function(){return this.$store.getters.isMulti},multiItemsList:function(){return this.$store.getters.multiList},multiAllTypeList:function(){return this.$store.getters.multiAllTypeList},multiSettingCount(){return this.$store.getters.multiSettingCount},currentPageItems:function(){return this.$store.getters.currentPageItems},currentSelectedItem:function(){return this.$store.getters.currentSelectedItem},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},tileStrategy:{get(){if(this.isMulti){return!!this.multiItemsList.find((t=>"tile"===t.strategy))}return"tile"===this.currentSelectedItem.strategy},set(t){this.toggleImageTile(t)}},isQRCodeImg(){return!this.isMulti&&this.currentSelectedItem.isQRCodeImg}},methods:{toggleImageTile(t){this.$store.commit(a.CjF),this.isMulti?this.multiSettingCount.forEach((e=>{const i=this.currentPageItems[e];this.setImageStrategy(i,t)})):this.setImageStrategy(this.currentSelectedItem,t),this.$store.commit(a.N23,{canUndo:!0})},setImageStrategy(t,e){if("image"===t.type){const{isGifImage:i,isApng:s,isSprite:o}=t;!i&&!s&&!o&&(this.$store.commit(a.mfC,{item:t}),e?this.$store.commit(a.z4T,{item:t,value:"tile"}):t.isBGI?this.$store.commit(a.z4T,{item:t,value:"cover"}):this.$store.commit(a.z4T,{item:t,value:"stretch",toReal:!0}))}}}},D=(0,g.Z)(Y,(function(){var t=this;return(0,t._self._c)("el-checkbox",{attrs:{"data-v":"v2",disabled:t.isQRCodeImg},model:{value:t.tileStrategy,callback:function(e){t.tileStrategy=e},expression:"tileStrategy"}},[t._v(t._s(t.$t("rightPanel.image_imageTile")))])}),[],!1,null,null,null).exports,O=i(2759),X=i(7631),j=i(77170),Q=i(12915),V={data(){return{msg:null}},mixins:[l,s.j,Q.S,j.u],created(){},mounted:function(){c.Q.$on(c.Y.DB_CLICK_IMAGE_ITEM,this.clickUploadButton)},beforeMount:function(){c.Q.$off(c.Y.DB_CLICK_IMAGE_ITEM)},watch:{imageCropState:function(t){t&&this.cropImage()}},computed:{isShowRestore(){return!(this.isXZPro&&this.isGifImage||this.isApng||this.isSprite||this.isBGI)},isFlipPro(){return this.$store.getters.isFlipPro},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},imageCropState:function(){return this.$store.state.shortcutsConfig.imageCropState},imgInGroup(){return-1!==this.currentSelectedGroupItemIndex},showBGISetting(){return!this.isMulti&&!this.imgInGroup},isBGI:{get:function(){return!!this.showBGISetting&&this.currentSelectedItem.isBGI},set:function(t){this.showBGISetting&&this.toBGI(t)}},showImageClipSetting(){return!this.isMulti&&!this.imgInGroup},showImageClipMaskSetting(){return!this.imgInGroup},showRadiusSetting(){if(this.currentSelectedItem){const{isGifImage:t,isApng:e,isSprite:i,isBGI:s,isQRCodeImg:o}=this.currentSelectedItem;return!(t||e||i||s||o)}return!!this.multiList.find((t=>{const{isGifImage:e,isApng:i,isSprite:s,isBGI:o,isQRCodeImg:r}=t;return!(e||i||s||o||r)}))},gifImageLoop:{get:function(){return this.currentSelectedItem.gifImageLoop},set:function(t){this.isApng&&(this.currentSelectedItem.apngPlayLoop=t,this.$store.commit("updateIsLoop",{id:this.currentSelectedItem.id,status:t})),this.currentSelectedItem.gifImageLoop=t}},isQRCodeImg:function(){return!this.isMulti&&this.$store.getters.currentSelectedItem.isQRCodeImg},isGifImage:function(){return!this.isMulti&&this.currentSelectedItem.isGifImage},isApng:function(){return!this.isMulti&&this.currentSelectedItem.isApng},isSprite(){return!this.isMulti&&this.currentSelectedItem.isSprite},showImageSize(){return!(this.$store.getters.isMulti||this.isGifImage||this.isSprite||this.isApng)},showGifToCanvasButton:function(){return this.$store.getters.showGifToCanvasButton},gifToCanvas:{get:function(){return this.currentSelectedItem.gifToCanvas},set:function(t){this.currentSelectedItem.gifToCanvas=t}},apngPlaySpeed:{get:function(){return this.currentSelectedItem.playSpeed?this.currentSelectedItem.playSpeed:1},set:function(t){this.$store.commit("updatePlaySpeed",{id:this.currentSelectedItem.id,speed:t}),this.currentSelectedItem.playSpeed=t}},isAsyncItem:function(){return this.currentSelectedItem.isAsyncItem},isShowReplace(){return!this.isMulti&&(!this.imgInGroup&&!(this.isFlipPro&&!this.currentSelectedItem.isPhoneImg))}},methods:{toBGI:function(t){this.$store.commit(a.CjF),this.currentSelectedItem.isBGI=t;let e,i,s=this.$store.state.workSpace.canvas.page,o=s.originalWidth,r=s.originalHeight,n=this.currentSelectedItem.originalWidth,l=this.currentSelectedItem.originalHeight,c=r/l,h=o/n,u=this.$store.getters.bgWHStyle,d=u.width,m=u.height,g=n/l;if(c>=h?(e=m,i=m*g):(e=d/g,i=d),t){this.currentSelectedItem.CID&&(this.currentSelectedItem.CID=0);let t=this.currentSelectedItemIndex;if(this.$store.commit(a.g5N,{item:this.currentSelectedItem,deg:0}),0!==t&&this.currentPageItems[0].isBGI){let e=this.currentPageItems[0].animations;this.currentSelectedItem.animations=e,this.$store.commit(a.mNn,{index:0}),t-=1}if(0!==t){let e=t,i=0;this.$store.commit(a.Mk8,{from:e,to:i,selectBG:!0})}let s=(r-e)/2,n=(o-i)/2;this.$store.commit(a.veJ,{item:this.currentPageItems[0],width:i,height:e,top:s,left:n}),"stretch"===this.currentPageItems[0].strategy&&(this.$store.commit(a.mfC,{item:this.currentPageItems[0]}),this.$store.commit(a.z4T,{item:this.currentPageItems[0],value:"cover"})),this.$store.commit(a.N23,{canUndo:!0})}else{c>=h?(e=l*o*.4/n,i=.4*o):(e=.4*r,i=n*r*.4/l);let t=this.$store.getters.newItemStyle,s=t.suitableTop+(t.suitableHeight-e)/2,u=t.suitableLeft+(t.suitableWidth-i)/2;this.$store.commit(a.veJ,{item:this.currentSelectedItem,width:i,height:e,top:s,left:u}),this.$store.commit(a.mfC,{item:this.currentSelectedItem});let d=this.currentSelectedItem.strategy;"tile"!==d&&(d="stretch"),this.$store.commit(a.z4T,{item:this.currentSelectedItem,value:d,toReal:!0}),this.$store.commit(a.N23,{canUndo:!0})}this.$store.commit(a.omO,{item:this.currentSelectedItem})},clickUploadButton:function(){this.$store.commit(a.t3z,{type:"setting"}),this.$refs.uploadButton&&this.$refs.uploadButton.$refs.uploadButton&&this.$refs.uploadButton.$refs.uploadButton.selectFile&&this.$refs.uploadButton.$refs.uploadButton.selectFile()},cropImage:function(){if(this.$store.state.workSpace.cropMode.isEnable||this.currentSelectedItem.isGifImage||this.isQRCodeImg||"tile"===this.currentSelectedItem.strategy||this.isBGI)return;let t=this.currentSelectedItem;this.$store.commit(a.g5N,{item:t,deg:t.rotate,rotateX:t.rotateX,rotateY:t.rotateY}),this.$store.state.workSpace.cropMode.isEnable=!0},toCanvas:function(t){t?o.Z.createGif(this.currentSelectedItem,!0).catch((t=>{let e=t.errorMes;this.msg&&this.msg.close(),this.msg=this.$message({showClose:!0,message:e,type:"warning",duration:3e3})})):(this.currentSelectedItem.gifIsTurningToCanvas=!1,this.currentSelectedItem.gifHasTurnedCanvas=!1,this.gifToCanvas=!1,o.Z.clearCanvasDom(this.currentSelectedItem),this.$store.commit(a.N23,{canUndo:!0}))},gifPlayLoop:function(){this.isApng||(this.$store.commit(a.N23,{canUndo:!0}),this.gifToCanvas||(this.gifToCanvas=!0,this.toCanvas(!0)))}},components:{PropGroup:n.default,MutiUploadList:r.default,UploadImageToReplace:X.Z,ImageToOriginRatio:W.Z,ImageToOriginSize:N.Z,ImageToBeQRCode:E.Z,ImageToTile:D,ResourceFavorite:O.Z,ImageAiBgRemove:U,CropIcon:()=>i.e(6746).then(i.bind(i,76746)),FilterVue:()=>i.e(3369).then(i.bind(i,43369)),FilterIcon:()=>i.e(1625).then(i.bind(i,71625)),PropsInput:()=>i.e(9706).then(i.bind(i,49706)),BorderRadius:()=>i.e(7227).then(i.bind(i,97227))}},K=(0,g.Z)(V,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"PropsForImage"},[t.showImageSize&&t.isYZPro?e("PropGroup",[e("p",{staticClass:"img-size"},[t._v(" "+t._s(this.$t("imgSize2023_05_16.text1",{width:this.item.originalWidth,height:this.item.originalHeight}))+" ")])]):t._e(),e("PropGroup",[t.isShowReplace?e("ResourceReplace"):t._e(),t.currentSelectedItem&&!t.currentSelectedItem.isAsyncItem||t.isMulti?e("UploadImageToReplace",{ref:"uploadButton"}):t._e()],1),e("PropGroup",[t.showImageClipSetting?e("div",{staticClass:"editor_v2_white_btn",class:{disabled:t.isQRCodeImg||t.isBGI||"tile"===this.currentSelectedItem.strategy},on:{click:function(e){return e.stopPropagation(),t.cropImage.apply(null,arguments)}}},[e("el-icon",{staticClass:"image_icon",attrs:{size:16}},[e("CropIcon",{tag:"component"})],1),e("span",[t._v(t._s(t.$t("rightPanel.image_cropImage")))])],1):t._e(),t.isShowFavorite?e("ResourceFavorite"):t._e(),(t.isH5Pro||t.isYZPro)&&t.isShowRestore&&t.currentSelectedItem&&!t.currentSelectedItem.isAsyncItem?e("ImageAiBgRemove",{attrs:{item:t.currentSelectedItem}}):t._e(),e("el-row",{staticClass:"btn_box",attrs:{type:"flex",align:"middle"}},[t.showFilter?e("FilterVue",{staticClass:"flex-1",attrs:{"show-black-filter":!1,"show-recover":!1,"show-text":!1}},[t._t("default",(function(){return[e("el-icon",{staticClass:"filter_icon image_icon",attrs:{size:16}},[e("FilterIcon")],1)]}),{slot:"filterIcon"})],2):t._e(),e("el-tooltip",{attrs:{placement:"top",content:t.$t("PropsForImage_vue.text1-1")}},[t.isXZPro&&t.isGifImage?t._e():e("ImageToOriginRatio",{staticClass:"flex-1",attrs:{disabled:!t.isShowRestore,"show-text":!1}})],1),e("el-tooltip",{attrs:{placement:"top",content:t.$t("PropsForImage_vue.text10")}},[t.isXZPro&&t.isGifImage?t._e():e("ImageToOriginSize",{staticClass:"flex-1",attrs:{disabled:!t.isShowRestore,"show-text":!1}})],1)],1)],1),t.isGifImage&&t.showGifToCanvasButton&&!t.isMulti&&!t.isFlipPro?e("PropGroup",{attrs:{title:"rightPanel.image_gifSetting"}},[e("template",{slot:"title"},[e("el-tooltip",{staticClass:"shadow-tip",attrs:{placement:"top","open-delay":800}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.$t("PropsForImage_vue.text2")))]),e("i",{staticClass:"el-icon-info"})])],1),e("el-row",{staticClass:"imagePosition"},[e("el-radio",{attrs:{"data-v":"v2",label:!1},on:{change:t.toCanvas},model:{value:t.gifToCanvas,callback:function(e){t.gifToCanvas=e},expression:"gifToCanvas"}},[t._v(t._s(t.$t("PropsForImage_vue.text3")))])],1),e("el-row",{staticClass:"imagePosition"},[e("el-radio",{attrs:{"data-v":"v2",label:!0},on:{change:t.toCanvas},model:{value:t.gifToCanvas,callback:function(e){t.gifToCanvas=e},expression:"gifToCanvas"}},[t._v(t._s(t.$t("PropsForImage_vue.text4")))])],1)],2):t._e(),t.isApng&&!t.isMulti?e("PropGroup",[e("PropsInput",{attrs:{title:t.$t("rightPanel.apngSetting"),settingValue:t.apngPlaySpeed,size:"medium",type:"number",min:.1,precision:1,step:.2,max:10,iptW:115,isBold:!0},on:{"update:settingValue":function(e){t.apngPlaySpeed=e},"update:setting-value":function(e){t.apngPlaySpeed=e}}})],1):t._e(),!(t.isGifImage&&t.showGifToCanvasButton||t.isApng)||t.isMulti||t.isFlipPro?t._e():e("PropGroup",{attrs:{title:t.$t("rightPanel.gifLoop")}},[e("el-row",{staticClass:"imagePosition"},[e("el-radio",{attrs:{"data-v":"v2",label:!0},on:{change:t.gifPlayLoop},model:{value:t.gifImageLoop,callback:function(e){t.gifImageLoop=e},expression:"gifImageLoop"}},[t._v(t._s(t.$t("PropsForImage_vue.text5")))])],1),e("el-row",{staticClass:"imagePosition"},[e("el-radio",{attrs:{"data-v":"v2",label:!1},on:{change:t.gifPlayLoop},model:{value:t.gifImageLoop,callback:function(e){t.gifImageLoop=e},expression:"gifImageLoop"}},[t._v(t._s(t.$t("PropsForImage_vue.text6")))])],1)],1),t.isXZPro?t._e():e("PropGroup",{staticClass:"img_type",attrs:{title:"rightPanel.image_imageType"}},[e("ImageToBeQRCode")],1),t.isMulti||t.isAsyncItem?t._e():e("PropGroup",{attrs:{title:"rightPanel.image_setting"}},[t.showBGISetting?e("div",{staticClass:"imagePosition"},[e("el-checkbox",{attrs:{"data-v":"v2"},model:{value:t.isBGI,callback:function(e){t.isBGI=e},expression:"isBGI"}},[t._v(t._s(t.$t("rightPanel.image_toBGI")))])],1):t._e(),t.isGifImage?t._e():e("div",{staticClass:"imagePosition"},[e("ImageToTile")],1)]),t.showRadiusSetting?e("BorderRadius",{attrs:{"radius-type":"image"}}):t._e()],1)}),[],!1,null,"13991fd1",null),q=K.exports},16264:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var s=(0,i(1001).Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{height:"1em",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{"clip-path":"url(#clip0_13905_14053)"}},[t("path",{attrs:{d:"M2.44807 8.37871C2.06379 8.7839 1.78512 9.28657 1.63896 9.83822C1.49279 10.3899 1.48405 10.9719 1.61359 11.5282C1.61359 11.5615 1.61359 11.5948 1.63732 11.624C1.70037 11.982 1.67966 12.3508 1.57699 12.6985C1.47431 13.0462 1.29276 13.3623 1.04805 13.6195C0.760902 13.9225 0.397103 14.1322 0 14.2235C1.11847 14.8328 2.39198 15.0514 3.63623 14.8477C4.88048 14.644 6.03091 14.0285 6.92105 13.0904C7.48949 12.4603 7.80176 11.6213 7.79125 10.7521C7.78075 9.88298 7.44831 9.05255 6.86483 8.43793C6.28134 7.82331 5.49299 7.47313 4.66789 7.46206C3.84278 7.451 3.04622 7.77993 2.44807 8.37871ZM13.8698 1.05497C13.7906 0.977183 13.6883 0.930563 13.5802 0.922974C13.4721 0.915384 13.3649 0.947291 13.2766 1.01331L6.91314 6.10827C6.87299 6.13897 6.83978 6.17865 6.8159 6.22447C6.79203 6.27029 6.77808 6.3211 6.77505 6.37327C6.77203 6.42544 6.78 6.47767 6.79841 6.52621C6.81681 6.57475 6.84519 6.61839 6.8815 6.65401L8.55837 8.42037C8.59236 8.46231 8.63519 8.49531 8.68343 8.51674C8.73167 8.53816 8.78399 8.54742 8.83623 8.54378C8.88848 8.54014 8.93919 8.5237 8.98433 8.49576C9.02947 8.46783 9.06779 8.42917 9.09624 8.38288L13.9133 1.68403C13.9765 1.59015 14.0067 1.47605 13.9988 1.36127C13.9908 1.2465 13.9452 1.13821 13.8698 1.05497Z",fill:"currentColor"}})]),t("defs",[t("clipPath",{attrs:{id:"clip0_13905_14053"}},[t("rect",{attrs:{width:"14",height:"14",fill:"white",transform:"translate(0 0.921875)"}})])])])}),[],!1,null,null,null).exports},41225:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var s=(0,i(1001).Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{"clip-path":"url(#clip0_13902_15405)"}},[t("path",{attrs:{d:"M12.223 15.0211C6.91697 17.2171 4.95797 15.2011 3.66297 13.9661C2.36697 12.7291 0.799975 10.3941 0.799975 10.3941C0.452975 10.0941 0.379975 9.59615 0.726975 9.18415C1.01297 8.78715 1.56697 8.64415 1.97797 8.92615C1.97797 8.92615 3.14597 9.79015 3.22297 9.83515C4.10297 10.3841 4.66597 9.07515 4.19297 8.09815C2.88597 5.78415 1.99297 3.29815 1.99297 3.29815C1.77897 2.77015 1.95197 2.20815 2.36697 2.03715C2.58966 1.91941 2.84942 1.89292 3.0913 1.96328C3.33317 2.03364 3.53819 2.19533 3.66297 2.41415L5.86597 6.34715C5.96597 6.52715 6.17597 6.61715 6.37597 6.56615C6.42033 6.5549 6.46199 6.5349 6.4985 6.50731C6.535 6.47972 6.56562 6.4451 6.58854 6.40549C6.61147 6.36589 6.62624 6.3221 6.63198 6.2767C6.63772 6.2313 6.63432 6.18521 6.62197 6.14115L5.23397 1.16915C5.09797 0.687149 5.41197 0.154149 5.90597 0.0261486C6.39997 -0.0998514 6.95097 0.211149 7.08397 0.693149L8.41997 5.48115C8.50097 5.77115 8.79998 5.94215 9.08998 5.86715C9.23889 5.82902 9.37037 5.74127 9.46272 5.61838C9.55507 5.49549 9.60278 5.3448 9.59797 5.19115L9.46798 1.17915C9.46288 0.932652 9.55588 0.694221 9.72652 0.516266C9.89716 0.338311 10.1315 0.235398 10.378 0.230149H10.393C10.921 0.224149 11.363 0.627149 11.375 1.14215L11.569 5.10815C11.586 5.43815 11.826 5.71315 12.151 5.77315C12.2186 5.78561 12.2882 5.78305 12.3547 5.76564C12.4212 5.74824 12.4831 5.71641 12.536 5.67242C12.5888 5.62844 12.6314 5.57336 12.6606 5.5111C12.6898 5.44884 12.7049 5.38092 12.705 5.31215V3.06215C12.772 2.59215 13.26 2.20815 13.743 2.27815C14.226 2.34815 14.439 2.61715 14.603 3.38115C14.604 3.38315 15.499 6.84415 15.499 9.90615C15.499 14.1911 12.736 14.8081 12.222 15.0211H12.223Z",fill:"currentColor"}})]),t("defs",[t("clipPath",{attrs:{id:"clip0_13902_15405"}},[t("rect",{attrs:{width:"16",height:"16",fill:"currentColor"}})])])])}),[],!1,null,null,null).exports},36461:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var s=(0,i(1001).Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{height:"1em",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M1.73781 10.2664L0.363175 6.82981C0.21169 6.4511 0.552974 6.06012 0.948681 6.15905L5.07258 7.19002C5.46419 7.28792 5.58435 7.78557 5.28057 8.05138L2.5313 10.457C2.27183 10.684 1.86585 10.5865 1.73781 10.2664Z",fill:"currentColor"}}),t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 7.92188C12 10.131 10.2092 11.9219 8.00005 11.9219C7.86042 11.9219 7.55894 11.9147 7.2282 11.9008C6.60381 11.8744 6.00005 12.4046 6.00005 13.0296C6.00005 13.4967 6.34025 13.876 6.80704 13.8941C7.27934 13.9125 7.80405 13.9219 8.00005 13.9219C11.3138 13.9219 14 11.2356 14 7.92188C14 4.60817 11.3138 1.92188 8.00005 1.92188C5.02705 1.92188 2.55909 4.08416 2.08301 6.92188H4.12607C4.57011 5.19665 6.13621 3.92188 8.00005 3.92188C10.2092 3.92188 12 5.71274 12 7.92188Z",fill:"currentColor"}})])}),[],!1,null,null,null).exports},69368:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var s=(0,i(1001).Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{height:"1em",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.8287 1.71307L13.2813 4.26761C14.2632 5.29025 14.2355 6.91519 13.2194 7.90372L6.75472 14.193C5.72211 15.1976 4.06756 15.1588 3.08294 14.107L0.696255 11.5575C-0.260166 10.5358 -0.227252 8.93631 0.770396 7.95495L7.16913 1.66071C8.19107 0.655457 9.83583 0.678989 10.8287 1.71307ZM9.34416 3.14259L11.7968 5.69713C11.9932 5.90166 11.9877 6.22664 11.7844 6.42435L5.31974 12.7136C5.11321 12.9145 4.7823 12.9068 4.58538 12.6964L2.19869 10.1469C2.00741 9.94253 2.01399 9.62264 2.21352 9.42637L8.61225 3.13212C8.81664 2.93107 9.14559 2.93578 9.34416 3.14259Z",fill:"currentColor"}}),t("path",{attrs:{d:"M5 12.9219H13C13.5523 12.9219 14 13.3696 14 13.9219C14 14.4742 13.5523 14.9219 13 14.9219H5V12.9219Z",fill:"currentColor"}}),t("path",{attrs:{d:"M4 6.92188L8 10.9219",stroke:"currentColor","stroke-width":"2"}})])}),[],!1,null,null,null).exports},59808:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var s=(0,i(1001).Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M7.00016 12.6667C10.1298 12.6667 12.6668 10.1296 12.6668 7C12.6668 3.8704 10.1298 1.33333 7.00016 1.33333C3.87056 1.33333 1.3335 3.8704 1.3335 7C1.3335 10.1296 3.87056 12.6667 7.00016 12.6667Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}}),t("path",{attrs:{d:"M7 5V9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),t("path",{attrs:{d:"M5.00537 7.0052L9.00017 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),t("path",{attrs:{d:"M11.0737 11.0739L13.9022 13.9023",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])}),[],!1,null,null,null).exports},30459:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var s=(0,i(1001).Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M7.00016 12.6667C10.1298 12.6667 12.6668 10.1296 12.6668 7C12.6668 3.8704 10.1298 1.33333 7.00016 1.33333C3.87056 1.33333 1.3335 3.8704 1.3335 7C1.3335 10.1296 3.87056 12.6667 7.00016 12.6667Z",stroke:"currentColor","stroke-width":"2","stroke-linejoin":"round"}}),t("path",{attrs:{d:"M5 7H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),t("path",{attrs:{d:"M10.6665 10.6667L13.4949 13.4951",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])}),[],!1,null,null,null).exports},12915:function(t,e,i){i.d(e,{S:function(){return l}});var s=i(18023),o=i(94101),r={name:"ResourceTopGroup",data(){return{}},computed:{pathAnime:function(){return this.$store.state.timeline.pathAnime},pathItemSelectedIndex:function(){return this.pathAnime.pathItemSelectedIndex},item:function(){return-1!==this.pathItemSelectedIndex?this.$store.getters.currentSelectedPathItem:this.$store.getters.currentSelectedItem},isXZPro:function(){return this.$store.getters.isXZPro},isMulti:function(){return this.$store.getters.isMulti}},methods:{intoReplaceMode(){this.$store.commit(s.Ewg,{isPreview:!1}),this.$store.commit(s.eKS,{isShow:!0})},searchBeLike:function(){this.$store.commit(s.$8l,{menu:"material"}),this.isShowSearchPanel=!0,setTimeout((()=>{eventBus.$emit(busType.SEARCH_SIMILARITY,this.item.name)}),500)}},components:{PropGroup:i(11201).default}},n=(0,i(1001).Z)(r,(function(){var t=this,e=t._self._c;return e("PropGroup",{attrs:{itemId:t.item.id}},[t.isMulti?t._e():[e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.intoReplaceMode.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("propsForEffect.changeMaterial"))+" ")]),t.isXZPro?e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.searchBeLike.apply(null,arguments)}}},[t._v(" 搜索相似 ")]):t._e(),t.isXZPro?e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.searchBeLike.apply(null,arguments)}}},[t._v(" 收藏 ")]):t._e()],t._t("default")],2)}),[],!1,null,"5e160046",null),a=n.exports;const l={components:{ResourceReplace:o.Z,ResourceTopGroup:a},replaceRes:function(){this.$store.commit(s.Ewg,{isPreview:!1}),this.$store.commit(s.eKS,{isShow:!0})},computed:{currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},isEditingPath:function(){return this.$store.state.timeline.pathAnime.isEditingPath},showReplaceBtn:function(){return!(-1!==this.currentSelectedGroupItemIndex&&!this.isEditingPath)},isXZPro:function(){return this.$store.getters.isXZPro}}}}}]);