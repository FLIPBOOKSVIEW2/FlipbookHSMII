"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[8785,1899],{46823:function(t,e,o){o.r(e),o.d(e,{default:function(){return v}});o(57658);var i=o(18023),s=o(11201),n=o(80597),r=o(23448),l=o(2897),a=o(7631),c=o(76558),u={props:{isSameType:{type:Boolean,default:!1},isOnlyUpload:{type:Boolean,default:!1}},components:{PropGroup:s.default,MaskSetting:()=>Promise.resolve().then(o.bind(o,36377)),UploadImageToReplace:a.Z,ImageToBeQRCode:c.Z,FilterVue:()=>o.e(3369).then(o.bind(o,43369))},data(){return{imagesList:[]}},computed:{acceptImageType:function(){return this.$store.getters.acceptImageType},currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},item:function(){return this.$store.getters.currentSelectedItem},isShowMask:{get:function(){return this.item.items.filter((t=>"image"===t.type))[0].isShowMaskImage||!1},set:function(t){this.item.items.forEach((e=>{"image"===e.type&&(e.isShowMaskImage=t)}))}},isShowMaskPanel:{get:function(){return this.$store.state.rightPanel.isShowMaskPanel},set:function(t){this.$store.state.rightPanel.isShowMaskPanel=t}},maskImageFile:function(){return this.item.animationFiles.maskImageFile},maskImg:function(){return`url(${this.maskImageFile.url}) center center/contain no-repeat`},isQRCodeImg:{get:function(){return this.item.items.filter((t=>"image"===t.type))[0].isQRCodeImg},set:function(t){this.item.items.forEach((e=>{"image"===e.type&&(e.isQRCodeImg=t)}))}}},methods:{showMaskPanel:function(){setTimeout((()=>{this.isShowMaskPanel=!this.isShowMaskPanel}))},addMask:function(){this.$store.commit(i.N23,{canUndo:!0}),this.isShowMask||(this.isShowMaskPanel=!1)},delMask:function(){this.$store.commit(i.CjF),this.item.items.forEach((t=>{"image"===t.type&&(t.animationFiles.maskImageFile=new l.E)})),this.$store.commit(i.N23,{canUndo:!0})},saveBeforePage:function(){this.$store.commit(i.CjF)},toQRCodeImg:function(t){this.isQRCodeImg=t}}},p=o(1001),m=(0,p.Z)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-image-setting"},[t.isSameType?t._e():e("PropGroup",{attrs:{title:"rightPanel.image_changeImage_title"}},[e("UploadImageToReplace")],1),t.isOnlyUpload?t._e():e("PropGroup",{attrs:{title:"rightPanel.image_filter"}},[e("FilterVue",{attrs:{showBlackFilter:!1,showRecover:!1}})],1)],1)}),[],!1,null,"1ffe4ebe",null).exports,h=o(66546),f=o(78758),d=o(52948);const g={data(){return{isShowTextStyleTooltip:!1,textStyleTooltip:"",textStyleTooltipPostion:{},textStyleTooltipArrowPosition:"left",toolTipTextOptions:{},fontCssOption:[{tooltips:"propsForText2022_11_07.text3",type:"bold",icon:"BlodIcon"},{tooltips:"propsForText2022_11_07.text4",type:"italic",icon:"ItalicIcon"},{tooltips:"propsForText2022_11_07.text5",type:"underline",icon:"UnderlineIcon"}],textAlignOption:[{tooltips:"propsForText2022_11_07.text6",type:"left",icon:"AlignLeftIcon"},{tooltips:"propsForText2022_11_07.text7",type:"center",icon:"AlignCenterIcon"},{tooltips:"propsForText2022_11_07.text8",type:"right",icon:"AlignRightIcon"}]}},computed:{groupItem:function(){return this.$store.getters.currentSelectedItem},allColorList:function(){const t=new Set,e=["text","button","baseShape","transShape","link","map","svg"];let o=this.groupItem;for(let i=0;i<o.items.length;i++){let s=o.items[i],n=null;if(e.includes(o.items[i].type)){switch(s.type){case"text":n=d.Z.hexToRgba(s.innerTextStyle.color,1),t.add(n);break;case"link":n=d.Z.hexToRgba(s.style.background,1),t.add(n);break;case"baseShape":void 0!==s.backgroundColor&&s.backgroundColor?(n=d.Z.hexToRgba(s.backgroundColor,1),t.add(n)):(n=d.Z.hexToRgba(s.border.color,1),t.add(n));break;case"transShape":let e=s.colours;e>0&&(n=d.Z.hexToRgba(s.fillColor,1),t.add(n)),e>1&&(n=d.Z.hexToRgba(s.fillColor2,1),t.add(n));break;case"svg":"shape"===s.svgClass&&(n=d.Z.hexToRgba(s.colorList[0],1),t.add(n));break;case"button":n=d.Z.hexToRgba(s.buttonBackground.background,1),t.add(n);break;case"map":n=d.Z.hexToRgba(s.routeBgColor,1),t.add(n)}}}return t},isSameColor:function(){return 1===this.allColorList.size}},methods:{showTextStyleTooltip:function(t,e,o,i={}){const s=window.innerWidth,{top:n,left:r,right:l,width:a}=t.target.getBoundingClientRect();this.textStyleTooltip=e,this.textStyleTooltipPostion={top:n,left:r,right:s-l,width:a},this.textStyleTooltipArrowPosition=o,this.isShowTextStyleTooltip=!0}}};var S=o(3956),x=o(13017),y=o(6208),T=o(12915);const w=o(81269);let I={};w.keys().forEach((t=>{const e=w(t),o=t.replace(/^\.\//,"").replace(/\.\w+$/,"");I[o]=e.default||e}));var _={name:"PropsForGroup",mixins:[g,y.j,T.S],data:function(){return{allColor:"",allFamily:"Arial"}},computed:{isMulti:function(){return this.$store.getters.isMulti},groupHasText:function(){let t=this.groupItem;for(let e=0;e<t.items.length;e++)if(["text","group"].includes(t.items[e].type))return!0;return!1},maxFontSize:{get:function(){let t=this.groupItem,e=[];for(let o=0;o<t.items.length;o++)"text"===t.items[o].type&&e.push(parseFloat(t.items[o].innerTextStyle.fontSize));return Math.floor(Math.max(...e))},set:function(t){this.setinnerGroupItemStyle({type:"fontSize",value:t})}},noItemHasColor:function(){let t=this.groupItem;for(let e=0;e<t.items.length;e++){let o=t.items[e].type;if(["text","baseShape","transShape","button","swiper","link","map","svg","fontIcon"].includes(o)||"frames"===o&&t.items[e].hasFillSvg)return!1}return!0},isShowImageSetting:function(){let t=this.groupItem.items.filter((t=>"image"===t.type)),e=!1;return t&&t.length&&(e=!0),e},isShowColorSetting:function(){let t=this.groupItem,e=["text","group","table","foreColor","svg","baseShape","transShape","button","swiper","link","map","fontIcon"];for(let o=0;o<t.items.length;o++)if(e.includes(t.items[o].type))return!0;return!1}},watch:{},methods:{setinnerGroupItemStyle:async function({type:t,value:e,isUpload:o,isTeamResource:s}){if(this.$store.commit(i.CjF),"fontName"===t&&(this.allFamily="[object Object]"!==Object.prototype.toString.call(e)?e:e.value),"color"!==t)(0,x.K)({type:t,value:e,isUpload:o,isTeamResource:s}).finally((()=>{h.Q.$emit(h.Y.TIMELINE_CREATE_ANIME,{isSeekToCurrentSlider:!0}),this.$store.commit(i.N23,{canUndo:!0})}));else{this.allColor=e;let t="foreColor";this.setGroupStyle({type:t,value:e})}},increaseSize:function(){let t=Number(this.maxFontSize)+1;this.setinnerGroupItemStyle({type:"fontSize",value:t})},decreaseSize:function(){let t=Number(this.maxFontSize)-1;t<1&&(t=1),this.setinnerGroupItemStyle({type:"fontSize",value:t})},setGroupStyle({type:t,value:e}){this.$store.commit(i.CjF),(0,S.t)({type:t,value:e}).then((()=>{this.$store.commit(i.N23,{canUndo:!0})}))}},mounted:function(){let t=this.groupItem.items.filter((t=>"text"===t.type));if(t&&t.length){t.every((e=>e.innerTextStyle.fontFamily===t[0].innerTextStyle.fontFamily))&&(this.allFamily=t[0].innerTextStyle.fontFamily)}this.isSameColor&&(this.allColor=this.allColorList.values().next().value)},components:{PropGroup:s.default,ColorPickerV2:n.default,DropdownForFontFamily:r.default,ImageSetting:m,TextStyleTooltip:f.Z,...I},directives:{}},v=(0,p.Z)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"PropsForGroup"},[!t.noItemHasColor||t.groupHasText?e("PropGroup",{attrs:{title:t.groupHasText?"groupStyle_20230725.text1":"groupStyle_20230725.text2"}},[this.groupHasText?e("el-row",[e("DropdownForFontFamily",{attrs:{type:"fontName",value:t.allFamily,maxH:370},on:{getTypeValue:t.setinnerGroupItemStyle}})],1):t._e(),e("el-row",[e("el-col",{staticClass:"selectColor",attrs:{span:5}},[e("div",{staticClass:"selectcolorRow"},[t.noItemHasColor?t._e():e("ColorPickerV2",{attrs:{color:t.allColor,changeCallback:({value:e})=>t.setinnerGroupItemStyle({type:"color",value:e}),isText:!!t.groupHasText,isOtherColor:!0}})],1)]),this.groupHasText?e("el-col",{staticClass:"DropdownFontSize",attrs:{span:11}},[e("el-select",{attrs:{"data-v":"v2","popper-class":"props-select-input-popper",value:t.maxFontSize},on:{change:e=>t.setinnerGroupItemStyle({type:"fontSize",value:e})}},t._l(t.fontSizeOptions,(function(t){return e("el-option",{key:t,attrs:{value:t,label:t}})})),1)],1):t._e(),this.groupHasText?e("el-col",{attrs:{span:8}},[e("el-row",{staticClass:"trunSize_box",attrs:{type:"flex"}},[e("el-row",{staticClass:"trunSize icon-decreaseSize",attrs:{type:"flex",align:"middle",justify:"center"},nativeOn:{click:function(e){return t.decreaseSize()},mouseenter:function(e){t.showTextStyleTooltip(e,t.$t("propsForText2022_11_07.text2"),"right")},mouseleave:function(e){t.isShowTextStyleTooltip=!1}}},[e("el-icon",[e("DecreaseSizeIcon",{tag:"component"})],1)],1),e("el-row",{staticClass:"trunSize icon-increaseSize",attrs:{type:"flex",align:"middle",justify:"center"},nativeOn:{click:function(e){return t.increaseSize()},mouseenter:function(e){t.showTextStyleTooltip(e,t.$t("propsForText2022_11_07.text1"),"right")},mouseleave:function(e){t.isShowTextStyleTooltip=!1}}},[e("el-icon",[e("IncreaseSizeIcon",{tag:"component"})],1)],1)],1)],1):t._e()],1),this.groupHasText?e("el-row",{staticClass:"text_row",attrs:{type:"flex"}},[e("el-row",{staticClass:"fontCss fontCss_box",attrs:{type:"flex"}},t._l(t.fontCssOption,(function(o,i){return e("div",{key:i,staticClass:"cssBox",on:{click:function(e){return t.setGroupStyle({type:o.type})},mouseenter:function(e){t.showTextStyleTooltip(e,t.$t(o.tooltips),"center")},mouseleave:function(e){t.isShowTextStyleTooltip=!1}}},[e("el-icon",[e(o.icon,{tag:"component"})],1)],1)})),0),e("el-row",{staticClass:"fontCss fontCss_box",attrs:{type:"flex"}},t._l(t.textAlignOption,(function(o,i){return e("div",{key:i,staticClass:"cssBox",on:{click:function(e){return t.setinnerGroupItemStyle({type:"textAlign",value:o.type})},mouseenter:function(e){t.showTextStyleTooltip(e,t.$t(o.tooltips),"right")},mouseleave:function(e){t.isShowTextStyleTooltip=!1}}},[e("el-icon",[e(o.icon,{tag:"component"})],1)],1)})),0)],1):t._e()],1):t._e(),t.isShowImageSetting?e("ImageSetting"):t._e(),e("TextStyleTooltip",{directives:[{name:"show",rawName:"v-show",value:t.isShowTextStyleTooltip,expression:"isShowTextStyleTooltip"}],attrs:{tooltipText:t.textStyleTooltip,tooltipTextPostion:t.textStyleTooltipPostion,arrowPosition:t.textStyleTooltipArrowPosition}})],1)}),[],!1,null,"438f4dfc",null).exports},94101:function(t,e,o){o.d(e,{Z:function(){return l}});var i=o(18023),s=o(76748),n={name:"ResourceReplace",props:{text:{type:String,default:s.ag.t("propsForEffect.changeMaterial")}},data(){return{}},computed:{currentSelectedItem:function(){return this.$store.getters.currentSelectedItem}},methods:{intoReplaceMode(){if(this.currentSelectedItem.isAsyncItem)return this.$message.warning(this.$t("asyncItem_20240318.text4"));this.$store.commit(i.Ewg,{isPreview:!1}),this.$store.commit(i.eKS,{isShow:!0})}},components:{ReplaceIcon:()=>o.e(4210).then(o.bind(o,74210))}},r=(0,o(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.intoReplaceMode.apply(null,arguments)}}},[e("el-icon",{staticStyle:{"margin-right":"5px"},attrs:{size:14}},[e("ReplaceIcon")],1),t._v(" "+t._s(t.text)+" ")],1)}),[],!1,null,"cc0535a6",null),l=r.exports},78758:function(t,e,o){o.d(e,{Z:function(){return s}});var i={name:"TextStyleTooltip",components:{},data(){return{tooltipTextStyle:{}}},mounted(){},methods:{setTooltipPosition:function(t){switch(this.arrowPosition){case"center":this.tooltipTextStyle={left:`${t.left+t.width/2}px`,top:`${t.top}px`};break;case"left":this.tooltipTextStyle={left:`${t.left}px`,top:`${t.top}px`};break;case"right":this.tooltipTextStyle={right:`${t.right}px`,top:`${t.top}px`}}}},computed:{},props:["tooltipText","tooltipTextPostion","arrowPosition","isCustomText","placement"],watch:{tooltipTextPostion:function(t){0!==Object.keys(t).length&&this.setTooltipPosition(t)}}},s=(0,o(1001).Z)(i,(function(){var t=this,e=t._self._c;return e("div",{ref:"TextStyleTooltip",staticClass:"TextStyleTooltip",class:{"arrow-left":"left"===this.arrowPosition,"arrow-right":"right"===this.arrowPosition,"arrow-center":"center"===this.arrowPosition,"arrow-bottom":"bottom"===this.placement},style:t.tooltipTextStyle},[e("div",{staticClass:"text-style-tooltip"},[t.isCustomText?t._e():e("span",{staticClass:"tooltip-text-content"},[t._v(" "+t._s(t.tooltipText)+" ")]),t._t("custom-tooltip"),e("div",{ref:"tooltipArrow",staticClass:"tooltip-arrow"})],2)])}),[],!1,null,"031ee10c",null).exports},12915:function(t,e,o){o.d(e,{S:function(){return a}});var i=o(18023),s=o(94101),n={name:"ResourceTopGroup",data(){return{}},computed:{pathAnime:function(){return this.$store.state.timeline.pathAnime},pathItemSelectedIndex:function(){return this.pathAnime.pathItemSelectedIndex},item:function(){return-1!==this.pathItemSelectedIndex?this.$store.getters.currentSelectedPathItem:this.$store.getters.currentSelectedItem},isXZPro:function(){return this.$store.getters.isXZPro},isMulti:function(){return this.$store.getters.isMulti}},methods:{intoReplaceMode(){this.$store.commit(i.Ewg,{isPreview:!1}),this.$store.commit(i.eKS,{isShow:!0})},searchBeLike:function(){this.$store.commit(i.$8l,{menu:"material"}),this.isShowSearchPanel=!0,setTimeout((()=>{eventBus.$emit(busType.SEARCH_SIMILARITY,this.item.name)}),500)}},components:{PropGroup:o(11201).default}},r=(0,o(1001).Z)(n,(function(){var t=this,e=t._self._c;return e("PropGroup",{attrs:{itemId:t.item.id}},[t.isMulti?t._e():[e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.intoReplaceMode.apply(null,arguments)}}},[t._v(" "+t._s(t.$t("propsForEffect.changeMaterial"))+" ")]),t.isXZPro?e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.searchBeLike.apply(null,arguments)}}},[t._v(" 搜索相似 ")]):t._e(),t.isXZPro?e("el-row",{staticClass:"editor_v2_white_btn",nativeOn:{click:function(e){return t.searchBeLike.apply(null,arguments)}}},[t._v(" 收藏 ")]):t._e()],t._t("default")],2)}),[],!1,null,"5e160046",null),l=r.exports;const a={components:{ResourceReplace:s.Z,ResourceTopGroup:l},replaceRes:function(){this.$store.commit(i.Ewg,{isPreview:!1}),this.$store.commit(i.eKS,{isShow:!0})},computed:{currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},isEditingPath:function(){return this.$store.state.timeline.pathAnime.isEditingPath},showReplaceBtn:function(){return!(-1!==this.currentSelectedGroupItemIndex&&!this.isEditingPath)},isXZPro:function(){return this.$store.getters.isXZPro}}}}}]);