"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[94],{20094:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var r=i(74798),n=i.n(r),o=i(66546),c={name:"AudioQrcode",data(){return{audioQRCode:""}},props:{currentMusicSrc:{type:String,required:!1,desc:"当前正在播放的音频链接",default:""},item:{type:Object,required:!0}},beforeDestroy:function(){o.Q.$off("SET_PLUGINMUSIC_QRCODE")},mounted(){this.createQrcode(),this.setMusicConfig()},computed:{qrcodeForeground:function(){return this.item.qrcodeForeground},qrcodeBackground:function(){return this.item.qrcodeBackground},musicSkin:{get:function(){return this.item.musicSkin},set:function(t){this.item.musicSkin=Number.parseInt(t)}}},methods:{createQrcode:function(){if(!this.currentMusicSrc)return;const t=this.handleProtocol(this.currentMusicSrc);let e=new(n())({content:t,padding:0,width:60,height:60,ecl:"M",xmlDeclaration:!1,color:this.qrcodeForeground,background:this.qrcodeBackground}).svg();e=e.replace(/<\?xml.*?>/,""),e=e.replace(/<svg.*?>/,"").replace(/<\/svg>/,""),this.audioQRCode=e,this.item.style.height=this.item.style.width},handleProtocol:function(t){const e=t.indexOf("http://"),i=t.indexOf("https://"),r=t.indexOf("//");let n=t;return-1===e&&-1===i&&(-1===r&&(n=`https://${t}`),-1!==r&&(n=`https:${t}`)),n},setMusicConfig:function(){o.Q.$on("SET_PLUGINMUSIC_QRCODE",(t=>{t.item.id===this.item.id&&this.createQrcode()}))}},watch:{currentMusicSrc:function(t,e){t!==e&&(t||(this.musicSkin=1),this.createQrcode())}}},s=(0,i(1001).Z)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"AudioQrcode"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:v":"http://schemas.microsoft.com/visio/2003/SVGExtensions/",viewBox:"0 0 60 60",width:"100%",height:"100%",preserveAspectRatio:"none"}},[e("g",{domProps:{innerHTML:t._s(t.audioQRCode)}})])])}),[],!1,null,"21d2d55b",null).exports}}]);