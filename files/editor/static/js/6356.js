"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[6356],{46356:function(t,e,i){i.r(e),i.d(e,{default:function(){return u}});var a=i(82958),s=i(94414),n=i(22582),l=i(24118),o=i(74463),c=i(1585),r={name:"AttachmentFile",components:{Lightbox:a.default,FileIcon:()=>i.e(1927).then(i.bind(i,91927)),DeleteIcon:()=>Promise.resolve().then(i.bind(i,31680)),CloseIcon:()=>i.e(5376).then(i.bind(i,95376))},mixins:[c.Z],data(){return{uploadPercentage:0,uploadStatus:"success",uploadStatusCode:"",isUploading:!1,isShowUploadFailLightBox:!1,isShowTitleTips:!1}},mounted(){},methods:{uploadFileSuccess:function(t,e,i){if(this.attachmentFileName=e.name,this.uploadStatus=e.status,this.uploadPercentage=e.percentage,this.uploadStatusCode=t.status,this.attachmentFileIsNewFile=!0,this.isUploading=!1,"1"===t.status.toString()){if(this.isFlipPro){const e=l.Z.getPathFilename(t.filePath);this.attachmentFileFileName=e,this.attachmentFileUrl=t.filePath}else this.attachmentFileFileName=t.fileName,this.attachmentFileUrl=t.fileSrc;this.saveUndo()}else this.deleteUploadFile(),this.isShowUploadFailLightBox=!0},uploadFileProgress:function(t,e,i){this.isUploading=!0,this.attachmentFileName=e.name,this.uploadStatus=e.status,this.uploadPercentage=e.percentage},deleteUploadFile:function(t){t&&this.saveBeforePage(),this.isUploading&&this.$refs.attachmentFileUpload.abort(),this.attachmentFileUrl="",this.attachmentFileName="",this.attachmentFileFileName="",this.attachmentFileIsNewFile=!0,this.isUploading=!1,t&&this.saveUndo()},cancelUpload:function(){this.isUploading=!1,this.$refs.attachmentFileUpload.abort(),this.deleteUploadFile()},uploadFileFail:function(){this.isUploading=!1,this.deleteUploadFile(),this.$message({showClose:!0,message:this.$t("attachmentFile2022_12_15.text4"),type:"error",duration:3e3})},beforeUploadFile:function(t){this.saveBeforePage();const e=t.name,i=l.Z.getPathFileSuffix(e);if(!["pdf","doc","docx","ppt","pptx","mp3","mp4","png","jpg","jpeg","gif","svg","tif","csv","webp","rar","zip"].includes(i))return this.isShowUploadFailLightBox=!0,!1;this.deleteUploadFile()}},computed:{uploadData:function(){return new o.Yo},uploadInterface:function(){return`${this.$store.getters.host}/${s.C.uploadTemporaryResource}`},extFilePath:function(){return this.$store.getters.extFilePath},currentSelectedItem:function(){return this.$store.getters.currentSelectedItem},currentActionList:function(){return this.currentSelectedItem.actionList[this.actionListIndex]},gradientColor:function(){return(0,n.b)()},attachmentFileUrl:{get:function(){return this.currentActionList.attachmentFile.fileObject.url},set:function(t){this.currentActionList.attachmentFile.fileObject.url=t}},attachmentFileName:{get:function(){return this.currentActionList.attachmentFile.fileObject.name},set:function(t){this.currentActionList.attachmentFile.fileObject.name=t}},attachmentFileFileName:{get:function(){return this.currentActionList.attachmentFile.fileObject.fileName},set:function(t){this.currentActionList.attachmentFile.fileObject.fileName=t}},attachmentFileIsNewFile:{get:function(){return this.currentActionList.attachmentFile.fileObject.isNewFile},set:function(t){this.currentActionList.attachmentFile.fileObject.isNewFile=t}},uploadProgressStyle:function(){let t={background:"",color:""};return"success"!==this.uploadStatus&&(t.background=`linear-gradient(to right, ${this.gradientColor} ${this.uploadPercentage}%, rgb(255, 255, 255) ${this.uploadPercentage}%, rgb(255, 255, 255) 100%`,t.color="#ffffff"),t},isYZPro:function(){return this.$store.getters.isYZPro},isFlipPro:function(){return this.$store.getters.isFlipPro}},props:["actionListIndex"]},u=(0,i(1001).Z)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"AttachmentFile group"},[e("div",{staticClass:"action-group item-group"},[e("div",{staticClass:"upload-button"},[e("el-upload",{ref:"attachmentFileUpload",staticClass:"props_el-upload-width100",attrs:{action:t.uploadInterface,"show-file-list":!1,"on-success":t.uploadFileSuccess,"on-progress":t.uploadFileProgress,"on-error":t.uploadFileFail,data:t.uploadData,"before-upload":t.beforeUploadFile}},[e("el-tooltip",{attrs:{placement:"top-end",enterable:!1,"open-delay":800}},[e("div",{staticClass:"title-tips",staticStyle:{"max-width":"300px"},attrs:{slot:"content"},slot:"content"},[e("span",[t._v(t._s(t.$t("attachmentFile2022_12_15.text6")))]),e("span",{style:{"font-style":"italic"}},[t._v(t._s(t.$t("attachmentFile2022_12_15.text9")))]),e("span",[t._v(t._s(t.$t("attachmentFile2022_12_15.text10")))]),e("div",[e("span",[t._v(t._s(t.$t("attachmentFile2022_12_15.text12")))]),e("span",[t._v(t._s(t.$t("attachmentFile2022_12_15.text13")))])])]),e("button",{staticClass:"btn btn-white"},[t._v(" "+t._s(t.$t("attachmentFile2022_12_15.text5"))+" ")])])],1)],1),e("div",{staticClass:"upload-file-list"},[t.attachmentFileName?e("el-row",{staticClass:"file-row",attrs:{type:"flex",justify:"center",align:"middle"}},[t.isUploading?e("span",{staticClass:"loadingBox"}):t._e(),e("div",{staticClass:"file-name",attrs:{title:t.attachmentFileName}},[t._v(" "+t._s(t.attachmentFileName)+" ")]),e("el-tooltip",{attrs:{content:t.$t("Properites_vue.text9"),placement:"top","open-delay":800}},[t.isUploading?t._e():e("div",{staticClass:"delete-button",on:{click:function(e){return t.deleteUploadFile(!0)}}},[e("el-icon",[e("DeleteIcon",{tag:"component"})],1)],1)]),e("el-tooltip",{attrs:{content:t.$t("ImageWall_vue.text2"),placement:"top","open-delay":800}},[t.isUploading?e("div",{staticClass:"cancel-button",on:{click:t.cancelUpload}},[e("el-icon",[e("CloseIcon",{tag:"component"})],1)],1):t._e()])],1):e("el-row",{staticClass:"emptyMusicList",attrs:{type:"flex",align:"middle",justify:"center"}},[e("el-icon",[e("FileIcon",{tag:"component"})],1),e("span",[t._v(t._s(t.$t("attachmentFile2022_12_15.NoFile")))])],1)],1)]),t.isShowUploadFailLightBox?e("Lightbox",{attrs:{isShow:t.isShowUploadFailLightBox,modalType:"Confirm",isAutoWidth:!0,showConfirm:!0,isConfirm:!0,title:t.$t("attachmentFile2022_12_15.text8")},on:{"update:isShow":function(e){t.isShowUploadFailLightBox=e},"update:is-show":function(e){t.isShowUploadFailLightBox=e}}},[e("span",{staticClass:"upload-fail-tips"},[t._v(" "+t._s(t.$t("attachmentFile2022_12_15.text7"))+" ")])]):t._e()],1)}),[],!1,null,"ebff88e4",null).exports},22582:function(t,e,i){i.d(e,{b:function(){return a}});i(11721);function a(){return"#0099ff"}}}]);