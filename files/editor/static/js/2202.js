"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[2202],{32202:function(t,s,i){i.r(s),i.d(s,{default:function(){return r}});i(57658);var e=i(18023),n=i(66546),o=i(40550),a={components:{PropGroup:()=>Promise.resolve().then(i.bind(i,11201)),PropsSwitch:()=>Promise.resolve().then(i.bind(i,69361)),Lightbox:()=>Promise.resolve().then(i.bind(i,25986)),InfoTipsIcon:()=>i.e(3352).then(i.bind(i,83352)),PropsInput:()=>i.e(9706).then(i.bind(i,49706)),ChangeAsyncPageNumber:()=>i.e(4737).then(i.bind(i,64737))},computed:{item:function(){return this.$store.getters.currentSelectedItem},currentPageIndex:function(){return this.$store.state.pagePanel.currentIndex},pages:function(){return this.$store.state.pagePanel.pages},disabledVal:function(){return!(this.item.isAsyncItem||!this.$store.state.doublePage.isDoubleEdit)},descTips:function(){return this.disabledVal?this.$t("addDoublePage_20241022.text34"):this.$t("asyncItem_20240318.text7")},isDoubleEdit:function(){return this.$store.state.doublePage.isDoubleEdit},pagesLength:function(){let t=this.pages.length;return this.isDoubleEdit&&(t=this.pages[t-1].isSinglePage?2+2*(t-2):1+2*(t-1)),t}},data(){return{isSetAsync:!1,isCustomPage:0,isShowAsyncItem:!1,customPage:"",isOutRangePage:!1,isNegative:!1,isNullCustomPage:!1,copyPagesIsillegal:!1,isForbidConfirm:!0,isShowPaginationTip:!1,asyncItemPagesArr:[],isThan:!1,isShowCloseTip:!1,asyncArray:[]}},mounted(){this.initAsyncItem()},watch:{isCustomPage:function(t){if(1===t){this.item.isCustomPage=t;let s=[],i=this.$store.state.pagePanel.pages.length;for(let t=0;t<i;t++)s.push(t);this.item.asyncArray=s,this.item.asyncLot||this.$store.commit(e.lMh,{item:this.item,isFirst:!0})}else this.customPage=this.item.customPage,this.item.isCustomPage=t,this.item.customPage&&(this.isForbidConfirm=!1,this.customAsyncItem())},item:function(t){this.initAsyncItem()},isShowAsyncItem:function(t){t&&(this.customPage?this.changeCustomPage():this.isForbidConfirm=!0)}},methods:{initAsyncItem:function(){this.item.customPage&&2===this.item.isCustomPage&&(this.isForbidConfirm=!1),this.isSetAsync=this.item.isAsyncItem,this.isCustomPage=this.item.isCustomPage,this.customPage=this.item.customPage},judgeConfirm:function(){let t=!1;(this.copyPagesIsillegal||this.isNullCustomPage)&&(t=!0),this.isForbidConfirm=t},judeIncludeCurPage:function(t){this.customPage&&(this.item.isCustomPage=this.isCustomPage);let s=this.currentPageIndex;if(this.isDoubleEdit&&0!==s){let t="left";this.item.asyncLot||(t=(0,o.HZ)(this.item)),s=this.item.isAsyncRight||"right"===t?2*this.currentPageIndex:2*this.currentPageIndex-1}t.includes(s)?this.isShowPaginationTip=!1:this.isShowPaginationTip=!0,this.judgeConfirm()},changeCustomPage:function(){let t=2===this.isCustomPage?this.customPage:this.startPage+"-"+this.endPage;if(t?this.isNullCustomPage=!1:(this.isNullCustomPage=!0,this.judgeConfirm()),t&&!/^((\d+(,|，))|(\d+(-|-)\d+(,|，)))*?(\d+|\d+(-|-)\d+)$/.test(t))return this.isShowPaginationTip=!1,this.copyPagesIsillegal=!0,void this.judgeConfirm();if(this.formatError=!1,this.copyPagesIsillegal=!1,this.isShowPaginationTip=!1,this.judgeConfirm(),t){let{copyPagesIsillegal:s,asyncArray:i}=(0,o.Mm)({inputVal:t,currentItem:this.item,total:this.pagesLength}),e=i;if(this.copyPagesIsillegal=s,this.judgeConfirm(),!e||this.copyPagesIsillegal)return void(this.showChangePagination=!0);e&&(e=e&&e.map((function(t){return t-=1,parseInt(t)})),e.sort((function(t,s){return t-s})),e=Array.from(new Set(e)),this.asyncArray=e,this.judeIncludeCurPage(e))}},switchChange:function(t){t&&(this.item.hasOwnProperty("isAsyncItem")?(this.isSetAsync=t,this.item.isAsyncItem=this.isSetAsync):this.$set(this.item,"isAsyncItem",this.isSetAsync),this.item.asyncLot&&this.$store.commit(e.N23,{canUndo:!0})),!t&&this.item.asyncArray&&this.item.asyncArray.length>1?this.isShowCloseTip=!0:(this.isSetAsync=t,this.item.isAsyncItem=t,this.$store.commit(e.N23,{canUndo:!0}))},changePage:function(){this.isShowAsyncItem=!0,this.customPage=this.item.customPage},customAsyncItem:function(){let{copyPagesIsillegal:t,asyncArray:s}=(0,o.Mm)({inputVal:this.customPage,currentItem:this.item,total:this.pagesLength});this.copyPagesIsillegal=t,this.judgeConfirm(),s&&(s=s&&s.map((function(t){return t-=1,parseInt(t)})),s.sort((function(t,s){return t-s})),s=Array.from(new Set(s)),this.asyncArray=s,this.item.asyncArray=s,this.$store.commit(e.ZDY,{showArr:this.asyncArray,curItem:Object.assign(this.item,{customPage:this.customPage})}))},confirmFn:function(){this.item.asyncArray=this.asyncArray,this.item.customPage=this.customPage,this.item.asyncLot?(this.customAsyncItem(),this.$store.commit(e.ZDY,{showArr:this.asyncArray,curItem:Object.assign(this.item,{customPage:this.customPage})}),this.$store.commit(e.N23,{canUndo:!0})):this.$store.commit(e.lMh,{item:this.item,isFirst:!0})},closePage:function(){this.isShowAsyncItem=!1,this.isShowPaginationTip=!1,this.formatError=!1,this.copyPagesIsillegal=!1},confirmCloseAsync:function(){this.item.asyncLot&&(this.item.isAsyncItem=!1,this.$store.commit(e.GMs,{curItem:this.item})),this.isShowCloseTip=!1,this.isSetAsync=!1,this.$store.commit(e.N23,{canUndo:!0})},closeAsyncItem:function(){this.isSetAsync=!0,this.isShowCloseTip=!1},delAsyncItem:function(t){t.preventDefault(),this.$store.commit(e.CjF),n.Q.$emit(n.Y.KEYDOWN_DELETE)},isConfirm:function(t,s,i){this.isForbidConfirm=t,this.customPage=s,this.asyncArray=i},changeCustomPageType:function(t){this.$store.commit(e.nFE,{unSavedStatus:!0,isUpdatePage:!1})}}},c=(0,i(1001).Z)(a,(function(){var t=this,s=t._self._c;return s("PropGroup",{staticClass:"AsyncItemBox"},[s("PropsSwitch",{attrs:{title:t.$t("asyncItem_20240318.text13"),descTips:t.$t("asyncItem_20240318.text7"),isManualOperation:!0,isBold:!0,value:t.isSetAsync,disabled:t.item.isBGI},on:{"update:value":function(s){t.isSetAsync=s},change:t.switchChange}}),t.isSetAsync?s("div",{staticClass:"async-item-content"},[s("el-radio-group",{staticClass:"page-radio",attrs:{role:"radiogroup"},on:{input:t.changeCustomPageType},nativeOn:{keydown:[function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"delete",[8,46],s.key,["Backspace","Delete","Del"])?null:(s.preventDefault(),t.delAsyncItem.apply(null,arguments))},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"d",void 0,s.key,void 0)?null:s.shiftKey?(s.preventDefault(),t.delAsyncItem.apply(null,arguments)):null}]},model:{value:t.isCustomPage,callback:function(s){t.isCustomPage=s},expression:"isCustomPage"}},[s("el-row",[s("el-radio",{staticClass:"mb-20",attrs:{"data-v":"v2",label:1}},[s("span",[t._v(t._s(t.$t("pagination_20230901.text16")))])])],1),s("el-row",[s("el-radio",{attrs:{"data-v":"v2",label:2}},[s("div",{staticClass:"page-start-end"},[s("span",{staticClass:"page-title"},[t._v(t._s(t.$t("pagination_20230901.text12")))])])])],1),s("el-row",[2===t.isCustomPage?s("el-button",{staticClass:"page-btn",attrs:{title:t.$t("pagination_20230901.text19")},on:{click:t.changePage}},[t._v(t._s(t.$t("pagination_20230901.text19")))]):t._e()],1)],1)],1):t._e(),t.isShowAsyncItem?s("Lightbox",{attrs:{isShow:t.isShowAsyncItem,modalType:"Confirm",showConfirm:!0,customStyle:{"max-width":"483px"},confirmCallBack:t.confirmFn,forbidConfirm:t.isForbidConfirm,closeCallBack:t.closePage},on:{"update:isShow":function(s){t.isShowAsyncItem=s},"update:is-show":function(s){t.isShowAsyncItem=s}},scopedSlots:t._u([{key:"title",fn:function(){return[s("el-row",{staticClass:"async_title_row",attrs:{type:"flex",align:"middle"}},[s("span",{staticClass:"async_title"},[t._v(t._s(t.$t("pagination_20230901.text20")))]),s("el-tooltip",{attrs:{placement:"top","open-delay":800},scopedSlots:t._u([{key:"content",fn:function(){return[s("div",{staticClass:"page-input-tip"},[t._v(t._s(t.$t("asyncItem_20240318.text12")))])]},proxy:!0}],null,!1,2599065048)},[s("el-icon",{staticStyle:{"font-size":"14px",color:"#bbb"}},[s("InfoTipsIcon",{tag:"component"})],1)],1)],1)]},proxy:!0}],null,!1,1291541734)},[s("ChangeAsyncPageNumber",{on:{isConfirm:t.isConfirm}})],1):t._e(),t.isShowCloseTip?s("Lightbox",{attrs:{isShow:t.isShowCloseTip,title:t.$t("ApplyTemplateTips_vue.text1"),modalType:"Confirm",showConfirm:!0,customStyle:{"max-width":"483px"},confirmCallBack:t.confirmCloseAsync,closeCallBack:t.closeAsyncItem},on:{"update:isShow":function(s){t.isShowCloseTip=s},"update:is-show":function(s){t.isShowCloseTip=s}}},[s("div",{staticClass:"close-tip-box"},[t._v(t._s(t.$t("asyncItem_20240318.text6")))])]):t._e()],1)}),[],!1,null,"3c378852",null),r=c.exports}}]);