self.onmessage=function(e){const{data:t}=e.data;(function(e="pagebackup",t="lastSave",o="1",s="bookid"){if(!e)return Promise.reject("CREATE ERROR! DBNAME IS REQUIREDï¼");this._database=e,this._versionName=o,this._storeName=t,this._keyPath=s;const n=("object"==typeof window?window.indexedDB:webkitIndexedDB).open(e,o);return new Promise(((e,o)=>{n.onerror=e=>{o(`CREATE ERROR! ${e.target.error}`)},n.onsuccess=t=>{this._db=t.target.result,e(this._db)},n.onupgradeneeded=e=>{const o=e.target.result;o.objectStoreNames.contains(t)||o.createObjectStore(t,{keyPath:s})}}))})().then((e=>{})),self.close()};