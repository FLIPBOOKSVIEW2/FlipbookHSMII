"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[2901,7713,578],{57246:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});i(57658);var s=i(18023),n=i(25986),o=i(49202),a=i.n(o),r=(i(71637),i(71741)),l=i(20578),c=i(91347),u=i(56202),p=i(1585),d=i(24118),h={name:"quizEditor",mixins:[p.Z],data(){return{dragOptions:{animation:200,disabled:!1,ghostClass:"ghost"},quizList:[],maxLength:200}},computed:{typeOptions(){return[{value:"single",label:this.$t("quiz.single")},{value:"multiple",label:this.$t("quiz.multiple")}]},curActionListIndex:{get:function(){return this.$store.state.rightPanel.curActionListIndex},set:function(t){this.$store.state.rightPanel.curActionListIndex=t}},isShowQuizEditor:{get:function(){return this.$store.state.rightPanel.isShowQuizEditor},set:function(t){this.$store.state.rightPanel.isShowQuizEditor=t}},quizTempOpts:{get:function(){return this.$store.state.rightPanel.quizTempOpts},set:function(t){this.$store.state.rightPanel.quizTempOpts=t}}},mounted(){this.quizList=this.quizTempOpts.quizList,0===this.quizList.length&&this.addQuiz()},methods:{listChange(){},optionsChange(){},addQuiz(){this.quizList.push({type:"single",question:this.$t("quiz.untitledQuestion"),options:[{value:`${this.$t("quiz.Option")}1`,isCorrect:!0},{value:`${this.$t("quiz.Option")}2`,isCorrect:!1}]}),this.$nextTick((async()=>{await this.$nextTick(),this.$refs["questionInput_"+(this.quizList.length-1)][0].focus(),this.$refs["questionInput_"+(this.quizList.length-1)][0].select()}))},closeQuizEditor(){this.isShowQuizEditor=!1},onChangeType(t,e){t.type=e},changeKey(t,e){"single"===t.type?(t.options.forEach((t=>{t.isCorrect=!1})),e.isCorrect=!0):e.isCorrect=!e.isCorrect},addOption(t,e,i){t.options.length>=8||(t.options.push({value:`${this.$t("quiz.Option")} ${t.options.length+1}`,isCorrect:!1}),this.$nextTick((async()=>{await this.$nextTick(),this.$refs[`optionInput_${e}_${t.options.length-1}`][0].focus(),this.$refs[`optionInput_${e}_${t.options.length-1}`][0].select();const s=this.$refs.scrollbarContainer,n=i.target;n.offsetTop>s.scrollTop+s.offsetHeight&&n.scrollIntoView({behavior:"smooth",block:"end",inline:"end"})})))},removeOption(t,e){t.options.length<=2||(t.options=t.options.filter((t=>t!==e)))},getSelectComponet(t){switch(t){case"single":return"radio";case"multiple":return"checkbox"}},removeQuiz(t){this.quizList=this.quizList.filter((e=>e!==t)),0===this.quizList.length&&this.addQuiz()},clickConfirm(){this.quizTempOpts.quizList=this.quizList,this.actionList[this.curActionListIndex].quiz=d.Z.copy(this.quizTempOpts,!0),this.quizTempOpts={},this.$store.commit(s.nFE,{unSavedStatus:!0,isUpdatePage:!0}),this.closeQuizEditor(),this.saveUndo()}},components:{Lightbox:n.default,draggable:a(),IconTrash:r.Z,RankIcon:l.default,CustomSelect:u.default,ExactnessIcon:c.Z}},g=(0,i(1001).Z)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"quizEditor"},[e("Lightbox",{attrs:{title:t.$t("quiz.editorMsg"),isShow:!0,customWidth:680,forbidClickBg:!0,showConfirm:!0,customStyle:{backgroundColor:"#F7F7F7"},closeCallBack:t.closeQuizEditor,confirmCallBack:t.clickConfirm}},[e("div",{staticClass:"quizEditor-content"},[e("div",{ref:"scrollbarContainer",staticClass:"h-[670px] scrollbar-container"},[e("div",{staticClass:"quiz_list"},[e("draggable",t._b({staticClass:"draggablePanel flex flex-col gap-y-2.5",attrs:{group:"outer-group","scroll-sensitivity":50,"scroll-speed":10,handle:".outer_drag_icon","force-fallback":!0},on:{change:t.listChange},model:{value:t.quizList,callback:function(e){t.quizList=e},expression:"quizList"}},"draggable",t.dragOptions,!1),t._l(t.quizList,(function(i,s){return e("div",{key:s,staticClass:"quiz_item"},[e("div",{staticClass:"quiz_item_header flex justify-between items-center"},[e("div",{staticClass:"header_title flex items-center gap-x-1.5"},[e("div",{staticClass:"outer_drag_icon cursor-move"},[e("el-icon",{staticStyle:{"pointer-events":"none"},attrs:{size:14}},[e("RankIcon",{tag:"component"})],1)],1),e("span",{staticClass:"title_text whitespace-nowrap"},[t._v(" "+t._s(`${t.$t("quiz.page")}${s+1}: `)+" ")]),e("custom-select",{attrs:{value:i.type,options:t.typeOptions,moreWidth:40,placement:"bottom-start"},on:{change:function(e){return t.onChangeType(i,e)}},scopedSlots:t._u([{key:"default",fn:function({visible:s}){return[e("div",{staticClass:"type_text h-full w-full flex items-center justify-center gap-x-1.5 cursor-pointer"},[e("span",[t._v(t._s(t.typeOptions.find((t=>t.value===i.type)).label))]),e("span",{staticClass:"el-icon-arrow-up toggle_icon",class:{"is-reverse":s}})])]}}],null,!0)})],1),e("el-tooltip",{attrs:{content:t.$t("quiz.removeQuestion"),enterable:!1,placement:"top",transition:"none"}},[e("div",{staticClass:"delete_btn flex items-center cursor-pointer",on:{click:function(e){return t.removeQuiz(i)}}},[e("el-icon",{attrs:{size:14}},[e("IconTrash",{tag:"component"})],1)],1)])],1),e("div",{staticClass:"quiz_item_content"},[e("div",{staticClass:"question_content relative"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:i.question,expression:"item.question"}],ref:`questionInput_${s}`,refInFor:!0,staticClass:"custom-textarea bg-[#fcfcfc] p-2.5 text-[13px] block w-full",attrs:{rows:3,type:"textarea",maxlength:t.maxLength,placeholder:t.$t("quiz.question")},domProps:{value:i.question},on:{input:function(e){e.target.composing||t.$set(i,"question",e.target.value)}}}),t._v(" "),e("span",{staticClass:"absolute text-[12px] text-[#909399] right-[10px] bottom-[5px]"},[t._v(t._s(i.question.length)+"/"+t._s(t.maxLength))])]),e("div",{staticClass:"options_content"},[e("draggable",t._b({staticClass:"draggablePanel",attrs:{group:`inner-group${s}`,"scroll-sensitivity":50,"scroll-speed":10,"force-fallback":!0,handle:".inner_drag_icon"},on:{change:t.optionsChange},model:{value:i.options,callback:function(e){t.$set(i,"options",e)},expression:"item.options"}},"draggable",t.dragOptions,!1),t._l(i.options,(function(n,o){return e("div",{key:o,staticClass:"option_item flex items-center gap-x-2.5"},[e("div",{staticClass:"inner_drag_icon cursor-move"},[e("el-icon",{staticStyle:{"pointer-events":"none"},attrs:{size:14}},[e("RankIcon",{tag:"component"})],1)],1),e("el-tooltip",{attrs:{content:t.$t("quiz.markAsCorrect"),placement:"top",enterable:!1,transition:"none"}},[e("div",{staticClass:"option_item_icon cursor-pointer",class:{isSingle:"single"===i.type,isMultiple:"multiple"===i.type,isCorrect:n.isCorrect},on:{click:function(e){return t.changeKey(i,n)}}},[n.isCorrect?e("el-icon",{attrs:{size:16}},[e("ExactnessIcon",{tag:"component"})],1):t._e()],1)]),i.options.length>2?e("el-tooltip",{attrs:{content:t.$t("quiz.removeOption"),placement:"top",enterable:!1,transition:"none"}},[e("div",{staticClass:"option_item_remove",on:{click:function(e){return t.removeOption(i,n)}}},[e("i",{staticClass:"el-icon-close"})])]):t._e(),e("span",[t._v(t._s(String.fromCharCode(65+o))+".")]),e("input",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"selectItem.value"}],ref:`optionInput_${s}_${o}`,refInFor:!0,staticClass:"custom-input flex-1 px-2.5 text-[13px] bg-[#fcfcfc]",domProps:{value:n.value},on:{input:function(e){e.target.composing||t.$set(n,"value",e.target.value)}}})],1)})),0)],1),e("div",{staticClass:"quiz_item_footer"},[e("div",{staticClass:"add_option",class:{disabled:i.options.length>=8},on:{click:function(e){return t.addOption(i,s,e)}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("quiz.addOption"))+" ")])])])])})),0)],1),e("div",{staticClass:"editor_v2_white_btn add_quiz",on:{click:t.addQuiz}},[t._v(" "+t._s(t.$t("quiz.addNextPageQuestion"))+" ")])])])])],1)}),[],!1,null,"6bb1fc8b",null).exports},20578:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var s=(0,i(1001).Z)({},(function(){var t=this._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 6 14",fill:"none"}},[t("path",{attrs:{d:"M0 1C0 0.447715 0.447715 0 1 0C1.55228 0 2 0.447715 2 1C2 1.55228 1.55228 2 1 2C0.447715 2 0 1.55228 0 1Z",fill:"currentColor"}}),t("path",{attrs:{d:"M0 5C0 4.44772 0.447715 4 1 4C1.55228 4 2 4.44772 2 5C2 5.55228 1.55228 6 1 6C0.447715 6 0 5.55228 0 5Z",fill:"currentColor"}}),t("path",{attrs:{d:"M0 9C0 8.44772 0.447715 8 1 8C1.55228 8 2 8.44772 2 9C2 9.55228 1.55228 10 1 10C0.447715 10 0 9.55228 0 9Z",fill:"currentColor"}}),t("path",{attrs:{d:"M0 13C0 12.4477 0.447715 12 1 12C1.55228 12 2 12.4477 2 13C2 13.5523 1.55228 14 1 14C0.447715 14 0 13.5523 0 13Z",fill:"currentColor"}}),t("path",{attrs:{d:"M4 1C4 0.447715 4.44772 0 5 0C5.55228 0 6 0.447715 6 1C6 1.55228 5.55228 2 5 2C4.44772 2 4 1.55228 4 1Z",fill:"currentColor"}}),t("path",{attrs:{d:"M4 5C4 4.44772 4.44772 4 5 4C5.55228 4 6 4.44772 6 5C6 5.55228 5.55228 6 5 6C4.44772 6 4 5.55228 4 5Z",fill:"currentColor"}}),t("path",{attrs:{d:"M4 9C4 8.44772 4.44772 8 5 8C5.55228 8 6 8.44772 6 9C6 9.55228 5.55228 10 5 10C4.44772 10 4 9.55228 4 9Z",fill:"currentColor"}}),t("path",{attrs:{d:"M4 13C4 12.4477 4.44772 12 5 12C5.55228 12 6 12.4477 6 13C6 13.5523 5.55228 14 5 14C4.44772 14 4 13.5523 4 13Z",fill:"currentColor"}})])}),[],!1,null,null,null).exports}}]);