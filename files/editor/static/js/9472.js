"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[9472],{69472:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s=i(18023),a=i(99519),n=i(58866),o=i(10972),l=i(66741),r=i(13638);const c=i(52811);let p={};c.keys().forEach((e=>{if(e.includes("Widgets")){const t=c(e),i=e.replace(/^\.\//,"").replace(/\.\w+$/,"");p[i]=t.default||t}}));var u={name:"WidgetsSecondMenu",data(){return{yzGetMinLevelId:r.gu,getLevelIdName:l.Gq,disabledReplace:["pagination","shapebrush","linebrush"]}},computed:{project:function(){return this.$store.state.project},widgetsList(){return(0,o.$)(this.project)},isShowReplaceResMode(){return this.$store.state.workSpace.isShowReplaceResMode},isFlipPro:function(){return this.$store.getters.isFlipPro},isXZPro(){return this.$store.getters.isXZPro}},components:{EditorSecondMenu:a.Z,EditorSecondMenuTitle:n.Z,...p},mounted(){},methods:{close(){this.$store.commit(s.$8l,{menu:"scene"})},back(){this.$store.commit(s.$8l,{menu:"material"}),this.$store.commit(s.xZf,{firstType:"material",secType:"resource"})},addWidgets(e){this.disabledReplace.includes(e.value)&&this.isShowReplaceResMode||(0,o.Q)(e.value)}}},d=(0,i(1001).Z)(u,(function(){var e=this,t=e._self._c;return t("EditorSecondMenu",[t("div",{staticClass:"widgets_panel"},[t("div",{staticClass:"widgets_panel_header"},[t("EditorSecondMenuTitle",{attrs:{title:e.isXZPro?"小工具":e.$t("secMenuElement.widgets"),isShowBack:!0},on:{"close-panel":e.close,"back-panel":e.back}})],1),t("el-row",{staticClass:"widgets",attrs:{type:"flex",align:"center"}},e._l(e.widgetsList,(function(i,s){return t("el-row",{key:s,staticClass:"widgets_item",class:{disabled:e.disabledReplace.includes(i.value)&&e.isShowReplaceResMode},attrs:{type:"flex",align:"middle",justify:"center"},nativeOn:{click:function(t){return e.addWidgets(i)}}},[t("div",{staticClass:"widgets_box"},[t("div",{staticClass:"widgets_icon"},[t("el-icon",[t(i.icon,{tag:"component"})],1)],1),t("div",{staticClass:"widgets_name"},[e._v(" "+e._s(i.tKey?e.$t(i.tKey):i.label)+" ")])]),i.isShowLevel?t("icon-version",{attrs:{"level-id":e.yzGetMinLevelId({type:i.value}),placement:"top-right"}}):e._e()],1)})),1)],1)])}),[],!1,null,"81a5d8a2",null).exports},10972:function(e,t,i){i.d(t,{$:function(){return m},Q:function(){return g}});i(97873),i(57658),i(30541);var s=i(18023),a=i(11721),n=i(95944),o=i(83093),l=i(36208),r=i(76748),c=i(85971),p=(i(24118),i(65687),i(89951)),u=i(75974),d=i(55683);i(64414);function m(e="yz"){const t=a.Z.state.userData.uType,i=[{icon:"WidgetsCodeIcon",tKey:"secMenuElement.code",label:"二维码",value:"qrcode"},{icon:"WidgetsShapeIcon",tKey:"secMenuElement.shapebrush",label:"形状画笔",value:"shapebrush"},{icon:"WidgetsLineIcon",tKey:"secMenuElement.linebrush",label:"线段画笔",value:"linebrush"}];"yz"===e&&i.push({icon:"WidgetsHotIcon",tKey:"secMenuElement.hotzone",label:"热区",value:"hotzone"},{icon:"WidgetsLikeIcon",tKey:"secMenuElement.like",label:"点赞",value:"like",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.likeLimit[t]});a.Z.getters.isFlipPro&&a.Z.getters.isFlipHighLevel&&i.unshift({icon:"WidgetsTableIcon",tKey:"secMenuElement.table",label:"表格",value:"table"}),"xz"!==e&&i.unshift({icon:"WidgetsEmdedIcon",tKey:"secMenuElement.emdedFilp",label:"内嵌网页",value:"iframe",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.iframeLimit[t]},{icon:"WidgetsPageIcon",tKey:"secMenuElement.page",label:"页码",value:"pagination"},{icon:"WidgetsTooltipIcon",tKey:"secMenuElement.tooltip",label:"提示",value:"tooltip",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.tooltipLimit[t]},{icon:"WidgetsQuizIcon",tKey:"secMenuElement.quiz",label:"问答",value:"quiz",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.quizEventLimit[t]}),"h5"!==e&&"yz"!==e||i.unshift({icon:"WidgetsTableIcon",tKey:"secMenuElement.table",label:"表格",value:"table",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.EDIT_CAN_USE_TABLE[t]},{icon:"WidgetsPageIcon",tKey:"secMenuElement.page",label:"页码",value:"pagination",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.EDIT_ADD_PAGE_NUM[t]},{icon:"WidgetsAutoToc",tKey:"secMenuElement.AutoGenerateTOC",label:"自动添加目录",value:"generateToc",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.goToPageEventLimit[t]},{icon:"WidgetsMapIcon",tKey:"secMenuElement.map",label:"地图",value:"map",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.EDIT_CAN_USE_MAP[t]}),"h5"===e&&i.unshift({icon:"WidgetsTextToImageIcon",tKey:"secMenuElement.textToImage",label:"textToImage",value:"textToImage"},{icon:"WidgetsLikeIcon",tKey:"m_like.like",label:"点赞",value:"like",isShowLevel:!a.Z.state.upgradePanel.serviceLimit.likeLimit[t]}),"xz"===e&&i.unshift({icon:"WidgetsDigitalIcon",tKey:"secMenuElement.Digital",label:"数字上涨",value:"countnum"});let s=["textToImage","map","table","pagination","phone","iframe","tooltip","generateToc","qrcode","shapebrush","linebrush","hotzone","like","countnum","quiz"];return a.Z.getters.isFlipPro&&(s.splice(3,1),s.splice(5,0,"pagination")),i.sort(((e,t)=>s.indexOf(e.value)-s.indexOf(t.value))),i}function g(e){const t=a.Z.state.pagePanel.isVisitorMode,m=a.Z.getters.isH5Pro;if(["qrcode","linebrush","shapebrush","generateToc"].includes(e)&&m&&t)a.Z.commit(s.Gvu,!0);else switch(e){case"map":!function(){(0,n.$P)({permissionType:"map"})||(0,n.DB)({permissionType:"map"});l.dE.push("tools.map"),(0,o.j)({item:{center:a.Z.getters.isYZPro?[116.40969,39.89945]:[-77.0368707,38.9071923],type:"map",place:a.Z.getters.isYZPro?{address:"北京市",detailAddress:"天安门"}:{address:"Washington",detailAddress:"Washington, DC, USA"}}})}();break;case"table":!async function(){(a.Z.getters.isH5Pro||a.Z.getters.isYZPro)&&((0,n.$P)({permissionType:"table"})||(0,n.DB)({permissionType:"table"}),await a.Z.dispatch(s.eNr,{fontFamily:"Hero",textStr:"table"}));l.dE.push("tools.table"),(0,o.j)({item:{border:!0,type:"table",tableIndex:1,rows:3,columns:3,trBgColor:"#9e77f3",borderStyle:{borderWidth:1,borderColor:"#333"},thBg:""}})}();break;case"phone":!function(){(0,n.$P)({permissionType:"phone"})||(0,n.DB)({permissionType:"phone"});a.Z.commit(s.CiL,.1),(0,o.j)({item:{type:"phone"}})}();break;case"qrcode":!function(){l.dE.push("tool.qrcode");let e=60,t=i(74798);const s=a.Z.getters.isYZPro,n=a.Z.getters.isFlipPro,c=a.Z.getters.isH5Pro;let p="www.xiuzhan365.com";s&&(p="www.yunzhan365.com");n&&(p="www.flipbuilder.com");c&&(p="www.fliphtml5.com");let u="rgba(0, 0, 0, 0)";s&&(u="rgba(255, 255, 255, 1)");let d=new t({content:`http://${p}`,padding:0,width:e,height:e,color:"#000000",background:u,ecl:"M"}).svg();d=d.replace(/"60">/g,'"60" viewBox="0 0 60 60">'),(0,o.j)({item:{type:"svg",svgCode:d,isQRCode:!0,name:r.ag.t("SecondMenuForTool_vue.text3")}})}();break;case"shapebrush":h("shape");break;case"linebrush":h("line");break;case"iframe":!function(){(0,n.$P)({permissionType:"iframe"})||a.Z.getters.isFlipPro||(0,n.DB)({permissionType:"iframe"});l.dE.push("tools.3rdpartyembeds"),(0,o.j)({item:{type:"iframe"}})}();break;case"hotzone":a.Z.commit(s.$8l,{menu:"hotZone"});break;case"pagination":!async function(){if(a.Z.state.workSpace.isShowReplaceResMode)return;let e={type:"pagination",copyPagesArray:[],endPage:0};if(a.Z.state.pagination.isAddPagination)return;let t=a.Z.getters.isH5Pro||a.Z.getters.isYZPro;t&&!(0,n.$P)({permissionType:"pagination"})&&(0,n.DB)({permissionType:"pagination"});l.dE.push("tools.pageno");let i=[],r=a.Z.state.pagePanel.pages.length;for(let e=0;e<r;e++)i.push(e);e.endPage=r,e.copyPagesArray=i,t&&await a.Z.dispatch(s.eNr,{fontFamily:"Hero",textStr:"pagination"});(0,o.j)({item:e}),a.Z.commit(s.ID6,{isNewAdd:!0})}();break;case"like":!function(){if(!a.Z.getters.isYZPro&&!a.Z.getters.isH5Pro)return;l.dE.push("tools.like"),(0,n.$P)({permissionType:"like"})||(0,n.DB)({permissionType:"like"});(0,o.j)({item:{type:"like",bookId:a.Z.state.bookData.bookId,timeId:(0,d.U)(),likeItemNewTime:(new Date).getTime(),style:{width:"35px",height:"20px",background:"transparent"},likeItemFontSize:20}})}();break;case"textToImage":l.dE.push("tools.texttoimage"),a.Z.commit(s.$8l,{menu:"textToImage"});break;case"tooltip":!function(){l.dE.push("tool.tooltip"),(0,n.$P)({permissionType:"tooltip"})||(0,n.DB)({permissionType:"tooltip"});(0,o.j)({item:{type:"tooltip"}})}();break;case"generateToc":!async function(){(0,n.$P)({permissionType:"generateToc"})||(0,n.DB)({permissionType:"generateToc"});l.dE.push("tools.autogentoc"),await(0,c.NQ)(),a.Z.state.pagePanel.isInverseSolution=!0,a.Z.commit(s.MgF,{type:"pieceConnect"})}();break;case"countnum":!async function(){a.Z.commit(s.SJ3,{type:"headLine"});const e={name:"数字上涨",type:"text",style:{width:"80px",height:"45px"},innerTextStyle:{fontSize:"42px"},textStr:"0",isNumberIncrease:!0},t=new p.Jy(e),i={id:"textNumberScroll",name:"数字上涨",limitVersion:0,props:[],type:"text",animeKey:"textNumberScroll",isAlways:!1,advanced:{startNumber:0,endNumber:10,interval:.1},ease:"default",easeFn:"default",easeType:"",repeat:0,repeatDelay:0,isYoyo:!1,noFaded:!1,delay:0,duration:1,isHoverBorder:!1,repeatArr:[]};await a.Z.dispatch(s.eNr,{fontFamily:t.innerTextStyle.fontFamily,textStr:"0123456789."});let n=(0,u.d)(t);a.Z.commit(s.ahn,{item:t}),i.props=n,t.animations.middle.push(i),t.animations.in.duration=.1,await a.Z.dispatch(s.VOZ,{item:t,selectItem:!0}),await a.Z.dispatch(s.fhz,{item:t})}();break;case"quiz":!function(){(0,n.$P)({permissionType:"quiz"})||(0,n.DB)({permissionType:"quiz"});l.dE.push("tools.openquiz"),(0,o.j)({item:{type:"quiz"}})}()}}function h(e){l.dE.push(`tool.${e}`);a.Z.state.workSpace.svgPainter.isEnable||(a.Z.state.timeline.beforGetinSvgTimelineHeight=a.Z.state.timeline.timelineHeight,a.Z.state.workSpace.isShowToolbar=!1,a.Z.state.workSpace.svgPainter.isEnable=!0,a.Z.state.timeline.timelineHeight=0,a.Z.state.rightPanel.showRightPanel=!0,a.Z.state.workSpace.svgPainter.shapeType=e)}}}]);