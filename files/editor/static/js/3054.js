"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[3054],{76558:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(18023),s={name:"ImageToBeQRCode",computed:{isMulti:function(){return this.$store.getters.isMulti},multiItemsList:function(){return this.$store.getters.multiList},multiAllTypeList:function(){return this.$store.getters.multiAllTypeList},multiSettingCount(){return this.$store.getters.multiSettingCount},currentPageItems:function(){return this.$store.getters.currentPageItems},currentSelectedItem:function(){return this.$store.getters.currentSelectedItem},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex},isQRCodeImg:{get(){if(this.isMulti){const e=this.multiItemsList.find((e=>e.isQRCodeImg));return!!e&&e.isQRCodeImg}return this.currentSelectedItem.isQRCodeImg},set(e){this.toQRCodeImg(e)}}},methods:{toQRCodeImg(e){this.$store.commit(r.CjF),this.isMulti?this.multiSettingCount.forEach((t=>{const i=this.currentPageItems[t];this.imageToggleQRCode(i,e)})):this.imageToggleQRCode(this.currentSelectedItem,e),this.$store.commit(r.N23,{canUndo:!0})},imageToggleQRCode(e,t){if("image"===e.type){const{isGifImage:i,isApng:r,isSprite:s}=e;!i&&!r&&!s&&(e.isQRCodeImg=t)}else"group"===e.type&&e.items.forEach((e=>{this.imageToggleQRCode(e,t)}))}},components:{InfoTipsIcon:()=>i.e(3352).then(i.bind(i,83352))}},o=(0,i(1001).Z)(s,(function(){var e=this,t=e._self._c;return t("el-row",{attrs:{type:"flex",align:"middle"}},[t("el-row",{staticClass:"QRchecked",attrs:{type:"flex",align:"middle"}},[t("el-checkbox",{attrs:{"data-v":"v2"},on:{change:e.toQRCodeImg},model:{value:e.isQRCodeImg,callback:function(t){e.isQRCodeImg=t},expression:"isQRCodeImg"}},[e._v(" "+e._s(e.$t("rightPanel.image_lonePress"))+" "),t("el-tooltip",{attrs:{placement:"top",enterable:!1,"open-delay":800},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",{staticClass:"long_press_tip"},[e._v(e._s(e.$t("rightPanel.image_lonePressTip")))])]},proxy:!0}])},[t("el-icon",{staticClass:"long_press_icon"},[t("InfoTipsIcon")],1)],1)],1)],1),t("template",{slot:"title"},[t("el-tooltip",{attrs:{placement:"top","open-delay":800}},[t("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$t("rightPanel.image_isQRcodeImageType_tips")))]),t("i",{staticClass:"el-icon-warning-outline el-icon-notice",staticStyle:{"font-size":"14px","margin-left":"5px"}})])],1)],2)}),[],!1,null,"0484d64e",null).exports},7631:function(e,t,i){i.d(t,{Z:function(){return I}});var r=i(92301),s=i(2137),o=(i(28206),i(8021)),n=i(18023),l=i(87632),a=i(66546),c=i(89951),u=i(24118),m=i(23407),g=i(57144),p=i(73385),d=i(56084),h={name:"UploadImageToReplace",data(){return{}},computed:{imageUploadOpts(){return new s.C({multiple:!1,accept:this.acceptImageType.map((e=>`.${e}`)).join(",")})},acceptImageType:function(){return this.isFlipPro?[...this.$store.getters.acceptImageType,"svg"]:this.$store.getters.acceptImageType},isMulti:function(){return this.$store.getters.isMulti},isFlipPro:function(){return this.$store.getters.isFlipPro},multiSettingCount(){return this.$store.getters.multiSettingCount},currentPageItems:function(){return this.$store.getters.currentPageItems},currentSelectedItem(){return this.$store.getters.currentSelectedItem},currentSelectedItemIndex:function(){return this.$store.state.workSpace.currentSelectedItemIndex},currentSelectedGroupItemIndex:function(){return this.$store.state.workSpace.currentSelectedGroupItemIndex}},methods:{replaceImageToSvg(e){this.$store.commit(n.CjF);let{url:t,fileName:i}=e;this.isMulti?this.multiSettingCount.forEach((i=>{const r=this.currentPageItems[i];"group"===r.type?this.replaceGroupImagesToSvg(r,e,t):"image"===r.type&&this.replaceCurImageItemToSvg(r,e,t,i)})):-1===this.currentSelectedGroupItemIndex?this.replaceCurImageItemToSvg(this.currentSelectedItem,e,t,this.currentSelectedItemIndex):this.replaceImageToSvgInGroup({resource:e,imageUrl:t,groupItem:this.currentSelectedItem,groupIndex:this.currentSelectedGroupItemIndex,group:this.currentPageItems[this.currentSelectedItemIndex],isMulti:!1}),a.Q.$emit(a.Y.TIMELINE_CREATE_ANIME,{isSeekToCurrentSlider:!0}),this.$store.commit(n.N23,{canUndo:!0}),this.$store.commit(n.jQC,{fileName:i})},replaceImage(e){this.$store.commit(n.CjF);let{url:t,fileName:i,svgUrl:r}=e;-1===t.indexOf(".svg")&&!r||!this.isFlipPro?(-1===t.indexOf("x-oss-process")&&(t=~t.indexOf(".gif")?`${t}${this.$store.getters.ossGifImgSuffix}`:`${t}${this.$store.getters.ossImgSuffix}`),this.isMulti?this.multiSettingCount.forEach((i=>{const r=this.currentPageItems[i];"group"===r.type?this.replaceGroupImages(r,e,t):"image"===r.type&&this.replaceCurImageItem(r,e,t,i)})):-1===this.currentSelectedGroupItemIndex?this.replaceCurImageItem(this.currentSelectedItem,e,t,this.currentSelectedItemIndex):this.replaceImageInGroup({resource:e,imageUrl:t,groupItem:this.currentSelectedItem,groupIndex:this.currentSelectedGroupItemIndex,group:this.currentPageItems[this.currentSelectedItemIndex]}),a.Q.$emit(a.Y.TIMELINE_CREATE_ANIME,{isSeekToCurrentSlider:!0}),this.$store.commit(n.N23,{canUndo:!0}),this.$store.commit(n.jQC,{fileName:i})):this.replaceImageToSvg(e)},async replaceCurImageItemToSvg(e,t,i="",r){const s=(0,m.p)(t.svgCode),l=g.Z.getOriginSvgColorList(s).newColorList,a=new c.KP({svgCode:t.svgCode,originColorList:l,svgUrl:i,name:t.name,fileName:u.Z.getPathFilename(i),isUpload:!0,isNewFile:!0});if("group"===e.type)this.replaceGroupImagesToSvg(e,t,i);else{const t=(0,o.P)(a,e);this.$store.commit(n.loC,{items:[t],spliceIndex:r})}},replaceCurImageItem(e,t,i="",s){if("group"===e.type)this.replaceGroupImages(e,t,i);else{let{width:l,height:a,fileName:c}=t;const u=new r.Z({originalWidth:l,originalHeight:a,url:i,isUpload:!0,fileName:c,isCreatedByYZTemplate:e.isCreatedByYZTemplate});if("frames"===e.type)return void(0,p.Y)(e,u);const m=(0,o.P)(u,e);this.$store.commit(n.loC,{items:[m],spliceIndex:s})}},async asyncForEach(e,t){for(let[i,r]of e.entries())await t(r,i)},async replaceGroupImagesToSvg(e,t,i){await this.asyncForEach(e.items,(async(r,s)=>{"image"!==r.type&&"svg"!==r.type||await this.replaceImageToSvgInGroup({resource:t,imageUrl:i,groupItem:r,groupIndex:s,group:e,isMulti:!0})})),this.$store.commit(n.V$Q,{}),this.$store.commit(n.jMO)},replaceGroupImages(e,t,i){e.items.forEach(((r,s)=>{"image"===r.type&&this.replaceImageInGroup({resource:t,imageUrl:i,groupItem:r,groupIndex:s,group:e})}))},async replaceImageToSvgInGroup({resource:e,imageUrl:t="",groupItem:i,groupIndex:r=0,group:s,isMulti:l}){const a=(0,m.p)(e.svgCode),p=g.Z.getOriginSvgColorList(a).newColorList,d=new c.KP({svgCode:e.svgCode,originColorList:p,svgUrl:t,name:e.name,fileName:u.Z.getPathFilename(t),isUpload:!0,isNewFile:!0}),h=(0,o.P)(d,i);s.items.splice(r,1,h),l||(this.$store.commit(n.V$Q,{}),this.$store.commit(n.jMO))},replaceImageInGroup({resource:e,imageUrl:t="",groupItem:i,groupIndex:s=0,group:n}){let{width:l,height:a,fileName:c}=e;const u=new r.Z({originalWidth:l,originalHeight:a,url:t,isUpload:!0,fileName:c,isCreatedByYZTemplate:i.isCreatedByYZTemplate});if("frames"===i.type)return void(0,p.Y)(i,u);const m=(0,o.P)(u,i);n.items.splice(s,1,m)},replaceFastAddPopupImg:function(e,t,i){if(!this.isYZPro)return;const r=e.type,s=e.actionList;["image","svg"].includes(r)&&0!==s.length&&s.forEach((e=>{const r=e.popupImg.imgList;r&&r.length>0&&r.forEach((e=>{e.isFastAdd&&(e.url=t,e.fileName=i,e.isNewFile=!0)}))}))}},components:{MutiUploadList:l.default,SelectImageIcon:d.default}},I=(0,i(1001).Z)(h,(function(){var e=this,t=e._self._c;return t("MutiUploadList",{ref:"uploadButton",attrs:{"upload-title":e.$t("rightPanel.image_changeImage"),"file-dialog-opts":e.imageUploadOpts},on:{"upload-success":e.replaceImage}},[t("template",{slot:"title"},[t("el-icon",{staticStyle:{"margin-right":"5px"},attrs:{size:14}},[t("SelectImageIcon")],1),t("span",[e._v(e._s(e.$t("rightPanel.image_changeImage")))])],1)],2)}),[],!1,null,null,null).exports},56084:function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var r=(0,i(1001).Z)({},(function(){var e=this._self._c;return e("svg",{attrs:{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{"clip-path":"url(#clip0_14693_18258)"}},[e("path",{attrs:{d:"M3 3H11C12.1046 3 13 3.89543 13 5V8L10 6L4 11",stroke:"#333333","stroke-width":"2","stroke-linejoin":"round"}}),e("path",{attrs:{d:"M1 5V10.5C1 10.7761 1.22386 11 1.5 11H10",stroke:"#333333","stroke-width":"2"}}),e("path",{attrs:{d:"M4 4V0.608402C4 0.0674589 3.34598 -0.203447 2.96347 0.179057L0.179057 2.96347C-0.203447 3.34598 0.067458 4 0.608401 4H4Z",fill:"#333333"}}),e("path",{attrs:{d:"M10 10V13.3916C10 13.9325 10.654 14.2034 11.0365 13.8209L13.8209 11.0365C14.2034 10.654 13.9325 10 13.3916 10H10Z",fill:"#333333"}}),e("circle",{attrs:{cx:"4",cy:"6",r:"1",fill:"#333333"}})]),e("defs",[e("clipPath",{attrs:{id:"clip0_14693_18258"}},[e("rect",{attrs:{width:"14",height:"14",fill:"white"}})])])])}),[],!1,null,null,null).exports}}]);