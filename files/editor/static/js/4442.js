"use strict";(self.webpackChunkeditor_cli=self.webpackChunkeditor_cli||[]).push([[4442],{14442:function(t,e,s){s.r(e),s.d(e,{default:function(){return _}});s(30541),s(57658);var a=s(18023),o=s(99519),i=s(58866),n=s(63037),r=s(27602),l=s(33917),d={name:"LibrarySecondLayout",data(){return{bePosition:!1,isDisable:!1,startTime:0,duration:500,screenTop:0,isSearchMode:!1,keepSearchValue:""}},props:{title:{type:String},isImproving:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!0},placeholder:{type:String},showTitle:{type:Boolean,default:!0,desc:"是否显示顶部titie组件"},isShowBack:{type:Boolean,default:!0},isShowBackToTop:{type:Boolean,default:!0}},computed:{searchValue(){return this.$store.state.menuPanel.secMenuSearchValue},isYZPro:function(){return this.$store.getters.isYZPro},isH5Pro:function(){return this.$store.getters.isH5Pro}},methods:{close(){this.$store.commit(a.$8l,{menu:"scene"})},back(){this.$store.commit(a.$8l,{menu:"material"}),this.$store.commit(a.xZf,{firstType:"material",secType:"resource"})},onSearch(t){this.$emit("search",t),this.keepSearchValue=t},debounceScroll(t){const e=t.target.scrollTop,s=this.$refs.scroll_content.scrollHeight-e-this.$refs.scrollContainer.scrollHeight;this.bePosition=e>150,s<20&&this.$emit("scrollPost"),this.scrollTop=e,this.$emit("scroll",e)},backToTop(){if(this.isDisable)return;this.isDisable=!0;performance.now();const t=this.$refs.scroll_content;t&&t.scrollTo({top:0,behavior:"smooth"});this.$refs.scroll_content.scrollTop;this.isDisable=!1}},activated(){this.$refs.scroll_content&&(this.$refs.scroll_content.scrollTop=this.scrollTop||0),this.keepSearchValue!==this.searchValue&&this.onSearch(this.searchValue)},components:{EditorSecondMenu:o.Z,EditorSecondMenuTitle:i.Z,EditorSecondMenuSearchInput:n.Z,GetMaterialTips:r.Z,SearchHistory:l.Z}},c=s(1001),u=(0,c.Z)(d,(function(){var t=this,e=t._self._c;return e("EditorSecondMenu",[e("el-row",{staticClass:"second_layout_panel",attrs:{type:"flex"}},[e("el-row",{staticClass:"second_layout_panel_header"},[t.showTitle?e("el-row",{staticClass:"e_pb_15"},[e("EditorSecondMenuTitle",{attrs:{title:t.title,isShowBack:t.isShowBack},on:{"close-panel":t.close,"back-panel":t.back},scopedSlots:t._u([{key:"title",fn:function(){return[t._t("title")]},proxy:!0}],null,!0)})],1):t._e(),t.isSearch?e("el-row",{staticClass:"e_pb_15"},[e("EditorSecondMenuSearchInput",{attrs:{keyword:t.searchValue,showHistroy:!0,isSearchMode:t.isSearchMode,placeholder:t.placeholder,localKey:"searchValueList"},on:{"update-search":t.onSearch,"update:isSearchMode":function(e){t.isSearchMode=e},"update:is-search-mode":function(e){t.isSearchMode=e}}})],1):t._e()],1),e("el-row",{staticClass:"second_layout_panel_list",attrs:{type:"flex"}},[e("div",{directives:[{name:"bar",rawName:"v-bar"}],ref:"scrollContainer",staticClass:"scroll_contatiner"},[e("div",{ref:"scroll_content",staticClass:"scroll_content",on:{scroll:t.debounceScroll}},[t._t("default"),t.isImproving?e("div",{staticClass:"tipsWrap"},[e("GetMaterialTips")],1):t._e()],2)])]),t.isShowBackToTop?e("div",{staticClass:"backToTop editor_v2_back_2_top",class:{showBackToTop:t.bePosition,isYZH5:t.isYZPro||t.isH5Pro},on:{click:function(e){return t.backToTop()}}},[e("i",{staticClass:"toTopIcon el-icon-arrow-up"})]):t._e()],1)],1)}),[],!1,null,"356aeaec",null).exports,p=s(44607),h=s(87428),m=s(49202),b=s.n(m),f=s(66546),T={name:"SecondMenuForCustomTabs",data(){return{drag:!1,dragOptions:{animation:200,group:"description",disabled:!1,ghostClass:"ghost"},addedTabs:[],notAddedTabs:[]}},computed:{isXZPro:function(){return this.$store.getters.isXZPro},isFlipPro:function(){return this.$store.getters.isFlipPro},customMenuList:{get(){return this.$store.state.menuPanel.customMenuList},set(t){this.isXZPro||this.isFlipPro?localStorage.setItem(`${this.$store.state.project}_menuList`,JSON.stringify(t.filter((t=>"added"===t.status)).map((t=>t.key)))):(0,h.R)({menuList:JSON.stringify(t.filter((t=>"added"===t.status)).map((t=>t.key)))}),this.$store.commit(a.d0J,t),f.Q.$emit(f.Y.UPDATE_CUSTOM_MENU_LIST)}}},mounted:function(){this.addedTabs=this.customMenuList.filter((t=>"added"===t.status)),this.notAddedTabs=this.customMenuList.filter((t=>"notAdded"===t.status))},methods:{optionIcon(t){switch(t){case"added":return"icon-delete";case"notAdded":return"icon-add"}},addedTabsChange({moved:t,added:e,removed:s}){e?e.element.status="added":s&&(s.element.status="notAdded"),this.updateCustomMenuList()},notAddedTabsChange({moved:t,added:e,removed:s}){t?this.updateCustomMenuList():e?e.element.status="notAdded":s&&(s.element.status="added")},handleTabs(t,e){const s=this.addedTabs.findIndex((e=>e.key===t)),a=this.notAddedTabs.findIndex((e=>e.key===t));if("up"===e){if(0===s)return;const t=this.addedTabs.splice(s,1);this.addedTabs.splice(s-1,0,t[0])}else if("down"===e){if(s===this.addedTabs.length-1)return;const t=this.addedTabs.splice(s,1);this.addedTabs.splice(s+1,0,t[0])}else if("delete"===e){this.addedTabs[s].status="notAdded";const t=this.addedTabs.splice(s,1);this.notAddedTabs.unshift(t[0])}else if("add"===e){this.notAddedTabs[a].status="added";const t=this.notAddedTabs.splice(a,1);this.addedTabs.push(t[0])}this.updateCustomMenuList()},updateCustomMenuList:function(){this.customMenuList=this.addedTabs.concat(this.notAddedTabs)},close(){this.$store.commit(a.$8l,{menu:"scene"})}},activated(){},components:{SecondMenuLayout:u,EditorSecondMenu:o.Z,EditorSecondMenuTitle:i.Z,draggable:b(),...p.Z}},_=(0,c.Z)(T,(function(){var t=this,e=t._self._c;return e("EditorSecondMenu",[e("el-row",{staticClass:"editor_custom_tabs",attrs:{type:"flex"}},[e("el-row",{staticClass:"editor_custom_top"},[e("el-row",{staticClass:"e_pb_15"},[e("EditorSecondMenuTitle",{attrs:{title:t.$t("secMenu.customizeSideToolbar")},on:{"close-panel":t.close}})],1)],1),e("el-row",{staticClass:"sec_menu_flex_1",attrs:{type:"flex"}},[e("div",{directives:[{name:"bar",rawName:"v-bar"}],staticClass:"scroll_layout"},[e("div",[e("div",{staticClass:"SecondMenuForCustomTabs e_plr_15"},[e("div",{staticClass:"custom-tabs-title e_pb_15"},[t._v(t._s(t.$t("CustomMenu.featuresAdded")))]),e("draggable",t._b({staticClass:"custom-tabs-list e_pb_15",attrs:{group:"customTabs","scroll-sensitivity":50,"force-fallback":!0},on:{change:t.addedTabsChange,start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.addedTabs,callback:function(e){t.addedTabs=e},expression:"addedTabs"}},"draggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition",name:null}},t._l(t.addedTabs,(function(s){return e("el-row",{key:s.key,staticClass:"custom-tabs-item e_plr_15",attrs:{type:"flex",align:"middle",justify:"space-between"}},[e("el-row",{staticClass:"custom-tabs-item-name",attrs:{type:"flex",align:"middle"}},[e("el-icon",{attrs:{size:16}},[e(s.iconName,{tag:"component"})],1),e("span",{attrs:{title:t.$t(s.tKey)}},[t._v(t._s(t.$t(s.tKey)))])],1),e("el-row",{staticClass:"custom-tabs-item-options",attrs:{type:"flex",align:"middle"}},[e("el-icon",{staticClass:"tabs-options-icon",attrs:{size:12},nativeOn:{click:function(e){return e.stopPropagation(),t.handleTabs(s.key,"up")}}},[e("IconUp")],1),e("el-icon",{staticClass:"tabs-options-icon",attrs:{size:12},nativeOn:{click:function(e){return e.stopPropagation(),t.handleTabs(s.key,"down")}}},[e("IconDown")],1),e("el-icon",{staticClass:"tabs-options-icon",attrs:{size:20},nativeOn:{click:function(e){return e.stopPropagation(),t.handleTabs(s.key,"delete")}}},[e(t.optionIcon(s.status),{tag:"component"})],1)],1)],1)})),1)],1),e("div",{staticClass:"custom-tabs-title e_pb_15"},[t._v(" "+t._s(t.$t("CustomMenu.featuresNotAdded"))+" ")]),e("draggable",t._b({staticClass:"custom-tabs-list",attrs:{group:"customTabs","scroll-sensitivity":50,"force-fallback":!0},on:{change:t.notAddedTabsChange,start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.notAddedTabs,callback:function(e){t.notAddedTabs=e},expression:"notAddedTabs"}},"draggable",t.dragOptions,!1),t._l(t.notAddedTabs,(function(s){return e("el-row",{key:s.key,staticClass:"custom-tabs-item e_plr_15",attrs:{type:"flex",align:"middle",justify:"space-between"}},[e("el-row",{staticClass:"custom-tabs-item-name",attrs:{type:"flex",align:"middle"}},[e("el-icon",{attrs:{size:16}},[e(s.iconName,{tag:"component"})],1),e("span",{attrs:{title:t.$t(s.tKey)}},[t._v(t._s(t.$t(s.tKey)))])],1),e("el-row",{staticClass:"custom-tabs-item-options",attrs:{type:"flex",align:"middle"}},[e("el-icon",{staticClass:"tabs-options-icon",attrs:{size:20},nativeOn:{click:function(e){return e.stopPropagation(),t.handleTabs(s.key,"add")}}},[e(t.optionIcon(s.status),{tag:"component"})],1)],1)],1)})),1)],1)])])])],1)],1)}),[],!1,null,"dfc76a02",null).exports}}]);